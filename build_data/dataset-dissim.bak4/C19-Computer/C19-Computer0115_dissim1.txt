计算机应用
COMPUTER APPLICATIONS
1999年 第19卷 第9期 Vol.19 No.9 1999



触发器的几种应用
李振华　李贵龙　刘涯
　　摘　要　列举了触发器的几种代表性应用：数据分散―集中式模型的设计，历史数据的导出，应用系统间的数据接口。并对如何设计这些触发器进行了探讨。HP 的Network Node Manager(NNM)是可以用于分布式管理系统，系统分为管理域和采集域。网管平台适应多协议网络环境，提供较全面的管理服务，并可安装符合规范的附加管理模块。
　　在文献［1］中，列举了触发器的几种应用：审计;复杂的完整性约束;复杂的安全性授权;事件登录;列值导出;分布式数据库中表复制。
2　触发器的另外几种应用
2.1　数据分散――集中式模型设计
　　在实际开发过程中，经常遇到这样的数据维护要求：单位由多个部门组成，要求各部门只能维护本部门的数据，但另一方面，又需要将分散到各部门的数据集中起来进行汇总，得到本单位的汇总数据。限制节点发现功能是根据文件，可以将网络发现限制在指定的IP地址范围内。
　　在这种情况下，如果不使用触发器的话，数据库设计就存在困难：
　　. 如果为每个部门都建立一个表，显然难以得到汇总的数据（在这种情况下，无法利用视图机制）；
　　. 如果所有的部门都共享一个表的话（这时，这张表中的数据实际就是汇总的数据），因为每个部门需要维护数据，所以都对这个表有修改权，因此在数据安全上难以控制。
　　使用触发器的话，上述问题便可迎刃而解：为每个部门建立一个表（该部门的所有权限只限于对此表有修改权），再为汇总数据也建立一个表，然后在每个部门表上建立触发器，使得部门表上有数据更新时，便会对应地更改汇总表中的相关数据（见图1）。而独立的管理工作站间也能在其管理域内交换管理信息。
2.2　历史数据导出
　　数据库中的表只记载最新的数据，而不记载历史数据。但在很多情况下，历史数据的记载与分析反而比现实数据更有意义（这也正是数据仓库与数据库的区别之一），比如学校中学号的变动，工厂定额的更改，公司产品和原材料价格的变化、股票的升跌等等，它们都需要记录历史数据。委托将RPC协议翻译成能被有关元素理解的协议，通过它，SNM可以管理大量的资源，包括：
　　. 通信协议层和接口
　　. 网络设备，如网桥、路由器、集线器、打印机、工作站和PC机
　　. 应用程序，数据和网络服务
　　. 系统和操作系统资源
　　在分布式管理结构中，配置委托代理时应使之尽量靠近所管理的设备，过滤陷阱信息和延迟发送报告以减少同控制台的传输量，分布式管理应用程序注册从事件发送设备收到的报告？但它基本上还是个开发平台，还需要第三方厂商开发的应用系统来实现。
　　建立这类触发器的步骤是：建立数据表后，再建立对应的历史表（一般而言，历史表在字段组成上是数据表的超集，即在原数据表字段上再增加有关时间的字段），然后在两者之间设立触发器（见图2）。
2.2　SUN NetManager
　　SUN NetManager（以下简称SNM）是分布式管理体系结构的网络管理系统，可以管理包括DECnet和FDDI网络环境，并能够与IBM的NetView相互配合。

图2　历史数据的导出模式
2.3　应用系统间的数据接口
　　一个完整的信息系统的建设一般不是一步到位的，往往是分期分批完成，而不同期次的系统往往又会有数据传递，然而由于需求发生变化或是其他原因，不同期次系统的数据库设计在表结构甚至字段上的设计都可能会互不一致（即使是在同一期的开发过程中，由于总体设计或数据字典方面的偏差或不足，或者需要集成多家系统，这种现象也会经常出现）。在不可能重建这些系统的情况下，它们之间的数据能无缝传递吗？换言之，它们之间能够做到无缝连接吗？整个网络管理的核心集中于网络控制台，网管员容易掌握全网情况。
2.1　HP OpenView
　　HP OpenView（以下简称OV） 是第一个网管平台，其核心框架提供了基本应用的开放系统环境。
3　结语
　　触发器对数据库开发过程中遇到的问题，往往会有独到的解决方法。触发器能使数据库的设计变得简洁和高效。文中的3个例子，代表了触发器3个方面的典型应用。
作者简介：李振华　硕士，讲师。
3.2　Sun NetManager应用开发环境
　　Sun NetManager应用开发环境也包括应用程序接口，事件管理服务，以及数据库支持。
作者单位：中国地质大学网络中心　湖北.武汉（430074)
参考文献
［1］　沈佩娟，汤荷美,编著. 数据库管理及应用开发(第1版).北京：清华大学出版社，1995,6
收稿日期:1999-03-15
