微型电脑应用
MICROCOMPUTER APPLICATIONS
2000　Vol.16　No.1　P.55-56



Microsoft SQL Server数据库安全备份
和恢复策略
陈万米　何智伟
摘　要：本文提出了异机备份的策略，它能在数据服务器崩溃或Microsoft SQL Server系统崩溃时有效的恢复数据，从而有力的保证了Microsoft SQL Server中数据的完整、安全。本文介绍的方法对于开发Windows 9X实时控制系统具有实际的参考价值。Microsoft SQL Server是运行在Microsoft Windows NT上的一个高性能数据库管理系统，它基于多线程的客户/服务器体系结构，这一点与其他流行的多进程客户/服务器数据库系统不同，多线程的数据库系统与多进程的数据库系统相比，装入Microsoft SQL Server时，仅仅启动一个进程，而每个用户有各自的线程，这种结构需要的资源比多进程系统少得多。Microsoft SQL Server的强大功能还表现在其保证数据的完整性，有了服务器维护数据的完整性，就没有再必要依赖各个部门的程序员，他们能力各异，编写的应用程序也很难统一，然可以在应用程序内部努力保证完整性，但是没有必要完全寄希望于此，因为有了Microsoft SQL Server，就可以在整个LAN内部保证数据库信息的完整性和一致性。利用QuickVxD生成的框架程序和经充分测试过的C运行库或C++类库可以绕过DDK用C或C++来编制驱动程序，这就大大地简化了开发的难度，提高了可靠性。
二、故障的产生及后果
　　计算机系统有许多种故障类型，诸如：
　　.机械损坏，计算机的各种部件(包括磁盘)都存在物理的，机械的故障可能性。
　　.电源故障，指一般的UPS无法保护的异常电源故障。
　　.自然灾害，地震、水灾，火灾或其他原因造成的严重故障。可以设置双缓冲区来实现实时中断与处理线程的同步。
　　.恶意破坏，在一个系统中也不排除一些恶意破坏者。
　　.其他还有多种形式，但大多数是以上几种形式的变体。
　　假如没有数据备份，一旦产生故障(主要是系统发生故障)那就不可能恢复丢失的数据，如果是这样的话，不得不返回物理文件重新输入所有数据，试想一下，输入以前那些信息曾花费了多少个日夜，并且在重新输入旧数据时，新数据还在不断的到来，所以没有理由不为服务器配置一个有效的备份设备，多投入一点资金与潜在的不可恢复的商业信息以及人们的宝贵时间相比显得微不足道。
三、备份策略
　　定期备份数据库是最稳妥的防止磁盘故障(主要是系统发生故障)的方法，它能有效的恢复数据，这是一种比较兼价的保险形式，同时也是最简单的确保能恢复大部分信息的方法。此外，在当今的计算机控制领域中，控制软件是否基于Windows平台已经成为产品是否有竞争力的重要标准之一［1］。(根据数据的重要程序，可以选择每周、每日、每时进行备份)。
　　.使用静态备份还是动态备份，(动态备份也即允许数据库运行时进行备份)。
　　.仅使用全备份还是共同使用全备份和增量备份。
　　.使用什么介质，(磁带还是磁盘)。
　　.使用人工备份还是设计好的自动备份程序。与基于VME、MULTIBUS以及STD总线的平台相比，基于ISA总线的高性能PC工控机(IPC)无疑是近来应用最为广泛的主流产品。
　　.备份存储的空间是否防窃、防磁干扰、防火。
　　.是否指定其他人实行备份，他们是否享有必要的登录号和口令。开发中选定Windows 98作为软件开发平台，为了充分利用32位CPU和操作系统的处理能力，选择Microsoft Visual C++ 6.0作为应用层(ring 3)开发工具，应用程序是基于MFC。这种方法不需要用户提供附加的硬件定时器。
　　.在中断频率较高的数据采集系统中。■
作者单位：姜山(上海交通大学存储研究中心 200030)
参考文献：
［1］Dean J.Petrone, Michael D. Stackhouse PC-Based Control Goes Real-ti me Control Engineering.Apil 1998
［2］Martin Timmermon, Windows NT Real time extensions better or worse。"MB-OK);//与VxD通讯失败
然后在自定义消息处理函数中加入自己的实时处理代码。■
作者单位：陈万米(上海大学自动化学院 上海200070)
　　　　　何智伟(复旦大学网络中心 上海 200433)
参考文献：
［1］Jeffy L. Byrne,<<Microsoft SQL Server6.5管理员手册>>　机械工业出版社　1998
［2］庄天红　常用数据库系统性能解析　微型电脑应用　1999.2
收稿日期：1999-09-14
