微型机与应用
WEIXINGJI YU YINGYONG
2000　Vol.19　No.5　P.24-25




语音拨号电话的研究与开发
宋志辉徐劲飞周兵
摘 要：美国Sensory公司的语音识别芯片RSC－164，介绍了主控芯片和RSC－164间的通信接口以及在此基础上研制的能进行语音拨号的多功能电话。
关键词：语音拨号电话DSP MCU 语音识别 通信协议
　　随着大规模集成电路的快速发展，使原先在台式计算机（PC）上才能够完成的复杂功能已逐步能够在单片机系统上得以实现，各种具有特定功能的数字信号处理（DSP-Digital Singnal Process）
芯片愈来愈广泛地应用到家电产品中，给人们的生活带来了极大方便。语音识别技术就是其中一例。
　　现有的语音识别DSP芯片已经应用在电话机、身份识别、自动控制等多个领域中。具有语音识别能力、能够用声音进行拨号的电话机，在汽车驾驶员、病人、老年人、儿童等用户群体中具有较好的市场前景。
　　要实现语音拨号功能，电话机中必须有1片主控芯片（MCU-MicroController Unit）来控制语音识别DSP的工作，该主控芯片主要完成普通电话机的所有控制功能和对语音识别DSP的控制。
　　①诊断方式：硬盘控制器在加电、复位或执行驱动器诊断命令以后的工作方式。
　　（5）柱面号寄存器：（1F4H 1F5H R／W）：它记录读、写、校验、寻址和格式化命令指定的柱面号，ATA标准允许65536柱面，但早期的IDE控制器中只允许1024个柱面。
1 系统结构
　　本系统将美国Sensory公司的语音识别芯片RSC－164（以下简称164）应用到自行编写的电话MCU上，成功地开发出了语音拨号电话，系统结构如图1所示。

图1 语音拨号电话结构图
　　在普通电话机上，用户只能通过手柄和键盘与电话进行交互。而在本系统中，用户还可以通过手柄或机座上的话筒与系统进行交互，即：用户通过话筒输入指令信息，164识别、解释出语音指令并将其传送到MCU，MCU再根据该指令将控制信号发送到其它器件（也包括164）以完成相应的动作。
　　同时，用户也可通过键盘向MCU发出动作请求，MCU将用户的请求以相应指令的形式发送给164，164即开始进入工作状态，通过话筒与用户进行交互以完成训练或识别等功能。
2 语音识别芯片介绍
　　Sensory的RSC－164是一种高性能的语音识别芯片，其结构如图2所示。

图2 RSC-164结构及接口
　　ROM中存放提示信息，提示信息分成2组，1组是芯片固有的训练和识别信息，如“请说姓名”、“请重复”、“噪音太大”等共57条。
　　第1种方式称为自动配置，这主要是向那些不用BIOS存取磁盘的操作系统（如Netware和UNIX）提供的。
　　164将人名和对应的电话号码以记录的形式存放在RAM中，1Mb的RAM可存放30条记录（也可扩充至2Mb，存放60条记录）。每条记录由4个部分组成：
　　（1）与人名有关的语音识别模板；
　　（2）人名的语音录音；
　　（3）相关的电话号码（可达30位）；
　　（4）属性信息。
　　语音拨号电话机系统主要运用了164的语音训练和识别功能。语音训练过程简便、迅速。按训练键，系统提示用户说2遍人名，系统可自动提取话音中的特征信息，将它们转换成2个独立的语音识别模板，并比较这2个模板。如果2个模板的差异在允许的范围内，则将其中的1个模板和对应的语音录音存入记录中（否则，提示用户2次输入差别太大，重新进行训练），提示用户从键盘上输入对应的电话号码后完成训练过程。其定义如表9所示。
　　识别过程也就是用语音进行拨号的过程：按识别键，系统提示用户说出人名，将人名的语音特征信息转换成1个临时模板，并与记录中的模板进行比较，找出与该临时模板的语音特征相近的模板记录，若这2个模板的误差在允许的范围内（误差范围即识别精确度分为3个不同的级别，用户可自行设定），则返回相应记录的指针。这时，MCU可发出不同的命令，如读出对应的人名供用户确认是否识别正确、获得对应的电话号码并拨打出去等。如果是LBA寻址方式，这2个寄存器包含起始扇区的1和2字节。它们之间的这些协调过程都是以实时通信为基础的，通信功能由164的串行接口完成，它是由3根线组成的同步串行接口，如图2所示，即双向数据线（DATA）、MCU握手信号（MHS-Master Handshake）和164握手信号（SHS-Slave Handshake）。数据和握手信号在MCU和164间进行传送时3根线的作用如表1所示。信号通信时的时序如图3所示。图4、图5为1个具有缓冲的IDE硬盘接口的电路设计。
　　164接收完MCU指令的最后1位时，将SHS一直保持为低电平以表示164正在执行该条指令。这个期间，双方一般不进行信息传递（但用户可通过MCU给164发送中断指令，取消正在执行的指令），直到164执行完该条指令后，才将SHS置为高，并开始向MCU发送执行结果。该过程与MCU向164发送指令过程相似，表1和图3已做了说明。
　　双方之间的通信总是以8位（1个字节）为1个数据进行的，而且规定从高位到低位进行传送。每次通信的数据总和称为1个数据包，1个数据包由4部分组成：同步字（FFH，即由8个1组成）、长度字、数据字（数据字个数＝长度字减1）、校验字（长度字与所有数据字的和）。低8位在1F4H寄存器中，高8位在1F5H寄存器中。如02H是训练指令，03H是识别指令等。
关键词：硬盘接口 ATA标准 IDE接口 LBA模式
1 ATA简介
　　硬盘接口IDE（Integrated Drive Electronies）也称AT总线接口，是当前新型硬盘驱动器普遍采用的一种接口。
4 总 结
　　根据本文提出的方法，我们已经成功开发出语音拨号电话的样机。开发中，对市场上现有电话操作不便的地方进行了改进，使之更加符合中国用户的使用习惯。同时，由于充分利用了RSC－164的语音识别功能，语音拨号功能稳定、可靠，在办公室、家庭等较安静的环境中，识别率可达95％以上。为了能够用LBA方式存取大于528MB的硬盘，IDE提供了二种方式供主机系统选择，这二种方式均在CMOS中设置。电话机厂商运用RSC－364芯片，自行编写电话MCU，将能够开发出更加实用的语音拨号电话。

图1 IDE接口时序(PIO模式)
　　对于1个PIO数据传输，CPU置地址信号DA0、DA1、DA2、CS1FX／、CS3FX／有效后（大约70ns），DIOW／或DIOR／有效，同时，CPU或控制器把传送数据放置到数据总线上，根据数据传送方向，控制器或CPU读取数据线上的数据