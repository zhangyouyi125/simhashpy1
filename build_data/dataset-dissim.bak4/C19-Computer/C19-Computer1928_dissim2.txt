微型机与应用
MICROCOMPUTER & ITS APPLICATIONS
2000　Vol.19　No.6　P.34-35




Novell NetWare 5．0网络组建中的一些问题
黄穗
摘要：在组建NetWare 5．0网络中，网络管理和工作站设置方面的新特点，分析存在的问题及其处理方法。
关键词：开放数据链路接口　Novell可加载模块　NetWare 5．0
　　Novell网络曾经以其在文件与打印服务方面的出色表现赢得过众多的网络用户，成为DOS工作站时代的主流网络操作系统。但随着工作站平台从DOS向Windows 95／98的转变以及Internet应用的迅速普及，不论是NetWare 3.XX还是4.XX在支持图形化操作以及开拓Internet应用方面都呈现出一些不足。

图1  传统的网络管理系统
　　传统的网络管理系统采用集中式的管理模式，网管应用在管理工作站上完成，因此对工作站的处理能力要求很高，而整个系统的扩展性较差。下面从实际应用的角度分析NetWare 5.0的一些新特点及其对组网的影响。
1  管理问题
　　在NetWare 4.XX以前，网络管理可以分别在DOS、Win3.X以及Win95／98环境下进行。在DOS下的工具是SYSCON（3.XX）和NETADMIN（4.XX）；在Win3.X下是NWADMN3X；在Win95／98下是NWADMIN。但NetWare 5.0本身不再提供DOS或Win3.X下的管理工具，而是新增加了基于服务器和基于浏览器的管理工具，更新了Win95／98／NT下的管理工具。

图2  移动Agent概念示意图
　　利用MA技术可以通过向1个或者多个节点分配任务而实现动态的、并行的计算。如果坚持要在DOS或Win3.X下进行管理工作，可以找1台正常运行的NetWare 4.XX服务器，将其中SYS：PUBLIC下与NETADMIN相关的文件或与NWADMN3X相关的文件复制到NetWare 5.0服务器SYS卷一个独立的目录中（不要覆盖5.0下SYS：PUBLIC目录中的文件）。不能运行时系统会提示缺少哪些文件，从NetWare 4.XX服务器上找到补上即可。MA的概念模型如图2所示，它可以在网络各主机间自由移动。可以在图形化的操作界面下进行创建NDS的Organization、Organization Unit、Group和User对象、管理这些对象的部分属性以及对服务器的卷、目录和文件进行管理的工作。但ConsoleOne还存在以下问题：(1)由于Java虚拟机的运行效率问题，它不仅占用内存多（要占用25MB），而且运行速度慢（CPU在200MHz以上才不明显）。(2)对组和用户的访问权限控制、目录与文件的共享等操作都不能完成。
李天剑（深圳中兴通讯公司上海二所　200233）
曾文方（四川大学计算机系）
李天翼（四川大学计算机系）
参考文献
1，Harrison C G．Mobile AgentAre they a good ideat．IBM research report RC19887，1995
2，Genesereth M R．Software Agent．Communications of ACM 37（7），1994
3，陶先平，吕建．流动Agent：一种未来的分布计算模式．计 算机科学，1999；26（2）
4，胡谷雨．现代通信网和计算机网管理．北京：电子工业出版 社，1996
收稿日期：1999－12－22
。由于系统安装后ConsoleOne是设成自动加载的，为解决上述问题，可用控制台命令nwconfig修改autoexec.ncf文件，将其中加载ConsoleOne的命令startx.ncf去掉，需要时再用控制台命令startx加载。
　　通过Windows 95／98／NT的Novell客户软件进行系统管理是NetWare 5.0最重要的管理方式，除了像文件共享这样的少数任务还要在MS－DOS下用flag进行管理以外，绝大多数管理任务都可以完成。但是，Novell的客户软件与Windows 95／98／NT的NetWare客户程序互不兼容，不能共存。网管应用由多个移动Agent分工协作完成，形成了一个可缩放的群体计算模式，整个网络管理系统也更加灵活、伸缩方便。因此，必须选择1台Windows 95／98／NT安装Novell提供的专用客户程序使其成为Novell工作站，再通过该工作站的管理请求程序（Requester）远程运行位于NetWare 5.0服务器上的管理工具。管理工具（Novell NetWare Administrator）是位于：SYS：PUBLIC＼WIN32＼的NWA－DMN32程序，相当于更新以前for Windows 95版本中的NWADMIN程序。
　　基于Web浏览器的管理方式是Novell最新开发的一种基于Internet网络的管理方案，但目前的版本功能还不及ConsoleOne，只能进行有限的创建、管理NDS对象的操作，对浏览器和服务器还有一些特殊的要求。
2  工作站问题
　　NetWare 5.0支持DOS、Windows 95／98／NT工作站。对于DOS工作站，仍然可以用IPX／NETX方式和16位ODI（加载VLM）方式上网。
　　一个MA就是一个独立的应用程序，它可以自主地在异构网络环境中按照一定的规程迁移，寻找合适的计算资源和信息资源，并对这些资源进行处理，以完成用户指定的任务。只有用16位带NDS模块的ODI方式上网或者32位ODI方式上网，才能避免出现上述问题，享受Novell的NDS访问权利与服务。32位ODI方式以NetWare I／O Subsystem（NIOS.EXE）为引导程序，通过加载网络连接、网卡驱动和网络协议的可安装模块（.NLM）实现连网和多重网络协议支持，其中NBIC32.NLM、LSLC32.NLM、CMSM.NLM、ETHERISM.NLM、TRANNTA.NLM和CLIENT32.NLM是必须加载的模块，IPX.NLM是支持IPX协议用的，TCPIP.NLM是支持TCP／IP协议的，而SPX＿SKTS.NLM是Winsock for SPX／IPX模块，这些协议模块可根据DOS工作站连网后的应用需要加以选用。以32位ODI方式启动的工作站，连网和协议都不占用基本内存，在扩展内存中也占用很少（只加载IPX协议时仅为3KB），充分体现出其连网的效率与灵活性。此外，32位连网方式突破了1个工作站最大连接数的限制（NETX的8，VLM的50），连接数仅受内存大小的限制，变静态连接为动态连接，为应用程序提供了更大的扩展空间。但是，要采用32位ODI方式上网，网络卡必须支持32位NDIS工作方式并具备相应的驱动程序（*.lan）。另外，目前的32位可加载模块不支持无盘启动，即使在工作站内存上开设1个虚拟盘将启动文件全部复制进去也不能启动，加载至Client32.NLM模块时即死机。在某个执行环境中被初建后，MA可以携带自身的代码及运行状态迁移到网络中的另一环境，并在该环境中恢复执行，它同该环境的交互包括与其它MA的交互以及与驻留在该运行环境中的其它服务Agent的交互。由于Windows 95／98／NT本身的NetWare网络客户、IPX／SPX兼容协议、文件及打印机共享程序与Novell工作站的要求不完全兼容，系统的拨号网络、DCOM95、MFC42.DLL以及部分内置音频／视频驱动程序也可能与Novell工作站程序不兼容，所以，如果冒然安装Novell客户软件，很可能会造成系统网络功能失效，严重时还会导致不能启动。为此，应采用最新版的客户软件，目前的Win95／98版本是3.1.0＋SP2，NT的版本是4.61，可以从Novell公司的网址下载。从客户软件的安装过程可以看到，安装时首先是将现有的不兼容协议删除，然后再安装Novell自己的工作站程序。因此，如果只有早期的客户软件，也可以手工先删除会造成冲突的NetWare协议和驱动程序。一旦安装后不能正常启动，可以用安全模式进入，将安装客户软件时加进去的网络协议（尤其是32位支持协议）去掉。必要时可将网卡去掉，以彻底清除造成冲突的协议或驱动程序。Novell客户软件除了带来对NetWare服务器访问和管理的功能外，也会对系统产生一些其它的影响，首先是启动登录，每次系统启动时都会要求与NetWare的服务器连接和登录。其实安装完客户软件后就有一个专用的登录程序NetWare Login，用它可以随时与网络上的NetWare服务器连接和登录。图4为NMbMA的简单示意图，其中，MS代表管理工作站，MD代表被管理设备，AR代表代理池。但这样修改后会产生一个副作用，即从网络邻居上只能看到NetWare服务器，不能看到其它Windows 95／98／NT的主机，而其它主机却能看到Novell工作站。其次是对应用程序的影响，这些影响集中体现在客户端的参数设置上，比如对加锁文件的处理、数据包间隔的设置、对各个网络时限的设置等等。这些参数和设置的默认值在客户程序安装完后就自动生效，需要根据应用和网络环境的实际情况进行优化和设置，否则就可能会出现应用程序运行性能的下降。具体设置路线是：进入控制面板→网络→Novell NetWare Client→属性→Advanced Settings，共有70多个设置项目。由于Java的跨平台特性，基于Java的MA可以在任何支持Java的MAS中运行，从而很好地解决了MA与异构网络环境（包括异种设备、操作系统等）的交互问题。值得注意的是各种程序的匹配性，工作站程序除了注重改进对本地操作系统的适应性以外，对服务器程序也提出了相应的要求，比如，利用Internet浏览器对服务器进行网络管理，不仅要求浏览器要安装相应版本的Java虚拟机，还要求服务器安装最新版的补丁程序。服务器升级的步骤是：
　(1)将补丁程序(自解压程序包)从工作站复制到SYS卷的目录下，如SYS：UPDATES，运行、解开程序包；
　(2)让所有工作站断开与服务器的连接，停止其它应用程序(Java虚拟机、Web服务器等)；
　(3)在控制台打入NWCONFIG(不能在ConsoleOne 中做)；
　(4)按Product Options－＞Install a Product Not Listed －＞F3键－＞输入SYS：UPDATES＼NW5SPXX开始安装(nw5spxx是补丁程序解开时自动生成的目录名)。
　　其间可以选择是否备份原来的系统文件。还有一部分补丁要手工进行复制，即解开程序包中MISC目录下的程序，如WAN、Trivoli、GroupWise、CD Tower，如果安装了相应的软件则要用新的文件覆盖SYS卷下原来的文件。简单来说具有二方面的功能：一方面是当MA到达MAS后，需要验证MA的身份以决定是否接纳；另一方面，该MA也要鉴别MAS的合法性，判断其是否为授权的运行环境