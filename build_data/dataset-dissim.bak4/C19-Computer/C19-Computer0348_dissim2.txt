计算机应用
COMPUTER APPLICATIONS
1999年 第19卷 第9期 Vol.19 No.9 1999



虚拟专用网(VPN)
――安全灵活的电子商务网络平台
宋伟　刘卫宁
　　摘　要　本文从电子商务网络平台的角度出发，介绍了VPN的基本概念及其产生原因，并从网络的不同层次上讨论了VPN的几种实现技术，最后给出了几个网络厂家的VPN解决方案。
　　关键词　电子商务，网络平台，虚拟专用网
　　电子商务作为信息社会的商务模式正以超过人们预料的速度向前发展，这预示着网络经济时代正在到来。在网络经济时代，企业面临的市场是没有国界的市场，企业间的竞争是国际范围内的竞争。那么，企业是以何种方式将自己的业务范围扩展到世界的每个角落呢？答案显而易见：通过无处没有的Internet。以Internet为传输媒介，将远程客户、远程分支机构和合作伙伴等连接起来构成一个灵活的商务网络平台，同时它又必须具备专用网的安全性，这样就产生了虚拟专用网VPN。
1　VPN的概念
　　VPN实际上是一个基于Internet的企业广域网，它也可以看成是Intranet的一种延伸。VPN使分布在不同地方的专用网络能在不可信任的公用网络上安全地通信，是因为综合采用了隧道、加密和认证等安全技术。
　　在电子商务活动中，VPN网络平台可以扮演以下几种角色：
　　远程访问VPN（Remote Access VPN) 这种功能使个人可通过Internet对企业的中心网络进行远程访问。
　　企业内部网VPN（Intranet VPN） 这种功能可通过Internet 将远程分支与中心Intranet 连接起来。
　　企业协作网VPN（Extranet VPN） 这种功能可通过Internet 将客户、供应商、合作伙伴或相关企业连接到中心Intranet 的非管制区。
　　VPN与传统专用网相比具有以下优点：
　　减少网络建设投资
　　VPN将专用网络建立在公用网络之上，用户只需要投入用户端网络设备及只支付本地通信费用（免去长途通信费用），这将极大地降低网络建设、通信和维护成本。
　　网络覆盖面宽
　　利用Internet的广域特性，可将企业的业务范围延伸到世界的每个角落。
　　理想的专用性
　　虽然VPN是建立在开放的Internet之上，但由于综合采用了隧道、加密和认证等安全技术，使VPN的专用性和安全性几乎可与传统的专用网媲美。
　　良好的灵活性
　　通过VPN技术可以方便地重构Intranet与Extranet中的网络结构关系，移动用户也可在任何地点访问Intranet和Extranet中的网络资源，这是传统专用网无法相比的。
　　上述优点使VPN成为一种安全灵活的电子商务网络平台。
2　VPN的实现
　　TCP/IP协议可分为链路层、网络层、传输层及应用层。根据TCP/IP的协议模型，VPN可以分别在链路层、网络层、传输层、应用层上实现。
2.1　采用路由过滤技术建立VPN
　　通常情况下，各种公用网将为所有连接其上的子网完成路由的传输和处理，因此，一种最简便的方法是通过在网络层上实施路由控制来实现VPN。具体地说，我们可以把通过公用网络连接起来的、属于某企业或机构的各子网抽象为一个网络集合，该集合中的所有路由器不对非本集合的子网传播路由信息；同时，任何非本集合的子网的路由信息也不能到达该网络集合，这种技术被称为路由过滤（Route Filtering）。不同行业的企业，企业管理的方法是不同的；相同行业的企业之间，企业管理方法也不同；即使同一个企业，不同的领导来管理，也是有差异的。
　　优点：
　　通过对传统的路由器进行配置构造VPN，实现简便，思路清晰。
2.2　会计信息功能模块
　　建立在企业MIS基础上的会计信息完成以下功能：
　　集成帐务　是财务分系统的核心，主要处理凭证录入、会计科目设定、初始建帐、外币收/付款凭证的录入、生产各类帐本、完成月末记帐和零星记帐以及凭证打印等等。
2.2　通过IP隧道技术建立VPN
　　IP隧道技术是目前在网络层构建VPN的主流技术。通过IP隧道技术给两台主机间传送的数据进行封装或加密，然后将这些封装过的数据从一台VPN网关向另一台VPN网关传送。VPN中的发送主机将需要路由的数据发送给发送端的VPN网关，由该网关对发送数据进行加密，并把这些数据封装在发往接收端网关的IP数据包内。接收端VPN网关先剥去相应的IP消息头，并将加密数据解密后发往接收端主机。过程如图1所示。
　　资金管理　主要处理银行余额调节、银行贷款记录、银行基础信息、银行对帐单、银行业务发生情况、现金发生情况、空白支票登记、原始单据传递、票据领用情况、信用卡使用信息等。
　　优点：
　　. 良好的专用性和安全性
　　VPN虽然借用了公网中的网络地址和路由，但由于采用了IP隧道技术和加密技术对VPN中的数据包进行再封装，公用网对VPN只相当于一个廉价的虚拟物理链路平台；通过该平台构建的虚拟专用网在专用性、安全性及私有性等方面与传统的封闭型专用网几乎可以媲美。
　　. VPN路由与公用网路由分离
　　在同一VPN中的IP地址段是独立的，用户便可以根据自己的需求规划IP地址空间，也可以通过同一公用网络平台建立多个相互间完全独立的VPN。
　　. 能模拟多种不同的专用网络协议
　　IP隧道技术可以对多种不同协议进行封装，因此，便于模拟实现专用网络中的许多协议及功能，使VPN的性能更接近于传统的专用网。
　　缺点：
　　. 难于管理
　　IP隧道需要手工建立，技术要求较强，因此，IP隧道一般由专业ISP提供。
　　. VPN规模受限制
　　IP隧道通常是点对点的，当VPN规模较大时，IP隧道的数量将会很快增长。
　　. 影响服务质量（QOS）和性能
　　IP隧道需要对网络中的数据包进行封装和加密，因此，如何有效地缩减这一过程的处理开销，是提高VPN服务质量和性能的关键。
2.3　虚拟拨号专用网VPDN
　　拨号网络是建立广域网络的一个重要方式，因此，利用拨号网络建立VPN已越来越引起VPN开发商的重视。
　　目前，拨号网络VPN主要通过在第二层即数据链路层采用隧道协议来实现。
　　2.3.1　拨号隧道的两种模式
　　. 主动式隧道（voluntary tunneling）
　　这种方式由客户端发起并初始化隧道，隧道服务器终止隧道，ISP可不支持隧道。主动式隧道构建灵活，便于用户在不同的网络服务平台间移动。会计数据是指采用“单、证、帐、表”等基本形式会计事项处理所需的未加工的数字，字母与符号的集合。被动式隧道的发起和初始化对客户端是全透明的，常用于Intranet中。
　　2.3.2　隧道协议
　　. PPTP协议：PPTP隧道协议是微软基于Windows NT 4.0 制定的主动式隧道协议，在该协议中，与PPTP服务器之间的点到点隧道由终端客户建立并配置，而不需要中间的NAS(访问服务器)参与。具体地说，客户机首先拨号到拨号服务器并建立一个标准的TCP/IP连接，在此基础上，客户机通过该连接访问远端的PPTP服务器，并根据客户机上的VPN配置建立与远端PPTP服务器之间的PPTP连接。
　　财务审核　主要完成销售回款审核、凭证审核、销售各项费用审核、发票登记审核、差旅费用审核、原辅材料购买用款审核及其他费用审核。整个过程实际上是在客户端建立了一个类似于串口的PPTP虚拟接口，如图2所示。

图2　建立在PPTP之上的VPDN
　　特点：
　　隧道的建立及配置由终端用户控制，特别适合于隧道终点更换频繁的情况(如，经常在不同的VPN间切换)。
　　隧道的建立不需要ISP参与，对ISP透明。
　　. L2TP协议：L2TP隧道协议是典型的被动式隧道协议，由PPTP和L2F（第二层转发协议）融合而成。
作者单位：电子科技大学计算机学院　四川.成都(610054)
参考文献
［1］　吴清萍.电算化基础与电算化软件.北京：电子工业出版社，1996
［2］　孟繁金.基础会计.中国财政经济出版社,1995
［3］　侯善魁,孟凡一.商业信息系统管理.中国商业出版社,1993
［4］　Cheng J. Improving the Software Reusability in Object--Oriented Programming. ACM SIGSOFT. Software Notes, 1993;18(4)
［5］　David L.Wellsetala. Architecture of an Open Object--Oriented Database System. Computer. 1992;25(10)
［6］　诸葛海.面向对象的MIS开发方法.软件学报，1995；（2）
收稿日期:1999-06-07
。
　　在该协议中，拨号服务器实际上是远端L2TP服务器的客户端，它们一起组成了为客户机提供网络服务的NAS平台。该过程如图3所示。

图3　建立在L2TP之上的VPDN
特点：
　　隧道的建立和配置由拨号服务器完成，对终端客户完全透明，用户似乎直接拨号到VPN的访问服务器。
　　发票管理　对公司发出和回收的普通发票、增值税发票进行管理。
　　ISP可通过L2TP进行增值服务。
　　往来帐务　该模块完成明细分类帐和总分类帐的查询，对超期未付清的单位和个人提出警告，并打印查询结果表格。传统的专用线路方式中，ATM、FR通过时分或频分将链路分给网络用户，在网络信息的发送端和接收端之间存在共享时钟周期；与此相反，建立在ATM和FR之上的VPN只在网络信息的发送端和接收端之间保留一条虚拟链路。在本方式中的代表协议是Cisco指定的L2F、L2TP等，两者均采用ATM和FR来建立隧道。
2.5　建立在传输层和应用层的VPN
　　可以通过数据加密、数据封装技术在传输层和应用层上实现基于各种应用的VPN。本文论述了会计信息系统的结构、组成、功能以及和企业管理系统的关系，给出了用面向对象分析和实现的方法和实现示例。
　　建立在传输层和应用层之上的VPN标准尚需要随着应用的发展而完善。
3　VPN产品
　　由于VPN是构建企业广域网的理想平台，各主要网络厂商已陆续推出了自己成套的VPN实用产品。Cisco公司提出了企业级VPN解决方案，它通过一系列的VPN安全功能来实现安全保障，包括隧道技术、加密技术、分组验证、防火墙、用户认证等。其中，通过PIX防火墙、NetRanger入侵检测系统和Netsonar安全扫描程序三者配合，极大地提高了企业VPN地安全性和可靠性。上述功能都集成在CiscoIOS中，目前，所有Cisco路由器均可实现VPN功能。
　　IBM率先提出安全的电子商务(e-Business)构架并推出电子商务软件系统，在电子商务的网络支撑平台上也作了大量的工作。目前，IBM的2210、2212及2216系列产品已能支持IPSec、IKE(Internet Key Exchange)、 L2F、L2TP、X.509 数字认证协议等多种VPN协议，为VPN的建立提供了良好的解决方案。
　　微软的桌面操作系统占了桌面机近90%的市场，因此，微软在客户端发起的VPDN上位于同行前列，PPTP协议便是由微软基于Windows NT 4.0制定。目前，微软已有相应的PPTP客户端和服务器端软件面市。
4　结束语
　　本文从电子商务网络平台的角度介绍了VPN的概念、实现技术及产品，虽然目前VPN技术在我国还用得不够广泛，但随着网络建设的不断深入和电子商务应用的推动，中国用户采用VPN技术的时间不会太遥远。
作者简介：宋伟　硕士，讲师。主要研究方向：电子商务、数据库技术、智能交通系统(ITS)。
刘卫宁　博士，副教授。
　　销售管理子系统、人事劳资子系统、企业管理子系统、总裁查询子系统作为整个企业MIS的子系统和财务分系统组成完整的一个会计信息系统。
作者单位：重庆大学计算机科学与工程学院　重庆（400044）
参考文献
［1］　Daviddd Kosiur，著.电子贸易.陈曙辉，译.北京：清华大学出版社
［2］　Peter Loshin，著.Extranet设计与实现.付　莜，乔一林，译.北京：电子工业出版社
收稿日期:1999-04-14
