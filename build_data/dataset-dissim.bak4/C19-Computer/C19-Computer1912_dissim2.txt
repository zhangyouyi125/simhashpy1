微型机与应用
WEIXINGJI YU YINGYONG
2000　Vol.19　No.5　P.47-49




类汉语组合查询器的查询操作模式构造
刘秉毅
摘 要：讨论类汉语组合查询器FIMSFIND的查询操作模式构造方面的有关问题。提出了以查询模式构造、查询模式驱动为基本思想的、面向中文信息处理的查询系统快速原型法生成工具箱，对脚本语言FimsScript的语法规则、语义描述、查询单元项的重用概念等关键问题进行了详细讨论。
关键词：查询优化 查询器 数据库技术 泛模式接口 查询语言
　　对以查询和检索为主要业务的信息系统（IS），其模型通常可以简化为1个4元组，即：
　　IS ：＝＜DBS，QL，AS，α＞
　　其中，数据库系统DBS为所有对象实例的集合；查询语言QL表示所有查询集合；答案系统AS表示所有查询结果的集合；查询计算函数α为偏序映射函数，即
　　α：DBS×QL→AS
　　对于关系型数据库信息系统，DBS主要由标征数据内涵的数据库模式和关系数据库外延二部分构成，为有限的信息集合；QL通常为由用户选择或指定的查询表达式，借助于DBMS查询系统完成查询检索操作（α偏序映射过程），产生查询集合AS；由于QL是以DBS所有数据库（表）的属性或数据库函数限定的属性构成的可组合查询项集、关系运算符集（＝、＜＞、＜、＞、＞＝、＜＝等）、逻辑关系符集（AND和OR）、有效查询值集（为无限集）等按照一定规则组合而成的有效表达的无限集合，AS为满足QL表达式条件的、包含DBS某一现有关系的一部分或若干现有关系的重构数据，即关系视图，显然，AS也应为无限集合。由于上述搜索引擎都是公用性质的搜索引擎，其Spider搜集的信息往往是包罗万象的，因而键入1个关键词，可能会搜索到方方面面的内容，针对性不够。
　　研制专用的查询机制或者集成工具来支持语义丰富的查询操作已成为所谓的第4代语言（4GL，如PowerBuilder、Informixs等）的显著特色，而有关中文DBMS的任意组合查询机制的设计原理、性能指标及程序实现等专题一直是从事中文信息系统（CIS）研制者讨论的重点、关心的热点和开发的难点。不难发现，几乎国内所有的实际运行或大范围推广的CIS都具有所谓的“任意组合条件查询”的功能，并且取得了一定的运行效果。
　　情报信息装入数据库后，由于用户一般是在网上通过浏览器来查询的，故在实际使用中还需要通过信息发布分系统对有关信息进行网上发布。
　　（2）组合界面的控制问题。对于由控件实现的组合条件工作窗口，缺乏表达式组合顺序的精确控制、组合字段选择的无误性约束机制、输入查询值的有效检查、查询字段与查询值匹配问题的适时判定等，从而影响着查询系统的正常运行。
　　（3）对于用户构造表达式的完整性、有效性由于无法在提交DBMS执行查询操作前进行检查，这就要求终端用户具有根据DBMS出错提示重新构造查询表达式的能力，这对于办公业务娴熟的非计算机专业用户而言，要求显然是过高了。
　　（4）表达式的构造能力问题。表达式不允许使用括号，查询能力不能满足用户的需求。FIMSKITS（OFfice Information System Kits）是笔者研制开发的具有功能集成化、操作非过程化、可嵌入任何开发环境或编程语言的智能化工具箱（智能积木箱）。其中，面向泛关系接口的、支持按照类汉语方式进行表达式组合的查询器由查询模式维护（FFINDKIT）和模式驱动（FIMSFIND）二套工具配合使用。本文主要讨论FIMSFIND终端用户接口的类汉语化界面、查询操作模式的FIMSKITS脚本语言FimsScript的描述、查询操作模式定义等方面的问题。
1 类汉语组合查询器的用户操作界面
　　FFINDKIT主要作用是把系统开发人员使用脚本描述语言FimsScript定义的文本类查询操作模式TQOS生成可由FIMSFIND直接运行的查询操作模式QOS，QOS逻辑上定义了一组基于Windows操作系统的可执行程序的集合，可由FIMSFIND驱动完成特定的任务。FFINDKIT功能如图1所示。

图1 FIMSFIND查询模式维护工具与FFINDKIT功能示意图
　　查询操作模式QOS逻辑上可以定义任意多个查询操作过程，实际使用中，1个设有数千项查询功能的CIS通常只需1个QOS模式（文件）即可。FIMSFIND较为突出的特点是为终端用户提供了类汉语化的任意组合条件查询的工作窗口（如图2所示）。
2．4 信息装库分系统（XXZK）
　　对筛选分类后的文件按分类信息装入全文检索数据库、“当日信息发布数据库”或“过期信息数据库”。
2 查询操作模式基本单元的FimsScript描述
　　QOS主要是由查询项、查询单元、数据查询源、输出视图等描述信息组合的包（PACKAGE）构成，1个QOS可以包含多个包。相关的TQOS脚本描述可简述如下：
　　（1）查询包。TQOS以查询包为逻辑单元，1个包可聚集任意多个查询单元，FIMSFIND以包实现封装，包体内可以定义全局对象、局部对象等。
2．1 信息提取分系统（XXWJ）
　　通过手工与自动相结合的方式，在因特网上大范围搜索信息资料，提取固定信息源，发现新的信息源，使信息资料来源更广泛和更具普遍性。其格式为： 
　　PACKAGE ＜查询包名＞ IS QUERY
　　　　　　＜查询包体＞
　　END PACKAGE
　　（2）数据查询源和输出视图的定义。为了实现数据库访问的物理无关性和逻辑无关性，FIMSKITS引入敛使用了泛关系模式的概念[2][3]，提供了泛关系模式管理工具箱，允许用户建立基于多个数据库模式的泛关系操作模式（UROS），借助于UROS，查询操作模式中引用的整个数据库的所有属性集合可以作为唯一关系模式上的单一关系对待，数据查询源和输出视图通常在UROS中定义，供TQOS引用。例如：
　　INPUT RELATION IS rminrel ／／指定查询单元的
　　　　　　　　　　　　　　／／缺省数据查询源
　　OUTPUT VIEW IS rmoutview ／／指定查询单元的缺
　　　　　　　　　　　　　／／省输出视图
　　（3）代码类字段和拼音码联想字段输入对象的定义。
　　该分系统的主要功能可用公式表达为： 
FGLFL＝｛FCCL，FLCL，GLCL｝
　　它们的含义分别是：
　　（1）分词处理（FCCL）：对格式转换后的文本文件进行分词处理；
　　（2）分类处理（FLCL）：按分词结果对文件进行分类处理；
　　（3）筛选处理（GLCL）：按分类结果对文件进行筛选处理。
　　STATIC CODEOBJECT IS rmcode ／／静态缺
　　　　　　　　　　　　　　　／／省代码对象
　　DYNAMIC FIELDOBJECT IS rmfield ／／面向
　　　　　　　　／／数据库字段的联想输入对象名
　　（4）静态查询项（SQI）的定义。比如说，要查找与中美关系有关的网页，在搜索引擎中输入“中美关系”4个字进行检索，得到的检索结果中有包含“中美关系”这4个字的网页，但是如果某个网页讲述的是美国总统访华而没有“中美关系”这4个字出现，这样的网页就往往检索不到。TQOS把多个SQI定义为1个静态查询项体（SQIB），即1个SQIB可以包含任意多个SQI，1个查询包内可以包含多个SQIB，把1个TQIB分解成多个TQIB语义上并无差别，只不过是为了编写脚本方便而已。
2．2 数据格式转换分系统（GSZH）
　　将搜集来的网页内容进行数据格式转换，由HTML格式转换为文本格式，以利于进一步分析、筛选和存储。
　　（5）动态查询项（DQI）的定义。动态查询项为包含1个（且必须包含）待输入量的有效查询表达式。除定义中必须指定待输入量的类型和长度外，DQI及动态查询项体（DQIB）的定义、概念等与SQI（SQIB）基本类似。
　　（6）可组合查询项（CQI）的定义。CQI以泛关系的属性定义可组合项目。
3 查询操作模式的构造
　　在QOS的同一包内所有SQI、DQI和CDI均为全局变量，可以作为查询操作单元的构件，FIMSFIND的查询单元是由查询项集或者多个查询项用逻辑关系符（AND和OR）关联而成的查询表达式、表达式构造规则、查询标题、查询数据源、输出视图、引用标识等信息项构成的逻辑集合。它拥有浩如烟海、纷繁复杂的各种信息，其中包含大量有价值的情报资源。下面给出1个简化的查询脚本，脚本中附有注释，本节不再赘述。因此，有效地提高了网上信息资源的利用和共享程度，提高了信息处理的效率。以FIMSFIND为主要部件的FIMSKITS工具箱，由TurboC开发的约150多个功能积木构成，以VC＋＋进行面向Windows操作系统的移植转化工作已基本完成，其中，FIMSFIND新增了面向多媒体的自学习检索和索引功能，取得了较为理想的运行效果。
5 国内外现状的分析比较
　　从1992年因特网的域名移到中国，国内因特网建设几乎是和国际上的因特网建设同步进行，只是信道技术和设备方面，与发达国家相比有较大差距