计算机工程
COMPUTER ENGINEERING
1999年 第25卷 第8期 Vol.25 No.8 1999



基于颜色的图象检索技术
凌玲
摘要：论述了基于色彩的图象检索方法，对颜色空间的选择、颜色的量化以及颜色的相似测试进行了讨论。 
1.3 建立 IP 组播基础上的 SAP 
　　SAP-Session Announcement Protocol 服务公告协议。对于很多客户， cache 必须承担同时维护许多 TCP 连接的重荷。以往对图象数据的管理是从图象中抽取属性信息，并在关系数据库中把它们当成格式化数据，对图象的检索仅局限于对图象属性的字符串匹配上，这种基于属性的方法要求用户能精确定义查询内容非常困难。考虑到基于内容的图象检索方法具有传统的文本检索技术无法比拟的优越性，因此，研究和开发基于内容查询的图象数据库是当今研究的热点。 
　　由于颜色是人识别图象的主要感知特征之一，因而基于颜色的查询是基于内容的图象检索中最基本的方法。迄今为止，基于内容检索的图象数据库的典型代表主要有： IBM 的 QBICTM ，哥伦比亚大学的 Visual SEEK 图象查询系统，密执根大学和 MIT 多媒体实验室开发的 Virage 系统等，其应用领域涉及多媒体数据库、电子图书馆、商标管理、医疗图象管理、公安系统、卫星图象管理等领域 [1] 。下面就基于颜色的图象检索中涉及的关键问题以及检索方法进行论述和比较。 
1 颜色模型的选择 
　　颜色是图象内容组成的基本要素，选择一个符合人眼视觉特性的颜色模型是利用颜色特征进行图象检索的关键。 
　　传统的 RGB 颜色模型的可分辨色差是非线性的，且没有直感 , 所以不是一个好的颜色描述系统。 HSV 颜色模型与人的视觉特性比较接近，它由色度 H 、饱和度 S 、亮度 V3 个分量组成。由于这种模型具有线性伸缩性，可感知的色差与颜色分量的相应样值上的欧几里德距离成比例 [2] ，因此 HSV 颜色模型比 RGB 颜色模型更直观、更容易接受。假设总共有 N 个会话需要公告，平均长度为 size ，累计用于 SAP 的带宽为 bw ， SAP 信息由 UDP 包携带发送，而 UDP 不保证可靠发送。一个会话无论何时都可被认为是完整的。 
　　可将 H、S、V3个分量按照人的颜色感知进行非等间隔的量化，即把色度 H 空间分成 8 份，饱和度 S 和亮度 V 空间分别分成 3 份，并根据色彩的不同范围进行量化，把量化后的 3 个颜色分量合成为一维特征矢量： 
l=HQs Qv +SQv +V　　(6) 
其中，Qs( 分量 S 的量化级数 )=3 ， Qv( 分量 V 的量化级数 )=3 。报文经过路由器时 TTL 域减 1 。 
　　上述问题也可采用模式识别中的聚类方法对颜色空间进行量化处理 [4] 。把颜色空间所有的颜色按要求量化为 N 种颜色，用统计法寻找 N 个最优的初始聚类中心，即寻找颜色空间中 N 个最有代表性的颜色值；然后用迭代的方法，把颜色空间中的所有颜色按最小距离准则向 N 个聚类中心聚类，即可得到与各聚类中心感知距离最邻近的 N 个聚类域 s i (1 ≤ i ≤ N)-- 颜色集合；最后使用每个颜色集合 s i 的质心 cen(s i ) 来形成新的 N 个聚类中心，即 N 个颜色集合的代表色。这里 
　　(8) 
式中， x 为 si 颜色集合所包含的一种颜色， count[x] 为 x 在图象库中出现的次数， Ni 为 si 颜色集合所包含的颜色在图象库中出现的总和。 
3 颜色的相似测度
　　用数值来有效表示两幅图象在颜色上的相似程度，这便是颜色的相似度量问题，它是直接影响检索效果的重要环节。在模式识别技术中，特征的相似度量均采用距离法。关于距离度量方法可采用绝对值距离、欧几里德距离、二次距离度量方法 [5]。
　　绝对值距离形式如下： 
　　 (9) 
　　欧几里德距离形式如下： 
　 (10) 
　　其中， Hq 为待检图象颜色直方图， Ht 为库中图象颜色直方图， hq [ci] 和 ht [ci] 分别表示待检图象和库中图象第 i 种颜色象素的频数。
　　由于欧氏距离在计算中没有考虑颜色间的相似性，这显然不符合人的视觉感觉。目前克服这一缺陷的方法是采用直方图二次距离法，即在欧氏距离计算中加进颜色相似矩阵，其形式如下 [3] ： 
D(Hq,Ht)=(Hq-Ht)T A(Hq-Ht)　　(11) 
式中， An×n为颜色相似矩阵
　　(12)
　　其元素 sij 表示颜色ci和 cj 之间的相似度，如 (5) 式计算所得。 
2 一个新型会话目录服务体系 
2.1 新型会话目录服务体系及 " 代理 " 机制的引入 
　　媒体分层传输模型简单直观，但是其中的一些问题必须在具体实现中加以解决： 
　　首先是地址分配问题。对于少量客户端而言，这种解决方法是有效的，但是不易扩展到很多客户端的环境。因此，对主色调进行扩展是弥补上述缺陷造成漏检的一种有效的方法。 
　　采用正态分布拟合法可以对指定颜色进行扩展。设用户指定颜色为 l0 、模糊度为 σ ，则经过正态分布拟合后的直方图特征 f (l) 如下： 
　　（13）
　　可以证明在这个范围内的颜色都可能与用户实际需要的颜色相关，因此可以按上式来确定用于检索的颜色扩展值。 
　　此外，一幅图象往往包含两种以上的主色调，而这些主色调在图象中所占的比例及其重要程度也各不相同，因而可用不同模糊度和比例的方法来组合一个更有效的颜色值供检索中匹配。 
　　实验结果表明 [2] ：该方法尤其对处在量化边界范围的颜色的检索效果有明显的改善。由于待查图象往往包含多种主色调，而主色调选择的随机性以及个人的主观因素又使得其模糊度 σ 较大，这样势必造成检索范围的扩大而大大地降低了检索效率。因此，如何准确、快速地选择图象的主色调仍是需要进一步研究的问题。
关键词：组播；目录服务；分层媒体
New Architecture for Multicast Session Directory Service
Shu Nanyan,Fang Le,Bai Xuefeng,Xu Gongquan
(Center of CAD/CAI Multimedia Making,Fu Dan University,Shanghai 200433)
【Abstract】The concept of layered media is helpful to the situation in thqat scalability of real-time application remains challenged by the inherent heterogeneity of the underlying Internet.We propose a new architecture for multicast session directory service client.
【Key words】Multicast;Directory service;Layered media
　　近来借助于新型协议和工具，在 Internet 上实时组播 [1] 逐步成熟。 
5 基于图象分割的直方图检索方法 
　　颜色直方图虽然能较好地反映图象中各种颜色的频率分布，但没有保留各象素颜色的空间分布信息，这显然与人的视觉感应不符，即误检率较高。为此，可采用基于图象分割的直方图检索方法[3]予以解决。在实现中，可设置代理对每个会话具有一个目标层数。实验结果表明：采用对象分割比整幅图象进行相似检索精度提高了 7% ～15% 。 
　　方法二是将一幅图象简单地划分为 n × n 个子图象 {P1， P2 ，…，Pn2 } ，然后分别计算每个子图象的直方图，这样，整幅图象的直方图就等于各子图象的直方图之和，即： 

根据直方图可得空间距离的度量式为： 

　　可见，基于图象分割后的直方图距离的计算精度要比对整幅图象的直方图距离计算的精度要高，从而有效地提高了检索精度。但由此要为计算相似性距离付出较高的代价，且越精确的距离公式其计算代价也越高。 
作者单位：复旦大学CAD/CAI多媒体制作中心，上海 200433
参考文献 
1 Tanenbaum A.Computer Networks(Third Edition).U.S. ： Prentice Hall PTR, 1996 
2 Deering S. Internet Multicast Routing-State of the Art and Open Research Issues. Stockholm.: Multimedia integrated Conferencing for Europe (MICE) Seminar at the Swedish Institute of Computer Science, 1993-10 
。 
6 结束语 
　　基于内容查询的图象数据库把图象处理、图象识别、数据库 3 个领域的技术成果结合起来，是一个很有前景的发展方向。图象数据库是图象处理技术和传统数据库技术的应用，又为图象处理技术提供了有力的支持。目前利用颜色特征进行图象检索还处于研究阶段，其中还有许多关键的技术问题尚未得到很好的解决，例如，如何有效地提取颜色特征，如何简化颜色直方图相似距离的计算等。如果能很好地解决这些问题，必将使图象检索技术产生一个飞跃。 
作者单位：广东工业大学工程与计算机图学教研室，广州 510643
参考文献
1 Finn R. Query by Image Content. IBM Research,1996, 3:22 ～ 25 
2 曹莉华，柳伟，李国辉 . 基于多种主色调的图象检索算法研究与 实现 . 计算机研究与发展， 1999,36(1):96 ～ 100 
3 李向阳，鲁东明，潘云鹤 . 基于颜色的图象数据库检索方法的研 究 . 计算机研究与发展， 1999 ， 36(3) ： 359 ～ 363 
4 凌玲，凌卫新 . 彩色图象量化的一种新聚类算法 . 广东机械学院学 报， 1996 ， 14(2):58 ～ 62 
