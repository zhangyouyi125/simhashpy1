航空动力学报
JOURNAL OF AEROSPACE POWER
1999年　第14卷　第2期　Vol.14　No.2　1999



可扩展的燃气轮机仿真对象模型*
谢志武**　苏明　翁史烈
　　【摘要】　应用面向对象的分析与设计方法进行可扩展的燃气轮机仿真建模研究。(2)叶片扩压器进口边界条件对数值计算结果有较大的影响，不恰当的实验测量外推值可能导致不合理的计算结果。
　　主题词：　燃气轮机　仿真　建立模型
　　分类号：　TK47　TP31
1　前言
　　在简单循环燃气轮机的基础上，通过增删部件和改变工质流程可以得到各种以燃气轮机为核心的复杂动力装置。在这类装置的仿真建模中应用面向对象方法可以方便地重用已有的源代码，因而不仅加速了建模过程［1-6］，而且为构造通用的燃气轮机仿真软件奠定了基础［6-8］。
　　面向对象方法的各种优越性最终都必须通过软件扩展来实现。对于燃气轮机仿真模型而言，需要扩展的不仅有部件和工质流程，而且还应该包括仿真算法。本文运用统一建模语言［9］（Unified Modeling Language，简称UML）及其建议软件开发过程对燃气轮机仿真问题进行了面向对象的分析、设计和实现，所获得的燃气轮机仿真模型在部件、工质流程以及仿真算法各方面都具有高度的可扩展能力。
2　可扩展的燃气轮机仿真类属层次结构
　　软件的可扩展能力首先表现在其类属层次结构上，只有高度概括的父类才有可能使不同特化层次的子类在其上扩展。
　　为概括各种燃气轮机仿真的共性，将燃气轮机仿真中的各种计算任务概括为既相互联系又有明确分工的三个层次：部件计算、流路计算和系统状态计算。其中，部件计算以单个部件的特性为依据，根据该部件的已知参数求解其他未知参数，如根据压气机的转速、压比求解流量和效率等。部件计算仅局限于单个部件内部而不涉及部件间的相互影响，何时进行哪个部件的计算由流路计算来控制。最佳工况点流量Qin=82.0 ，实验转速控制在12000 r/min。流路计算方法包括顺算法、逆算法［10］、容积效应法［11］等。流路计算结束时，系统中的所有部件均已求解且相互间满足一定条件，如顺算法要求通流部分满足压力和流量平衡，而容积效应法则仅需压力平衡即可。系统状态计算从流路计算的结果中获得系统的动态信息，然后用欧拉法、龙格-库塔法或辛算法等数值积分方法求解系统的下一个状态。
　　三层次概括对稳态仿真和动态仿真同样适用。以牛顿―莱普生法为例，稳态仿真时有如下迭代公式：

其中，是系统的状态变量，k是残量。流路计算结束后先求残量k和J矩阵，然后对J求逆，就可由第k轮迭代的系统状态k解出残量更小的第（k+1）轮系统状态k+1。上述计算虽然不包含时间因素，但与动态仿真中对右函数作数值积分一样，都是从流路计算的结果出发求解系统下一轮的状态，因而也属于系统状态计算。
　　燃气轮机仿真的三个层次是相互联系、相互依赖的。流路计算既控制部件计算的进行，其结果又是系统状态计算的依据，系统状态计算更为下一轮部件计算准备数据。因此，实际仿真计算时这三个层次的计算任务是交替进行的。


图1　可扩展的燃气轮机仿真类属层次结构示意图
　　根据燃气轮机仿真的三层次概括可以构造一个仿真类属框架。首先为上述三个层次的仿真计算任务构造相应的抽象类，然后以他们为父类扩展出各种不同抽象层次的子类。例如，可以从部件类Component派生压气机类Compressor，从流路计算类GasPathCalc派生容积效应法类VolumeEffCalc或从系统状态计算类SysStateCalc派生欧拉法类Euler等等。图1是这个类属层次结构的UML表述，其中，目字形方框代表类，虚线箭头代表依赖关系，实线三角箭头代表继承关系。图1所示的类属层次框架为部件以及流路计算和系统状态计算方法的扩展奠定了基础。下面详细介绍其中部件类的细节。 
3　节点―连接器―部件模型
　　为了表达工质流程的变化，本文之前的各种燃气轮机对象模型都构造了工质流类。但是，工质流类的存在极大地限制了流路计算方法的扩展。图2给出了采用常规顺算法、逆算法［10］及容积效应法［11］时高、低压压气机间的各种数据的传递方向。同时由于扩压器出口效应，使得靠近叶片扩压器出口截面附近，压力面侧速度较吸力面侧要大。
　　(2)由于描述叶片扩压器内流动问题的控制方程中非线性项的存在，使得对于形成的非线性代数方程组的求解应该采用适应性较好的迭代法。


图2　采用不同算法时高、低压压气机间的数据传递示意图
　　首先对仿真中出现的各种物理量进行分类整理，将相互间存在一一对应关系的各种变量合成一类。例如，由于工质流的温度t、焓i、等压比热cp、相对压力的自然对数lnPai0以及相对压力的自然对数对温度的导数dlnPai0间存在一一对应关系，因此用一个流体温度类TFluidNode来概括所有这些变量。若在仿真中需要传递某种工质的焓值，则只需传递相应的TFluidNode对象，它会自动进行相应的数值转换。当流动对流占优时，传统的Galerkin加罚有限元方法会产生诸如中心差分法所造成的网格畸变，引起解的振荡［2］。


图2　R/R3=1.172截面上速度分布
　　为了跟实验测量结果进行比较，本文以进口处实验测量的外推值作为叶片扩压器进口边界条件对扩压器内流动进行了数值计算。节点类及其子类的关系见图3，其中Node类的各子类自左至右分别代表转速对时间的导数、功率、流量、油气比、流体温度、压力、压力对时间的导数以及转速，流体温度类TFluidNode还派生出空气温度和纯燃气对空气温度的修正项两个子类。必要时，还可以在此基础上继续扩展出其他物理量。

　　　
图3　节点类与连接器类示意图　　　　图4　压气机类包含的各种对象
　　接着建立各部件类与节点类之间的关系。如图4所示，以压气机类为例，它包含空气温度节点和压力节点对象各两个（分别代表进、出口空气的温度和压力，注意温度对象同时还隐含了焓、等压比热等信息）以及流量、转速和功率节点对象各一个。UML规定用实心菱形箭头表示值包含关系，箭头上的文字标注和数字分别表示包含关系的名称和双方的数量。
　　各部件所包含的节点间要进行数据传递，因此需要一个连接器类（Connector）来完成这一功能。连接器类和节点类的关系见图3，其中的空心菱形箭头代表引用型包含关系。
　　在节点―连接器―部件模型中，根据实际情况的不同，一个真实部件可能需要由几个软件部件对象拼接起来，其间的数据联系也可能与实际的物理联系有所不同。图5是用容积效应法仿真时高、低压压气机模型的图形界面实例，其中与部件相连的圆代表从属于该部件的各种节点，而粗线箭头代表连接器。由于低压压气机存在泄漏，因此增加了专门用于处理流量损耗的支管（Manifold）部件。注意到这里压气机与支管之间可以只交换流量信息而无须同时交换温度、压力信息，而且容积效应部件与各压气机之间的温度、压力、流量信息也可以分取不同的传递方向，因此就比用工质流类对象来传递数据的对象模型要灵活得多。在节点―连接器―部件模型中，各种不同的工质流程和流路计算方法都可以借助连接器的不同设置而轻易实现。
3　流动计算中的几个问题
　　(1)方程求解时，在进口及壁面处给定强制边界条件，出口边界条件按照自然边界条件给出，壁面满足无滑移条件，在近壁区采用壁面函数法处理。
4　结果及分析
　　计算及实验用叶片扩压器主要技术参数为：进、出口半径R3=0.175 m，R4=0.234 m，叶片高度b3=b4=0.0266 m，进、出口安装角α3A=15°，α4A=30°，叶片数Z3=16，叶片为单圆弧等厚型。对一段传统的过程式仿真程序进行面向对象化改写，虽然会使程序结构和指令调用过程变得相对复杂，但它仍然遵循原有数学模型和算法所设定的计算任务和计算次序，因而计算结果必然与原程序完全相同。
　　另一方面，由于不同仿真问题可能提出不同的精度和速度要求，因而一个通用的燃气轮机仿真软件不仅需要具备为各种部件建立不同精度数学模型的能力，还必须能够对数值计算方法做相应调整。本文的仿真模型通过提供部件模型以及流路计算和系统状态计算方法上的可扩展能力保证了各种精度和速度要求的仿真任务都能在同一仿真软件环境内得以实现。
4　算例
　　使用上述对象模型进行了某三轴燃气轮机动态性能仿真。仿真采用燃气轮机非线性数学模型［12］，各部件特性均已知，并且考虑了进排气压损、压气机抽气及涡轮冷却等因素。流路计算方法采用速度快、收敛性和稳定性均较好的容积效应法［11］，系统状态计算采用常用的欧拉法。采用UML进行面向对象的分析和设计，然后用C++语言编程实现。

　　　　　
图6　油量阶跃增时的转速响应　　　　图7　油量阶跃减时的转速响应
　　表1是从前述类属框架中扩展得到的各个类及其实例化后得到的对象。用这些对象可以拼接出系统的仿真模型。图6和图7给出了机组各转子转速对油量阶跃微扰的动态响应计算结果，与常规过程式仿真的结果完全一致。仿真的时间步长设为5 ms，在Pentium Ⅱ 233 MHz微机上，每步计算耗时3.5 ms，可以满足实时仿真的速度要求。
表1　某三轴燃气轮机动态特性仿真的对象配置说明

对 象 名所 属 类 名简　　要　　说　　明
lpc
hpc
hpt
lpt
pt
com
d1,d2,d3,d4
m1,m2,m3,m4
l1
v1,v2,v3,v4
rh,rl,rp
c1～c56SpeyLPC
SpeyHPC
SpeyHPT
SpeyLPT
SpeyPT
Combustor
DuctDelta
ManifoldGLC
Load
VolumeInertia
RotorInertia
ConnectorCompressor的子类，采用某机组低压压气机特性
Compressor的子类，采用某机组高压压气机特性
Turbine的子类，采用某机组高压涡轮特性
Turbine的子类，采用某机组低压涡轮特性
Turbine的子类，采用某机组动力涡轮特性

Duct的子类，Component的孙类，压损为常数
Manifold的子类，Component的孙类，流量损失为常数
负荷，Component的子类
容积惯性，Component的子类
转子惯性，Component的子类


5　结论
　　本文以可扩展能力为中心，综合运用面向对象的分析和设计方法，以燃气轮机仿真三层次概括为依据，构造了一个可扩展的仿真类属框架。
　　(4)在计算过程中为保证求解的准确性，本文提供了两种收敛准则，它们分别为：
‖Φn-Φn-1‖／‖Φn‖≤ε1　，　‖Rn‖／‖R0‖≤ε2
(9)
Φ是求解向量，R是残余向量，ε1和ε2为设定的收敛准则数。本文的工作为快速有效地进行热力系统建模仿真开辟了新方向。
　　在连续方程中引入罚参数d，近似地满足不可压缩条件，把压力项从动量方程中消去。
