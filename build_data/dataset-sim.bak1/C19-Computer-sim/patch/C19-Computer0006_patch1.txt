计算机应用
COMPUTER APPLICATIONS
1999年 第19卷 第6期 Vol.19 No.6 1999



一种软件结构复杂度度量模型及其自动实现
王小明
　　摘　要　本文对软件结构中扇入/扇出对软件复杂度的影响进行分析,研究探讨了一种基于扇入/扇出的软件结构复杂度度量模型，给出了自动实现算法。然后查找每一地名落在何片区图中，片区图的编码用二维矩阵表示。
　　关键词　扇入，扇出，软件复杂度，模型
A MODEL OF MEASURING SOFTWARE STRUCTURE
COMPLEXITY AND ITS AUTO-REALIZATION
Wang Xiaoming
Computer Center,Gansu College of Economic Management， Gansu.Lanzhou，730070
　　Abstract　This paper analyzes the influence of fan-in and fan-out to software complexity in a software structure, and makes a study of some software structure complexity model, based on fan-in and fan-out，gives an automatic algorithm. the models have higher application value.
　　Keywords　Fan-in，Fan-out，Software complexity，Model
1　软件结构复杂度度量
　　在设计计算机大型软件的时候，无论是采用结构化方法还是面向对象技术，为了降低研究与设计的复杂度，总是采取“分而治之”的策略，即将要研究的大系统划分为多个规模适中的子系统，再通过对各子系统的研究设计、子系统集成，从而构成一个大型的软件系统。 
3 基于进化规划和启发式算法结合求解 Steiner Tree 问题 
　　文献 [3] 采用了遗传算法，通过对网络的扩展树进行编码，在扩展树的范围内对优化的 Steiner Tree 树进行搜索，但该方法是一种纯粹的随机方法，算法的效率很低。 
　　根据各速记符的起笔不同，顺序查找相应的文件，若有前 3 个域完全匹配的记录，则返回该记录的区位码域 (code) ，否则，显示出错信息。从软件设计的角度来看，这种控制流与数据流即是模块间的扇入与扇出。软件结构复杂度是指模块结构的复杂度和整个软件系统结构的复杂度。结构复杂度度量主要是对软件中的控制流和数据流以及模块间的接口复杂程度等进行度量。这些活动通常都要邀请许多上级领导、外单位同仁等相关人员参加，同时还要举办一系列的分会议、报告会等等。一个模块的扇入指进入该模块的控制流与数据流之和，一个模块的扇出指该模块输出的控制流与数据流之和。软件结构的复杂度可表示为对应模块或子系统的扇入与扇出乘积的平方。
　　由于VR是在人类为改善与计算机的交互方式，提高计算机的可操作性所进行的努力中产生的，因而其本质上是为了提供一种高度融洽的人机关系。结构复杂度度量力求反映模块内部结构的复杂度以及模块间接口的复杂度，进而反映整个软件系统的结构复杂度。但是这种方法将扇入/扇出，模块间循环调用与顺序调用，分枝调用，逐层调用与隔层调用，不同深度的调用，等等，对模块(系统)的复杂度影响同等对待，按照系统科学和软件工程理论，这并不完全合理。本文在研究结构化系统设计与程序设计的基础上，将扇入/扇出对模块的复杂度影响分别讨论，给出了基于扇入/扇出的模块和系统结构复杂度定量度量的数学模型。使用这些模型可以在软件系统模块结构设计完成之后，对系统结构与模块的复杂程度作出定量度量，以便在祥细设计开始之前对复杂度过高的模块重新划分；对复杂度不合理的系统结构进行重新构建；对不同的系统结构方案进行复杂度比较，从中选择最优方案。
2　软件结构复杂度建模
2.1　软件工程若干准则
　　文献［2］［4］［5］［6］［7］中有关系统结构和模块复杂度理论可归纳如下：
　　准则1：结构化程序(系统)总是可以层次化的。
　　准则2：任一程序中，分枝结构比序列结构复杂；循环结构比分枝结构复杂。
　　准则3：任一程序中，隔层调用比逐层调用复杂；模块间自底向上调用(构成循环结构)比自顶向下调用复杂。
　　准则4：系统模块越多系统越复杂；中间层模块越多系统越复杂；模块层数越多系统越复杂。
　　准则5： 嵌套深度越大，程序越复杂；越靠近入口或出口的模块，复杂度越低。但是，软件系统集成的要求更高。
　　扇出：指一个模块直接控制(调用)的模块数目。扇入：指直接调用该模块的模块数目。
　　模块总数(m)：系统中模块总个数。
表1　HY.DBF结构　　　　　表2　RY.DBF结构

字段名字段类型字段长度字段名字段类型字段长度
会议编号数值型4人员编号数值型4
会议日期日期型8姓名字符型10
开始时间字符型5性别字符型2
结束时间字符型5出生年月日期型8
地点字符型20职务字符型20
内容字符型40住宿要求字符型20
联系人字符型10到达日期日期型8
备注字符型40离开日期日期型8
…………

2.3　日程安排信息库RC.DBF
表3　RC.DBF结构

字段名字段类型字段长度
人员编号数值型4
会议编号数值型4
参加时间字符型6
结束时间字符型6
备注字符型40
………………

　　每个领导或来宾通常都有多项活动安排，因此，他们的日程安排信息不可能都存放在RY.DBF中，只能采用一对多关系的数据库格式来记录，日程安排的子数据库定义为RC.DBF，结构如表3。

图 1 简单网络模型 

图 2 使用 MST 算法求解Steiner Tree 问题的解

图 3 最优的 Steiner Tree 问题的解
　　Steiner Tree 问题的实质是寻找网络中的 Steiner 点，由于 Steiner 点的存在，使通过 Steiner 点连接目的节点的代价减小。在进行形态学识别时，由于只关心它们的形状特征，其色度信息让位为次要地位，因此首先将彩色图象转化为二值化图象，使目标与背景区分开来。一个模块的扇入影响其本身的结构复杂度，并使其本身的结构复杂度按e(e=2.71828)的指数增长。 
2.3 形态学识别算法 
　　所采集的彩色细胞图象经过预处理之后，根据如下算法进行特征提取和识别分类。对于某一模块，只要有一个扇入或扇出复杂度较高，那么该模块仍然复杂度较高。另外，由于后台数据库和表的升迁属性都保存在本地表中，便于系统完成后进行软件文档的统一编制和输出。所以，可根据系统乘法原理［7］定义软件系统的结构复杂度。
　　定义2:　由m个子模块构成的软件系统P,各模块的结构复杂度为Fj,则软件系统的结构复杂度为:
Z=Fj　　　　　　　　　　　　　　　　　(6)　
　　实践表明，当Kj≤-1时，该模块可能规模偏小，需同其它模块合并;当Kj≥1时，该模块可能规模偏大，需要进行再分解或调整控制流，使各结点复杂度达到基本的均衡，从而使整个系统结构复杂度达到较低水平。下面分别介绍各部分的设计和实现过程。
　　定义4： 系统中模块集合S=(p1,p2,p3,…,pm),扇入矩阵Am×m定义为:
　　
　　事实上，扇入矩阵和扇出矩阵互为转置矩阵，即扇出矩阵Bm×m=Am×mT令矩阵Nm×m为：
　　
　　令矩阵Wm×m为：
　　
　　其中，e=2.71828
　　定义5： 系统中模块的对称层权值(y1,y2,y3,…,ym)构成的对角矩阵Hm×m定义为:
　　hij=yi；当j≠i时，hij=0
　　令对角矩阵Wm×m为：
　　dii=m×nij
　　当j≠i时，dij=0
　　则，模块的扇入复杂度对角矩阵
　　Rm×m为：R=D×H同理，令对角矩阵Gm×m为：
　　gii=m×wij；当j≠i时，gij=0
　　模块的扇出复杂度对角矩阵Cm×m为：C=G×H
　　系统模块的总复杂度对角矩阵Fm×m为：
　　
当j≠i时，fij=0
　　系统模块的平均复杂度：
　　系统模块的平均复杂度偏差对角矩阵Km×m为：;当j≠i时，kij=0
　　软件系统的结构复杂度：Z=Fii
4　结束语
　　(1)基于扇入/扇出的软件结构复杂度定量度量方法使用简单方便，在繁杂的程序设计开始之前就能对系统各模块以及整个系统的结构复杂度进行有效的度量分析，从而对不同的系统设计方案进行比较，评价，选优;对不合理的模块和控制流进行重新划分和调整，使系统复杂度达到整体上的优化。
　　(2)基于上述数学模型的自动实现使用了矩阵方法，只要给出系统模块的扇入矩阵或扇出矩阵,模块深度层编号，对称层权值，使用任一种计算机语言即可实现软件系统和模块的结构复杂度自动计算。这些对象组件成分可以是由一些不同的开发者相互独立地使用不同的语言或工具构造的。
注：本项目受正林集团技术创新基金资助(No.980530)。
1　虚拟现实的软硬件状况分析
　　虚拟现实系统中的计算机主要要完成三项任务：虚拟境界的生成与管理，数据输入，数据输出。但此种模式运用的设备较多，费用相当可观。 
3.1 速记符特征记录的生成与匹配 
　　基本的速记符有近 400 个 , 为了匹配的方便和提高匹配的效率 , 我们根据速记符的起始笔画的不同 , 把基本的速记符分为： (1) 以线起笔的 ;(2) 以椭圆弧起笔的 ;(3) 以圆弧起笔的