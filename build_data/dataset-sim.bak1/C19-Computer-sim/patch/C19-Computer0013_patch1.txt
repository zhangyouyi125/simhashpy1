计算机应用
COMPUTER APPLICATIONS
1999年 第19卷 第6期 Vol.19 No.6 1999



Domino环境中的数据加密技术
李俊海　耿继秀　钱丽瑾　刘彦丽　张德壮
　　摘　要　在企业网络实践的基础上，讨论了数据加密技术在企业网络中的应用。为了防止对非授权的数据库和文档的存取，可以对数据库进行选择算法的加密和使用私钥/公钥加密机制，对数据库文档的字段加密。
　　关键词　数据库文档，数据加密，密钥，存取授权
1　引言
　　加密技术可以使我们在不安全的通道上建立安全的连接。在Domino环境中，为了防止对非授权的数据库、文档或者邮件的存取，除对数据库进行不同级别的授权外（七种级别），我们能够对数据库、对某个库中的一个文档、多个文档或者全部文档进行加密。通过加密的办法，使得系统中的各种数据的安全在三个面上得到保障。加密的办法有多种多样的，但是总离不开加密用的密钥。Domino提供了对称和非对称的两种加密机制。

图1　基于Internet的CSCW
2.2　Internet上协同环境的局限性
　　由于Internet本身的特点，使得它对CSCW应用的支持带有一定的局限性。我们着重讨论对数据库中的一般文档、对使用指定表单产生的所有文档、文档中的全部字段或部分字段使用指定密钥进行加密、对数据库进行选择算法的加密以及指定用户解密的方法和技术。
2　数据库文档加密
　　在Domino环境中，数据库是文档的集合。
　　（8） 尺寸TCU与上位机自动同步。本模型针对这些特点，采用面向对象工作流管理技术来构造这种新型企业的信息支撑环境。如果密钥是特选的，就需要将该密钥发送给所指定的用户。拥有一个文档密钥的任何用户都可以读该文档加密域。没有密钥的用户则只可以读在该文档中没有被加密的域。对一个文档进行加密保护，它的表单必须具备一个或多个系统开发者定义的可加密的域。实际上，为了醒目起见，在填写一个文档时就可以看到加密域用红色的标记来识记。我们在对域加密时，可以使用系统为用户生成的公钥或者创建一个新的密钥。在一个文档中，对可加密的域都可使用所选定的密钥进行加密；用户不允许为某个文档的可加密域选择不同的密钥。除了对数据库中的某个文档进行加密外，我们还可以对数据库中使用特定的表单创建的全部文档加密。重庆信息港同样建设两个大网，即邮电公用传输网ChinaNet 、金桥GBNet、广电网和联通网为主的物理通信平台和以此为基础的，由交换中心和光纤主干网组成的重庆交互信息网。用户可通过将密钥加入到表单中或者把相关密钥的关键字加入到该表单来达到目的。数据库的“设计者”有权决定该表单将使用何种类型和哪些密钥。如果将密钥加入到某个表单中，那么通过该表单构造的所有文档都用这个密钥加密。这里我们给出一个对数据库中全部文档使用给定密钥进行加密的例子。加密是通过LotosScript（一种类似VisualBasic面向对象的语言,功能上更强于该语言）来实现的。 以下的程序用密钥“绝密” 和“Top Secret”加密文档中的每一域。盟主成员利用主系统将生产计划、订单跟踪、文件传阅等定义成各种工作流程，这些工作流启动后主系统将自动控制协调各从属系统的运作，同时盟主成员可随时对各流程进行管理监控修改。到此为止，所有 IsEncrypted 属性为真（True）的域被加密。而那些IsEncrypted属性为假（False）的项对任何用户都是可见的，即使该用户没有正确的密钥。这样被加密系统只能在安装有对应网卡的机器上运行，从而保护开发商的合法权益。任何具有这些密钥中的一个的用户都可对该文档解密。
　　IRT的大小主要取决于OS的中断管理机制。
　　下面我们还给出一个对选定文档的字段进行加密的例子。加密也是用LotusScript语言来完成的。该程序在文档中加密每一域。因为没有显示地给出密钥，说明使用的是公钥，所以解密时就要用到用户自己的私钥。
　Dim doc As NotesDocument　　　　　　　　　　　　　　　　　　　′定义doc为文档对象
　Forall i In doc.Items
′对该文档中的所有域对象进行初始化设置
　i.IsEncrypted = True
′即加密属性设置为真
　End Forall
　Call doc.Encrypt　　　　　　　　　　　　　　　　　　　　　　　　　　′进行加密处理
　Call doc.Save( True, True )
′把经过加密处理的文档保存并结束加密。
　　这个加密示例与前一个的不同就是在用户没有给定特定的密钥。下面我们再给出另外一个对字段加密的例子。在该例子中，专门对指定的两个字段：Subject字段和Body字段使用“绝密”密钥进行加密。
　Dim doc As NotesDocument
Dim itemA As NotesItem
′分别定义两个域对象变量itemA和ItemB
Dim itemB As NotesItem
Set itemA = doc.GetFirstItem( "Subject" )
′对定义的两个变量赋字段值
Set itemB = doc.GetFirstItem( "Body" )
itemA.IsEncrypted = True 
′itemA和ItemB加密属性分别设置为真
itemB.IsEncrypted = True
doc.EncryptionKeys ="绝密"
Call doc.Encrypt　　　　　　　　　　　　　　　　　　　　　　　　　　　′进行加密处理
Call doc.Save( True, True )
′把经过加密处理的文档保存起来并结束加密。
　　如果某个用户希望对数据库中选定的文档进行加密，就需要具备“作者”或者更高存取权限。如果某个用户具有“编辑者”，就可以加密别人创建的文档。用户可以用私密来加密，也可以用公用通讯录中各个用户都有的公钥加密。具体操作步骤为：第一、选取要加密的文档。第二、选择“文件”、“文档属性”。第三、可以指定有权打开阅读该文档的全部人员名单，如图1所示。第四、单击带钥匙标记的卡即可。第六、此时，指定可以阅读加密文档的全部“读者”或者具备更高权限的人；也可选一个或多个私钥：从“个人密钥”列表中选取。
　　（4）电子报、电子刊物与电子书店
　　这类服务将改变传统印刷的报纸和刊物的阅读与发行模式，也便于对历史报刊的查询；同时也正在影响着书籍的销售模式。第七、如果选用公钥，就选择想使用其公钥的人员名单即可，如图2所示。它是Static Text型控键，位于对话框的左方，其ID值为IDC―STATUS。

图1

图2
3　阅读加密文档
　　如果在用户的标识符里，即公用通讯录中用户的“个人”文档里有正确的密钥，他们就可以阅读加密信息。如此反复，客户端就能动态的获取数据库中的信息。例如，李四使用密钥对某个文档中的数据进行加密后。如果张三要阅读这个已经加密的文档就必须具备该密钥。对外互联基础设施是信息港的重要组成部分之一，是信息港建设者利用多种远程通信手段的具体实现。如果张三要阅读这个已经加密的文档只需要使用自己的私钥即可解密，也就有权编辑加密文档。如果张三的用户标识符里没有含有相匹配的密钥，加密域就被显示为空白。当有多个密钥和一个表单或文档关联的时候，用户只需要指定密钥之一就能读加密信息。在把一个文档或一个表单和多个密钥关联时，用户需要所有指定的密钥以使用原有的密钥编辑和保存加密信息。应该注意：一个数据库的存取权限有七种。发生一次最简单的任务事件的消息流如下：
　　① 协作者A提出事务请求；
　　② 虚拟空间接受A的请求；
　　③ 虚拟空间根据请求内容作分类处理；
　　④ A提出的对虚拟空间的请求，虚拟空间直接产生响应并反馈给A；
　　A提出的对协作者B的请求由虚拟空间传递给B；
　　⑤ B响应A的请求，产生相应动作；
　　⑥ B再将A的响应结果传递给虚拟空间；
　　⑦ 最后由虚拟空间传回A，完成一次事务。只有具备有“作者”或者更高存取权限的用户才可以去掉为自己文档的加密或改变相关联的密钥（如果他们被允许编辑文档且有相关联密钥）。模块中可能包含许多用脚本语言书写的过程，共同实现其特定功能。因此，我们必须把数据库、库中与表单相关文档的授权与加密统一来考虑。
4　数据库安全性以及数据库的授权
　　如果用户通过操作系统级命令，例如dos/windows或Unix环境中的复制命令，拷贝数据库时，数据仍然保持加密。研究方向：微波通信。
　　成都光纤电视网的光纤资源网以市广电局为中心，呈星型拓扑结构，光纤通信采用CCITT的G.957建议的同步数字体系(SDH)，其STM-64等级接口可传送64路155Mbps或16路622Mbps的数据(即9.9Gbps)，最大传输距离因光接口不同分别为2km、15km和40km。此外，全文索引文件可以作为服务器上的一个ASCII文本文件读取。
　　当用户为选定的数据库提供本地安全时，Notes使用一个指定的标识符公钥加密数据库。只有用户使用相应的密钥才可解密数据库。可选择三种级别的加密，既强度加密、普通加密和中等加密。
　　如图3所示，在Domino环境中，系统提供了强度、普通和中等加密三种不同算法的。强度加密提供的安全级最高。
2.2.2　公用数据网与行业网
　　二十年来，以电信通信资源为主体，国内已先后建成以电路交换与分组交换技术的电话网与数据通信网。普通加密提供有限的数据安全性、能够快速打开文档并且我们还可以用磁盘压缩工具对经过普通加密算法处理的数据库进行压缩。然而，我们不能压缩经过高度加密或中等加密算法处理的数据库。

图3
5　结束语
　　防止对非授权的数据库和文档的存取，我们可对数据库选择高强度、中等强度和普通强度的加密算法对数据库进行处理。利用面向对象的技术，采取设计程序来完成对数据库对象中的一些文档对象或者对使用指定表单产生的所有文档以及文档中的字段使用指定密钥或公钥进行加密。只有把数据库、库中与表单相关的文档的授权和加密统一考虑时，加密技术才能够真正起作用从而达到保障信息安全的目的。
作者简介：李俊海　副教授。研究方向：网络与通信。
耿继秀　副教授。研究方向：算法分析与设计。
钱丽瑾　工程师。
刘艳丽　张德壮　硕士研究生。
作者单位：中国科技大学研究生院计算机教学部　北京（100039）
参考文献
［1］　C.P. Pfleeger.Security in Computing.Prentice-Hall International, Inc.，1997
［2］　IBM. Lotus Notes release 4.6: A Developer′s Handbook. International Technical Support Organization,1998
收稿日期:1998-12-10
