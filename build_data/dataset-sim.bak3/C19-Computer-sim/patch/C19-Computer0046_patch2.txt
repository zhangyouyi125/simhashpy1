计算机应用
Computer Applications
1999年 第19卷 第7期  Vol.19 No.7 1999



VAX/VMS与Windows NT间实时文件传输的一种方法
刘鲁川

　　摘　要　作者结合工作实际，论述了FTP服务器的安装配置、客户端的具体操作、改交互的FTP命令为批处理命令和如何在应用系统中实现异种操作系统间的实时文件传输。
　　关键词　FTP，VAX/VMS，Windows NT，实时文件传输

1　问题的提出
　　TCP/IP是网际互连协议，其协议簇中的文件传输协议FTP，具有适用范围广、通用性强、操作简单的特点。但用FTP进行不同操作系统间的文件传输，必须人工干预，在交互状态下完成。这给许多有特殊要求的应用系统带来不便。济南铁路局计算中心有DEC VAX系列机6台，VMS操作系统，其上运行着铁路运输统计报告、精密统计、货运计划、货票传递等系统。
1.2.1　基于np边界分布概率的识别算法
　　首先,对于经预处理得到所有成分左右边界,进行以下处理：
　　.如果P(npL|ti-1,bpi=1,ti)>α,则设置此边界为可能的MNP左边界。1的报文将会同时匹配前两项。主要的研究工作包括：(1) 李文捷等人［6］利用边界分布信息构造概率模型而进行的MNP自动识别实验,其开放测试的识别正确率达到了71。■
基金项目：本文研究得到国家自然科学基金(No。我们可以为每个连接建立一项转发表项（one forwarding item per connection,简称OFIPC）,也可以每条路由建立一项(one forwarding item per route,简称OFIPR),如果采用OFIPR,即使连接数非常多,高速缓存表项也不会太大。　　
2　传输方案
　　通过TCP/IP协议可实现不同机种、不同操作系统的互联。但用TCP/IP协议簇中的文件传输协议FTP进行文件传输，必须人工干预，在交互状态下完成。随着网络协议的不断发展,对路由器操作系统的要求也越来越高,路由器操作系统需要能够支持路由协议的高性能的执行,需要能够允许上层协议软件的动态升级。为此，需在VAX/VMS端安装配置TCP/IP for VMS, NT server 端安装配置FTP，系统配置如下图所示。　


3　FTP服务器的安装与配置
　　在安装与配置FTP服务器前，首先应确保基于TCP/IP协议的局域网、广域网已正确安装，与此相关的参数、文件已正确设置，使用ping 命令测试网络能够正常运行。
　　a） 在VMS系统下，很容易实现FTP服务。
　　多处理器交换式体系结构。4%,召回率为82。在NT Server 中打开控制面板，作以下安装配置：
　　* 双击网络图标，查看已安装的网络软件，看是否有FTP服务器。若没有则应执行添加软件功能，选中TCP/IP通讯协议及相关组件，添加FTP服务。安装完FTP服务以后，要进行必要的配置。主要选项有：最大连接数、空闲超时时间，这两项选缺省值即可；宿主目录用以指定FTP客户连接后要进入的初始目录；不允许匿名连接，只允许用户使用Windows NT的注册帐号来登录。
　　* 双击FTP服务器图标，单击安全按钮，设置各磁盘分区的读写权限。
　　* 双击FTP服务器图标，选中FTP Server将FTP的启动类型设为“自动”。当一个报文到达时,路由器必须根据其目的地址在转发表中查找目的端口号。　
4　 FTP客户端的具体操作
　　一旦启动安装、配置好的FTP服务器，在客户端就可以使用FTP命令存取FTP服务器上的文件了。FTP客户程序在以上两种操作系统下具有统一的操作界面，使用起来很象DOS下的命令解释程序COMMAMD.COM。启动后给出命令提示符“ftp>”，在此提示符下可执行FTP命令进行文件传输。
　　常见的保存路由表的数据结构是树,在树中,每条从根节点到叶子节点的路径就对应着路由表中的一项。通过对这一算法的适当简化,并充分考虑MNP的结构分布特点,我们构造了一个新的MNP识别算法,其基本内容如下。这时可使用cd命令切换目录，使用put命令将本地文件传输到FTP服务器上，也可使用get命令从FTP服务器上下载文件，文件传输结束后，使用quit命令退出FTP 。
其中两个概率阈值α和β的设置需要兼顾以下两个目标：(1) 尽可能排除统计噪声的影响,即不至于发现许多无意义的MNP边界；(2) 尽可能保留真正的MNP边界。设定本方案中NT server的Host name为JNOV3B ，以下脚本打开一个Host name为JNOV3B的连接，作为一个帐号、口令均为guest的客户登录到NT server上，卸载FILE1文件，然后退出。
　　Open JNOV3B
　　Guest
　　Guest
　　Put FILE 1
　　Quit
　　在VAX/VMS下必须使用-S选择项来读该文件。如果先前的脚本是在称为test.scr 的文件中，可以通过输入ftp -s：test.scr来启动该脚本。在NT server一端向VMS端卸载文件道理亦然。
　　实时文件传输　文件的实时传输是通过在VAX/VMS下编写的TRF.EXE　进程来实现的。其设计思想为：TRF为一常驻后台进程，平时处于睡眠状态，当各前台应用系统，比如铁路统计报告系统中来自各基层单位的上报数据齐全，并汇总成表后，前台应用系统通过系统异步自陷AST例程完成事件标志置起, 激活TRF.EXE，由其提交前述FTP批处理命令脚本，并清除事件标志，以此完成在无须人工干预的条件下，当某一条件满足时，实时实现VAX/VMS与Windows NT Server之间的文件传输。
　　刘鲁川　硕士，工程师。从事MIS开发、Internet/Intranet系统集成、网络配置与管理等工作。
　　作者单位：刘鲁川（山东财政学院网络中心　山东．济南 250014)
参考文献
［1］　TCP/IP培训教程. 北京：人民邮电出版社，1998，3
［2］　WindowsNT安装与配置. 北京：清华大学出版社，1998，5
　　收稿日期:1999-01-19
