计算机应用
COMPUTER APPLICATIONS
1999年 第19卷 第6期 Vol.19 No.6 1999



防火墙技术与防火墙系统设计
肖　捷
　　摘　要　本文通过对防火墙系统的两种基本技术的分析，提出了防火墙系统总体设计的基本思想，并设计了一种基于包过滤技术、代理技术和身份验证技术相结合的实用防火墙系统。
　　关键词　包过滤技术，代理技术，身份验证
1　防火墙
　　随着Internet 在世界范围内的普及，网络安全问题变得愈来愈重要。 为了防止侵入者盗窃、修改或破坏系统上的数据，维护私用网络和防止对计算机资源的非授权使用，获得对Internet比较安全的应用，防火墙系统是一种重要的应用模式。
2　防火墙技术分析
　　根据ISO/OSI参考模型，防火墙技术主要分为两大类：一类是建立在网络层上的基于包过滤技术的防火墙;另一类是建立在应用层上的基于代理技术的防火墙。

图1　自动尺寸测量TCU系统的构成
　　手动TCU的功能要求和自动TCU的基本相同，差别有：①手动TCU要挂接3个现场测量终端，要求能同时工作；②在系统控制台上要能监视3个测量终端的测量结果；③不需要与现场其它设备进行DI/DO操作，通过和操作人员交互完成对玻壳的各种数据测量和处理。因为场景一复杂，构成场景的多边形和面的数量也就多了，而且还要牵涉到各个面和多边形的相对坐标位置的复杂关系，所以单纯地用手工来编写VRML的代码还是不合适的。这种防火墙技术的优点是简单方便，透明性好，速度快，对网络性能影响不大，缺点是正确建立和管理包过滤规则比较困难，同时还缺乏审计、跟踪及身份验证功能。改变了过去呆板的对话框文本输入式的交互，提高了用户的感受力。其核心是运行于防火墙主机上的代理服务器进程，它代替网络用户完成特点的TCP/IP功能。一个代理服务器实际上是一个为特定网络应用而连接两个网络的网关，对于每一种不同的应用服务，都必须有一个相应的代理。外部网络和内部网络之间要建立连接，必须通过代理的中间转换，内部网络只接受代理服务提出的服务请求，拒绝外部网络的直接连接。连接结构如图2。这种防火墙技术的优点是它能完全控制通信双方的会话过程，具有用户级的身份验证、日志管理和帐号管理功能，提供了比过滤路由器更为严格的安全性，缺点是缺乏透明性，影响网络性能，必须针对每一项服务都建立对应的应用层网关，才能提供全面的安全保证，这势必严重限制新应用的采纳。
2.3　解决局限性的一条思路
　　用户界面和交互手段的好坏直接关系到参与协作用户的感知，关系到协同工作开展的好坏，因此在Internet上建立协同工作环境也特别需要考虑用户的工作环境及交互方式的构造。所以，AD―MUTEX只能由后台作业APNETJOB来创建，并登录到系统的根作业目录下。连接结构如图3。但成熟的软件工程理论和传统的程序设计方法都可以借鉴。从整个系统的成本、安全保护的实现、维护、升级、改造以及重要资源的保护等方面进行考虑，以决定防火墙系统的拓扑结构。通常有三种主要的拓扑结构。一、双宿主主机结构，通过在主机中插入两块网卡实现硬件连接，它是防火墙系统使用的最基本配置，这种防火墙主机的重要性是路由被禁止，网络段之间唯一的路径是通过应用层的服务程序来实现。二、屏蔽主网关结构，即由过滤路由器和代理主机分别实现包过滤和代理服务两级安全防护，其中代理主机是这种结构防火墙系统的中心主机，通常称为堡垒主机。APNETJOB的数据追赶任务接受PCTOOL数据追赶请求，向上位机发送需要追赶的尺寸数据，然后向PCTOOL报告有关情况。
3.2　制定网络安全策略
　　不同的组织有各自特定的安全要求，在实现的过程中，有两条基本的安全策略原则，也即没有授权认可的服务都被禁止，不受授权限制的服务都被允许。前一条策略拒绝一切未经认可的服务，防火墙封锁所有的信息流，逐一完成每项许可的服务。后一条策略允许一切没有被禁止的服务，防火墙转发所有信息，逐一删除被禁止的服务。
3.3　确定包过滤规则
　　包过滤规则是以处理IP包头信息为基础，在设计包过滤规则时，一般先组织好包过滤规则 ，然后再进行具体设置。
3.4　规划代理服务器
　　代理服务器(PROXY)是防火墙系统中的一个服务器进程，安装运行在防火墙主机上，为内部网络与外部网络充当中继，阻止内部网络与外部网络的直接连接。由于它作用于应用层，故可以利用各种安全技术，如：身份验证、日志记录、审计跟踪等技术来加强内部网络安全性，解决包过滤所不能解决的问题，从而建立一个更加严密的防火墙系统。这些应用虽然都利用了WWW方便的人机界面来实现更高的方便性、灵活性以及更强的包容性，但是在协作者之间的感知与实时交互方面却带有很大的局限性。
　　实时应用程序必须保证逻辑上的正确性和执行时间上的正确性，必须显式地处理系统程序面临的一些问题，如并发性、任务管理和调度、任务间通讯和互斥等。该防火墙系统由一个内部路由器、一个代理服务器和一个边界路由器构成一个中间的过滤子网，以实施安全防护。

图5　实用防火墙系统拓扑结构
4.1　包过滤规则的设计
　　对于过滤路由器中过滤规则的设计，我们采用的安全策略是：不允许IP源路由，起于内部网络的服务允许给过滤子网中的代理服务器，允许外部网络到代理服务器的流量，允许过滤子网中代理服务器到内部网络的流量。
　　可见将VRML融合到Internet的协同环境中去，实现Internet上的虚拟现实交互，可以使我们的协同工作达到更好的效果。采用这种过滤机制，使得路由器中的规则库仅包含3条规则，既方便维护和管理，又易于验证过滤规则的完备性和正确性。但与OS的中断管理机制相比，IRT的硬件因素显然是微乎其微的。本文提供了一种常用的代理服务模型，其逻辑结构如图6。

图6　代理服务器逻辑结构
　　我们选用Netscape Proxy server3.5代理服务器软件，在安装好代理服务器后，再设计一个代理服务器的配置文件，代理服务器根据该配置文件的源IP地址、目的IP地址和身份验证控制内外网络的访问权限，利用监控、记录模块实现对所有数据流的监控和记录，以提供网管所需的各种数据。另外，为了防止侵入者窃取系统口令文件和通过偷听网络连接来获取合法用户ID和口令，从而对内部网络进行攻击，本系统采用了一次性口令系统（OTP）对用户身份进行认证，以进一步提高整个网络系统的安全性。
5　结论
　　网络的安全性涉及许多方面，本文主要从防火墙的设计、实现方面进行探讨，给出了一种实用的防火墙构建模型，希望能给读者有所帮助。
　　第一代WWW是一种访问文档的媒体，能够提供阅读的感受，使那些对Windows风格熟悉的人们容易使用Internet，从而使得上网的人数激增，推动了Internet的发展，但是它毕竟有它的局限性。研究方向：计算机网络及数据库系统。
作者单位：广东省韶关大学　广东.韶关（512005）
参考文献
［1］　（美）Chris Hare Karanjit Siyan,著.Internet防火墙与网络安全.北京:机械工业出版社,1998
［2］　（美）David Wolfe,著. Microsoft Proxy Server开发指南.北京:电子工业出版社,1998
［3］　(美)William A.T., Mary A.P., Keith A.B,著.Internet 使用大全.北京:清华大学出版社,1995
收稿日期:1999-01-10(修改稿)
