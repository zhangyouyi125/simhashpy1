航空工程与维修
AVIATION ENGINEERING & MAINTENANCE
1999年　第6期　No.6　1999



单元化制造系统中的有限能力调度
杨建军
Finite Capacity Scheduling in Cellular Manufacturing Systems
　　在敏捷制造环境中，产品的技术创新性、质量、交货周期和价格是构成企业核心竞争力的要素。制造企业围绕着顾客订货种类和数量及交货时间来有效地组织生产，并及时响应顾客在数量、品种或交货期的变化。
　　单元化制造系统是构成敏捷制造企业的最基本组织元素和功能元素。是多品种小批量制造具有竞争力的组织方式，是一种后大规模生产方式和订单驱动的制造系统。
　　有限能力计划（FCS）通常被认为是企业更好地提供客户服务和效益的一种使能技术。特别是近十年，有关有限能力调度方面研究工作正在引起广泛兴趣。近年来,随着神经计算学的发展,神经元控制(Neurocontrol)作为新兴的智能控制技术开始渗入航空航天领域［1-2］。指出了在敏捷制造环境下的基于单元化制造系统（CMS）中采用有限能力调度技术的必要性。针对如何提高客户的服务和生产管理系统的操作性和效益性，并结合MES概念在单元化制造系统的实践，介绍了一种基于活动网络的交互式有限能力调度方法和系统。
　　有限能力调度在敏捷制造环境下，制造企业既要能够时刻关注自己企业的预留能力，以便准确地提供交货的预承诺。又要了解顾客的需求变化或实际生产出现问题时，会怎样影响当前对顾客的承诺。同时必须经济而有效地组织制造，满足发货的要求。生产调度的重要性日益显露出来。
　　生产调度问题具有复杂性、动态随机性和多目标性等特点。解决生产调度问题的方法也可分为基于运筹学的方法（如线性规划、动态规划、分枝定界等），基于知识的智能调度方法（如专家系统、神经元网络、遗传基因算法等），以及在实际应用常常用到的基于规则的方法（如离散事件仿真）等。上述几种方法以不同形式应用于制造系统中，尽管如此，通过纯理论的方法产生可接受的调度的前景仍相当暗淡。
　　在生产实际中，基于规则的方法常常用来解决调度和有限能力调度（FCS）问题。
　　式(4.5)的解构成空间｜α｜的一个子空间,设Vj,VK为式(4.5)的对应于不同特征值ω2j,ω2K的特征矢量,则

(4.7)
〈KVj,VK〉=∫L0EIy(4)j(x)yK(x)dX+EI(y(3)j(0)yK(0)-y(2)j(0)y′K(0))
=∫L0EIy(4)K(x)yj(x)dX+EI(y(3)K(0)yj(0)-y(2)K(0)y′j(0))=〈Vj,KVK〉(4.8)
算子M和K在(4.5)的解空间上是自共轭的,(4.5)的增广特征矢量是正交的
〈MVj,VK〉=δjKdK　(j,K=1,2,…)(4.9)
〈KVj,VK〉=δjKω2KdK　(j,K=1,2,…)(4.10)
(4.11)
5　系统的响应
　　使用增广表述后,原边值问题可表述为
MWtt(x,t)+KW(x,t)=F(x,t)
(5.1)
W(x,0)=［U0(x),U0(0),U′0(0)］T(5.2)
Wt(x,0)=［V0(x),V0(0),V′0(0)T(5.3)
式中
W(x,t)=［y(x,t),y(0,t),yx(0,t)］T(5.4)
Wt(x,t)=［yt(x,t),yt(0,t),yxt(0,t)］T(5.5)
F(x,t)=［f(x,t),F0(t),-τ0(t)+bF0(t)］T(5.6)
U0(x)=y(x,0),U0(0)=y(0,0),U′0(0)=yx(0,0)(5.7)
V0(x)=yt(x,0),V0(0)=yt(0,0),V′0(0)=yxt(0,0)(5.8)
　　式(5.1～5.3)就是用增广表述法表示的多体系统的动力学方程,设其解为
W(x,t)=∑∞K=1VK(x)qK(t)(5.9)
代入(5.1),并与Vj(x)作内积得

利用正交性可得
(5.10)
解方程(5.10)得
(5.11)
(5.12)
把它们代入(5.9)就可得所需要的解。
　　最朴素的有限能力调度应该算是工厂调度员日常的工作方法，他凭借经验、心算和其他一些简单的方法来安排日常工作。但是这种方法的利用价值是有限的。因为，通常人们的注意力仅能覆盖少量的重要工种或工序，以及近几天的加工任务，或是应付那些被顾客或销售指定关键的生产任务；当意外情况不断发生（订单变更或者出现机床故障等），导致重新调整生产安排时，或当有成百上千个任务要安排时，即使最有经验的调度员也难以胜任。当前，计算机工具已经被用来帮助进行这项复杂的能力分配工作。
　　能力作为制造资源计划（MRP）系统中的有效负荷模型，是基于工作中心的概念。在传统的MRP系统中，能力需求计划方法和技术是以“无限能力”和工作中心的平均能力为能力需求运算的假定前提，既忽略了任务与具体资源的关系，也忽略了制造经济性、工装的数量和物料的短缺对任务的安排的影响。

(a)(b)
图2　BP神经元网络模型
3.1.2　BP神经元网络算法
　　(1)前向传递算法
　　令Nkj为第k层第j个神经元,Okj为Nkj的输出,θkj为Nkj的阈值,wkji为联结Nki与Nk+1j的权系数,Lk为网络第k层的节点数,则:
(3-1a)
(3-1b)
　　(2)往回传播算法(BP学习算法)
　　设BP网络有样本集合S={(R(s),O(s)d)｜s=1,2,…,N}。但是不能提供详细的需求来满足车间调度、满足顾客交付要求。
　　有限能力调度是一种改善和克服上述问题的方法，现有的一些商业系统能够提供有限能力调度功能，即把具体的资源和任务联系起来管理能力的方式。另外，在有限能力计划系统中，系统根据资源、订单和管理目标综合优化地来编制生产作业计划。有限能力计划下的提前期是一个计算的结果，而不是像MRP计划系统那样是事先已知（固定的）。从而避免了MRP系统实际运行中的一些问题。这一点对多品种小批量制造企业，特别是项目型制造企业是至关重要的。对于这些企业，要获得MRP计划需要的精确的零件提前期是不现实的。
　　基于规则的调度方法通常被用来实现有限能力调度。基于规则的方法，通过理论的归纳和经验的提取，形成一个“规则集“，本质上代替了深刻和广泛的人类决策行为。
　　仿真的观点，预先的决策规则被应用，如“选择具有最少剩余松驰时间的任务”或“选择具有同样工装的任务”。在表面上，这些规则都可能是能达到潜在目的的合理决策。
　　显然上述耦合多体系统动态特性的精确分析方法,还可以进一步推广。由于这些规则的作用是单调的，常常顾此失彼。虽然，在实践中可以通过使规则系统具有更多的适应性来应付系统这种两难的局面，如采用组合优先规则的方法。如果这样的话，就意味着每一种例外情况都需要更多的条件被加到规则中，从而使规则系统越来越复杂。即使这样，规则系统仍存在着一些不可避免的缺点，如维护的复杂性、规则作用的局部性、规则的不完整性和较差的交互性。
4.2.2　ANN1的训练
　　由图3及能量函数(3-3)和BP算法(3-4)可知,训练ANN1的关键步骤是计算ANN1的输出误差Δu(t)。这种方法具有比通过规则更直接获得调度计划的能力。它利用了可视化技术，将自动调度计划生成和人工干预有机地结合起来。自动处理的结果可以被调度人员方便的调整和它同时可以方便的锁定那部分他们满意的调度作业顺序。这种控制方法最终减少了重新安排调度计划，并改善了围绕调度这个术语常常谈到的调度稳定性或者叫做调度的鲁棒性。
　　将活动网络方法应用到解决有限能力调度的交互式决策支持，首先要解决制造任务及其任务间约束（关系）的表示方法。
　　近几年出现的多体系统传递矩阵法［1-5］,为解决上述第1个问题提供了一个简捷的方法。令u(s)为ANN1在输入R(s)=(y(r)(s),x(s))T作用下的实际输出。特征矢量在通常意义下不正交,从而不能直接用模态分析方法求解刚、弹耦合多体系统的动力响应,难以对系统的动力响应进行精确分析。通过BOO可以表示顾客订单整个生命期所涉及的设计、制造、发货等所有步骤（活动），这一特点对改善顾客服务和提高企业效益是至关重要的，也使企业面向订单制造的战略有了技术上的保障。登月舱软着陆过程的仿真结果如图5所示。图1是任务安排的甘特图。

图1　任务安排的甘特图
　　图2则是该任务安排的活动网络图。它不仅表示了各资源的任务队列，也表示了生产过程中工序间的约束，其中一些约束是调度的条件，而另一些则是调度的结果，约束的建立过程也是调度决策的过程。这种方法通过允许调度员直接指派想要安排的工作避免了描述上的复杂规则的难点，它允许调度员能灵活的处理情况，可能提出最好的作业顺序。设作用在刚体上的主矢和主矩分别为F0(t)j吆挺0(t)k,作用在梁上的分布力为f(x,t)j,(i,j,k)为直角坐标系的单位矢量。交互式决策支持允许调度人员当需要时可重新安排工作，从而避免了下游的问题。


图5　登月舱软着陆过程


图6　登月舱非线性动态逆
6.2.2　非线性动态逆
　　登月舱软着陆神经元控制系统仿真实验过程包含了ANN1形成登月舱动态逆的训练过程,其仿真结果如图6所示,曲线1是登月舱精确的动态逆,曲线2是ANN1对登月舱动态逆的预测值。
　　另外，基于活动网络图的方法，可以方便地引入其他系统优化与分析方法，如涉动分析。交互式决策支持允许调度人员兼顾交货期和效益，立足于今天的条件和今天的顾客需求，并不简单地依照一些事先定义的规则。从而使得调度策略可以更好地适应调度环境和管理目标的变化。
　　交互决策支持依靠在调度中识别冲突的特点，面不是利用复杂的规则去企图解决或避免它。冲突任务或有问题的任务能通过人工干预的调整方法解决。虽然，基于规则的系统同样不能排除人工干预调度的需求，但在指导思想上希望在制订计划时和维护计划时预防冲突的出现。
CMS中的FCS应用
　　值得指出的是，有限能力计划具有较好的实施性和较优化的性能，特别适合单件与小批量制造环境。同时也受到了问题规模的限制，当零件超过一定的数量时，将引起系统的性能将下降。因此，在实际的应用中，必须注意简化BOM层次结构。单元化制造通常是依据成组技术原理，将传统机群式生产组织按产品再工程，重新成综合生产组（制造单元），每一个生产组既是制造的中心，又是一个利润中心，有全部的管理职能，甚至包括财务在内。与这样的生产组组成的生产系统称为单元化制造系统。因此，在传统的车间构成和管理要素是机床，而在单元化制造中，整个单元是一个对外的整体和管理要素。
　　由于单元间的生产协同的本质是供应链问题，即使是在一个工厂内部，单元主驱动力是由相互的供求关系所决定。单元化制造系统可以简化零件物流路线和减少生产准备时间、简化管理、提高工人的熟练程度，从而提高生产率和零件质量；有利于组织管理。它克服了传统工作方法和工厂的工艺布置造成的庞大的管理机构，以及发货不按时和交货时间过长等弊病。
　　单元化制造系统具有异构的控制结构，将传统的多层递阶结构转化为更趋于平面化的分布式异构层次结构（图3）。单元化制造系统是构成的分布式网络化的虚拟企业实践敏捷制造的基础。分布式网络化是实现企业多种柔性和敏捷性的一种新的制造系统概念和模式。
　

图3　分布式异构层次结构
　　因此，采用单元化的组织方式，使得传统的组织方式下的产品结构方式发生变化，BOM由原来一个深层的结构，变化为一个更简单的配套结构，这种结构的简单化有利于FCS技术的实施。
　　单元化制造系统概念的应用到系统开发上很自然要导致分布式管理模式，即单元化制造系统控制系统的自治性和外向性，所谓的自治性具有从计划、调度到控制的相对完善的功能，由于单元化制造系统的具有更高的专业化生产、相对较小的系统规模特点，所以降低生产规划和控制的复杂性，方便采用我们提出的uMRP＋MES的CMS系统结构。这里的MES就是制造执行系统，是MES国际联合会在90年代开始推广的技术概念和实施模型。而外向性则指的是单元间具有的协同功能，正是这种协同性使多个不同的单元可以根据一个确定的商业目标需求组织起来，适应敏捷制造的需求。求系统的动力响应。

图4　蜂巢系统结构
结束语
　　单元化制造系统是一种后大规模生产方式和订单驱动的制造系统，敏捷制造企业的基本构成要素。企业通过实施单元化制造再工程，增强了企业的竞争力。同时，单元化制造系统通过引入有限能力调度的技术概念，使企业在顾客服务和企业效益竞争的两个重要方面寻求到了平衡，改善了企业的生存条件。基于活动网络方法的交互式决策系统为有效地实施有限能力调度提供了技术的保障。
　　本文作者利用这个技术思路，开发的“制造经理“计算机辅助管理软件已经应用于工业生产，实际情况表明，这种技术思路具有较好的参考和应用价值。□
作者单位：北京航空航天大学
