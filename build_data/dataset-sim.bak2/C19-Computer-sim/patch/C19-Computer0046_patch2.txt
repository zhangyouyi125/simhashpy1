计算机应用
Computer Applications
1999年 第19卷 第7期  Vol.19 No.7 1999



VAX/VMS与Windows NT间实时文件传输的一种方法
刘鲁川

　　摘　要　作者结合工作实际，论述了FTP服务器的安装配置、客户端的具体操作、改交互的FTP命令为批处理命令和如何在应用系统中实现异种操作系统间的实时文件传输。在这样的一个市场里,为解决一个复杂的应用问题,用户可能先从一个或多个数据服务的提供者之处获取其所需要的数据,然后将这些数据传给一系列的计算性服务的提供者,由它们来进行集成处理。
3.3　源对象
　　在Internet市场中,顾客通过用扩展标记语言XML描述的结构化文件来注册服务。这给许多有特殊要求的应用系统带来不便。0。中心的VAX系列机在DECnet支持下，通过X.25协议上与铁道部、下与各站段的VAX系列机相连。本文中简称之为DECnet网。近年来，随着各级铁路机关办公自动化系统的开发应用，VAX/VMS下的主机／终端模式已难以满足办公自动化系统的要求。在济南铁路局机关办公自动化系统建设中，我们采用了IBM PC Server为Windows NT Server服务器，各处室现有PC机为客户机的client/server体系结构。由此产生的问题是，由于各种生产信息均在DECnet网上，为满足局机关各级管理人员及时了解生产情况的需求，必须使办公自动化局域网与DECnet相连，并实时地无须人工干预地自VMS向NT server传输数据文件。
　　以上由P求得X0和Y0的过程称为球变换。但用TCP/IP协议簇中的文件传输协议FTP进行文件传输，必须人工干预，在交互状态下完成。为此，需要对FTP的提交方式进行适当的改进，使VAX上的某批数据在任意时刻完成后，能自动的实时转储至NT server上。为此，需在VAX/VMS端安装配置TCP/IP for VMS, NT server 端安装配置FTP，系统配置如下图所示。　


3　FTP服务器的安装与配置
　　在安装与配置FTP服务器前，首先应确保基于TCP/IP协议的局域网、广域网已正确安装，与此相关的参数、文件已正确设置，使用ping 命令测试网络能够正常运行。
　　a） 在VMS系统下，很容易实现FTP服务。
　　在Internet市场中,我们通过将DTD映射到数据库的模式中的方法来保存服务信息。
　　b） 在Windows NT Server 4.0中实现FTP服务。在NT Server 中打开控制面板，作以下安装配置：
　　* 双击网络图标，查看已安装的网络软件，看是否有FTP服务器。若没有则应执行添加软件功能，选中TCP/IP通讯协议及相关组件，添加FTP服务。安装完FTP服务以后，要进行必要的配置。
　　Nurbs方法有许多公认的优点,在CAD及计算机图形学中正获得越来越广泛的应用。
　　* 双击FTP服务器图标，单击安全按钮，设置各磁盘分区的读写权限。
　　* 双击FTP服务器图标，选中FTP Server将FTP的启动类型设为“自动”。另一种方法是使得Internet市场的数据库界面允许用户要求复杂的查询。　
4　 FTP客户端的具体操作
　　一旦启动安装、配置好的FTP服务器，在客户端就可以使用FTP命令存取FTP服务器上的文件了。FTP客户程序在以上两种操作系统下具有统一的操作界面，使用起来很象DOS下的命令解释程序COMMAMD.COM。同时,熟悉XML语言的服务提供者也可以直接将所提供的服务加入已存在的服务目录当中。
　　利用FTP传输文件的过程很简单。首先使用open命令与FTP服务器建立连接，若连接成功，系统则提示输入用户名、用户口令，口令验证通过后，FTP客户成功注册到FTP服务器上。
节点向量分别为{0,0,0,0,0.25,0.5,0.75,1,1,1,1}和{0,0,0,1,1,1};按7×4分布的28个权因子分别为{1,1,1,1,1.2,1,1,0.8,1,1,1,1,1,0.81,1,0.65,1,1,1,1,1,1.6,0.89,1,1,1,1,1}。　　 
5　用FTP批处理命令实时传输文件
　　改交互命令为批处理命令　在VAX/VMS一端，FTP有使用脚本（script）即来自外部文件的命令清单的能力。设定本方案中NT server的Host name为JNOV3B ，以下脚本打开一个Host name为JNOV3B的连接，作为一个帐号、口令均为guest的客户登录到NT server上，卸载FILE1文件，然后退出。
　　Open JNOV3B
　　Guest
　　Guest
　　Put FILE 1
　　Quit
　　在VAX/VMS下必须使用-S选择项来读该文件。如果先前的脚本是在称为test.scr 的文件中，可以通过输入ftp -s：test.scr来启动该脚本。
　　(1) 利用插节点算法,将Nurbs曲线P(t)转化为n-k+1条Bézier曲线。
　　实时文件传输　文件的实时传输是通过在VAX/VMS下编写的TRF.EXE　进程来实现的。其设计思想为：TRF为一常驻后台进程，平时处于睡眠状态，当各前台应用系统，比如铁路统计报告系统中来自各基层单位的上报数据齐全，并汇总成表后，前台应用系统通过系统异步自陷AST例程完成事件标志置起, 激活TRF.EXE，由其提交前述FTP批处理命令脚本，并清除事件标志，以此完成在无须人工干预的条件下，当某一条件满足时，实时实现VAX/VMS与Windows NT Server之间的文件传输。
　　刘鲁川　硕士，工程师。数据服务提供在本地数据源查询由数据提供方来维护的数据的服务。

Fig.1
图1
2　反求Nurbs曲线/曲面参数
2.1　反求曲线参数
　　对于一条给定的Nurbs曲线：
　(6)
其中Pi是控制顶点,Wi是相应控制点的权因子,Ni,k(t)为定义在节点向量
T={t0,t1,...,tk,...,tn,...,tn+k}
上的k阶B样条基函数,通常取t0=t1=...=tk-1=0,tn+1=tn+2=...=tn+k=1