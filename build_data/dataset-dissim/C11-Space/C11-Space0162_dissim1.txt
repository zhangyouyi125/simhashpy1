宇 航 学 报
JOURNAL OF ASTRONAUTICS
1998年  第3期   No.3 May   1998
科技期刊
FDF鲁棒决策方法研究
何英姿　张　兵　吴宏鑫
(北京控制工程研究所*北京2729信箱36分箱*100080)
　　摘　要　故障检测滤波器(FDF)是故障检测与隔离(FDI)方法中一种重要而系统的方法,但到目前为止有关这种方法的研究基本上都基于模型参数精确已知的情况,本文研究了具有模型误差时FDF的鲁棒决策方法,得到了一些有意义的结论。
　　主题词　FDI　FDF　模型误差　鲁棒决策
THE RESEARCH OF FDF ROBUST DECISION METHOD
He Yingzi　Zhangbing　Wu Hongxin
(Beijing Institute of Control Engineering*Beijing 2729 box*100080)
　　Abstract　Fault Detection Filter (FDF) is an important and systematic method among the methods of Fault Detection and Isolation,but the model uncertainty is almost not considered by now.This paper do some work about the robust decision of FDF when there is uncertainty problem,and get some good result.
　　Key words　FDI　FDF　Model uncertainty　Robust decision
1　引　言
　　FDI是近年来控制界的一个热门话题。从本质上来说FDI方法可以分为两大类,即基于状态估计的方法和基于参数估计的方法。关于故障检测与诊断各种方法及其应用的综述可参见代表性文章［1,2］。
　　FDF是一种基于状态估计的方法。ΔHt为二次时间补偿项,如果飞行器有平方计算能力,也可参加方程运算;ΔHgv为运动方程线性化误差,由于飞行器在开伞点附近的运动轨迹比较接近直线,所以,该项可以忽略;ΔHG为共轭方程线性化误差,由于已经是二阶项,与δ(2)G1,δ(2)G2的耦合更是高阶项;ΔHV是由再入点参数误差和再入点nx1=x1处的干扰造成的。显然,这种控制方法要求飞行器上装载有视加速度积分装置(例如陀螺积分仪)、计时装置和线性运算装置。计算结果表明,该控制方法的控制误差小于100m。
　　FDF方法用于故障检测的一个优越性是它无需故障模式信息,因为在这种方法中故障检测的重要信息在于残差方向而非其时间函数。由于这一特点,FDF在最近二十年里得到广泛的重视。但是,FDF方法对模型不确定的鲁棒性问题一直没有结论。仅有的对FDF方法鲁棒性的研究是利用未知输入观测器方法［4］。这种方法设计比较复杂,要求预先知道未知输入的结构矩阵,占用较多的设计自由度,使FDF只能在剩余自由度上进行设计。
　　解决FDI鲁棒性问题的途径有两种,一是设计一种对不确定具有鲁棒性的残差产生方法,这是从根本上解决问题,但这种方法难度较大,通常有一些严格限制条件,不易实现;另一途径是分析模型误差等不确定性对系统的影响,在检测和隔离时附加适当的阈值,这种方法简单实用,但如果阈值选取不当会导致漏报或误报。对于FDF,未知输入观测器属于前一种方法,本文希望用第二种方法来解决模型存在误差时的鲁棒FDF设计,得到合适的故障检测阈值。
2　FDF的鲁棒决策方法
2.1　基本FDF方法
　　考虑系统

(2.1-1)
其中,A∈Rn×n,B∈Rn×q,C∈Rm×n,当系统发生部件或执行机构故障时,系统方程为

其中,fi∈Rn×1是预先知道的故障方向,μi是任意未知时变标量。本文以飞行器轴向视加速度及其积分为控制信号,用共扼方程法设计了一种惯性高度控制方法。
　　检测滤波器具有如下通常的线性观测器形式

如果定义状态估计误差和输出残差分别为

则无故障时闭环方程为

(2.1-2)
　　FDF的目的是确定检测增益阵L使故障fi下输出残差ε与Cfi成正比,并使得滤波误差ε在出现故障的瞬间以及达到稳态后始终与Cfi成正比。可以证明传感器故障下检测增益阵的设计与之统一,它将ε方向固定在一个平面内［5］。
　　FDF设计的核心可归结为求解下面的方程组

　　其中Wi=Cfi=Cvij(j=1,2,…ni;i=1,2,…,r)。在这里,与故障fi有关的特征值与特征向量的数目ni是待定的,ni个有关特征向量vij(j=1,2,…,n)构成了故障fi的检测空间。ni的确定,L增益阵的求取等参见文献［5］,这里不具体叙述。
2.2　模型存在误差带来的问题
　　无模型误差时,FDF设计过程保证故障输出方向(Cfi)等于某一个或某几个系统特征向量(Cvij)的组合,使得此故障下的输出残差方向是这个特征向量或这几个特征向量中的任何一个在输出空间的投影,同时输出残差方向也就与故障输出方向一致。FDF方法检测与隔离故障的依据是看输出残差向量在残差空间的方向是否与所设计的某个故障输出方向一致,故障的检测与隔离同步进行,为简便起见,后文均用检测代称。常用的惯性控高方法是过载延时方法,控高方程为:

(1)
nx1,x1分别为实际弹道和标准弹道的过载,Ty,y分别为实际弹道和标准弹道从x1至高度处的延时。假设真实系统为

(2.2-1)
用于建立观测器的系统模型为

(2.2-2)
这里,A,A0∈Rn×n,B,B0∈Rn×q,C∈Rm×n,且(A,B)能控,(A,C)能观。设

则故障fiμi下的误差系统方程为

(2.2-3)
其中G0=A0-LC。
算例:　再入参数Ve=6722m/s,He=80816m,θe=-20.4°,m=3000kg,S=3.0m2
控制高度=2273m
再入干扰:10%标准大气密度偏差
采用原控高方程:x1=22,y=10.60S
控高偏差:ΔH=853m
　　采用本文设计的控高方程,控制误差如下表所示:
误差项ΔHtΔHgvΔHGΔHVΔ(2)H
数　值25.713.3-6.20.019.3
总误差52.1m
　　两种计算结果比较可以看出,本文设计的控高方程的精度比原方程的精度提高了8倍。与式(2.1-2)相比可知,除了w项外,(2.2-4)式的不同之处还有G与G0的差别。由于FDF设计的特点,上述两类不确定性从不同的角度影响故障检测性能。前者“污染”故障向量而影响故障检测,称为“显性不确定性”,后者改变了误差系统的特征方向从而改变了故障下设计残差输出方向,称为“隐性不确定性”。
3　控高方程误差分析
　　为了简化飞行器上的计算装置,本文忽略了高阶项而设计了线性控高方法,这必然会造成控制误差,控制误差与外干扰有关,干扰越大,控制误差越大。
2.3　FDF的鲁棒决策
　　在上一节中给出了隐性和显性两类不确定性,相应也有隐性阈值和显性阈值之分。
算例:　再入参数Ve=6722m/s,He=80816m,θe=-20.4°,m=3000kg,S=3.0m2
控制高度=2273m
再入干扰:10%标准大气密度偏差
采用原控高方程:x1=22,y=10.60S
控高偏差:ΔH=853m
　　采用本文设计的控高方程,控制误差如下表所示:
误差项ΔHtΔHgvΔHGΔHVΔ(2)H
数　值25.713.3-6.20.019.3
总误差52.1m
　　两种计算结果比较可以看出,本文设计的控高方程的精度比原方程的精度提高了8倍。
定理1:设G如前定义,特征根λi(i-1,2,…,n),相应特征向量vi(i=1,2,…,n),并满足‖δG‖=‖δA‖≤σ,G0也如前定义,且G0的特征根相应为λ0i(i=1,2,…,n),特征向量为v0i(i,1,2,…,n)。记特征值扰动为δλi=λ0i-λi,特征向量扰动为δvi=v0i-vi,πi为所设计的故障fi下的输出残差向量(πi=Cvij),π0i为对应的实际输出残差向量(π0i=Cv0i),则隐性隔离阈值Ythj(j=1,2,…,r)如下表示

(2.3.1-1)
其中

　　证明:
　　根据已知可以得到
δvi=-T-i(λi)(δλiI-δG)v0i
其中Ti(λi)=λiI-G
　　设αi为πi与π0i的夹角,根据欧氏空间中向量夹角的定义,有

根据假设,δπi≈0,因此,δπi与πi和π0i分别近似正交(零向量与任何向量正交),不难得到


而根据线性代数理论有

所以

即　　　
　　故障fjμj对应检测空间中的nj个特征向量,因此选取这nj个αi中的最大上界作为隐性阈值是合适的,即阈值可由(2.3.1-1)式给定。
证毕。
FFF2.3.2　显性阈值
　　显性阈值与显性不确定性相对故障的大小有关,假设当
‖ε‖τ≥ρ‖εΔ‖τ
(2.3.2-1)
时检测到故障发生。其中‖ε‖τ和‖εΔ‖τ分别代表系统的总输出残差大小和仅仅由显性不确定性导致的输出残差大小:‖*‖τ表示一种基于残差均方根指标的范数算子［5］。显性阈值可由如下定理给出。
定理2　对于(2.2-1)和(2.2-2)描述的系统,利用FDF检测故障时的显性阈值可取为

(2.3.2-2)
其中,λmax是G的最大特征值,αij是构成fi的ni个非零特征向量对应的非零系数,λij是对应特征值,上标i代表相应于故障fi。
　　此定理证明过程比较繁琐,限于篇幅这里只给出证明的简单思路。
设

令ξi代表ε(t)=ε0(t)+δε0(t)与ε0(t)的夹角,类似于定理1可得到

利用(2.3.2-1)式、(2.3.2-3)式和(2.3.2-4)式以及范数性质等可推导出

从而得到(2.3.2-2)式。
　　由(2.2.1-1)和(2.2.2-2)式得到FDF的故障检测阈值为
Ithi=Xthi+Ythi
在应用FDF方法之前,先求出每一个故障向量对应的检测阈值,当发现输出残差落在某个设计方向的阈值之内则判断相应故障发生。
再入飞行器的运动方程:

(4)
将上式作泰勒展开:

(5)
初始条件:　V(0)=Vn,　θ(0)=θn
忽略(5)式的高阶项,则其共轭方程为:

(6)
设共轭方程的终端条件为:

(7)
则由布利斯公式［1］得:


(8)
　　实际计算表明,G1(t),G2(t)在定高处接近直线,所以,可以将G1(t),G2(t)作泰勒展开:

(9)
(6)式代入(9)式得:

(10)
(6)式、(10)式同时代入(8)式得:

对(11)式连续作降阶积分并代入(3),写成偏差形式:

令:

　　由于ΔHt,ΔHgv,ΔHG,ΔHv为高阶小量,所以,通过解弹道可以将f(Δth)逼近成Δth的线性函数:
f(Δth)=a0+a1Δth
(13)
　　(13)式代入(12)式,忽略高阶项并写成标准形式:

(14)
　　上式即为本文设计的高度控制方程,方程中各系数由标准弹道确定,在地面上计算出各系数后,装订到飞行器计算机中,当过载nx1=x1时,开始计量并计算视加速度及其积分,当H=时发出开伞信号。
2　高度控制方程设计
　　
　　高度控制就是H=,但由于飞行器无法测量自身的速度和弹道倾角θ,所以,必须将V和θ变为轴向视速度Wx1和W*x1。
2　高度控制方程设计
　　
　　高度控制就是H=,但由于飞行器无法测量自身的速度和弹道倾角θ,所以,必须将V和θ变为轴向视速度Wx1和W*x1。
4　鲁棒FDF方法在卫星姿控系统故障检测中的仿真研究
　　为了说明FDF鲁棒决策方法的有效性,下面看一个具体实例。假设卫星姿控系统的部件只在稳态以后才有可能发生故障。考虑某卫星在稳态运动时俯仰轴的姿态控制,在平衡点对系统运动方程线性化,得到一个四阶状态方程。ΔHt为二次时间补偿项,如果飞行器有平方计算能力,也可参加方程运算;ΔHgv为运动方程线性化误差,由于飞行器在开伞点附近的运动轨迹比较接近直线,所以,该项可以忽略;ΔHG为共轭方程线性化误差,由于已经是二阶项,与δ(2)G1,δ(2)G2的耦合更是高阶项;ΔHV是由再入点参数误差和再入点nx1=x1处的干扰造成的。常用的惯性控高方法是过载延时方法,控高方程为:

(1)
nx1,x1分别为实际弹道和标准弹道的过载,Ty,y分别为实际弹道和标准弹道从x1至高度处的延时。该方法对再入干扰不能完全补偿,最大控高误差达1300m,如此大的误差不能满足精度要求。通过分析可知模型参数A处于真实参数的较小扰动范围之内,设σ=0.05。考虑执行机构俯仰飞轮和帆板驱动机构的可能故障形式,可以看到,俯仰飞轮和帆板驱动机构的故障方向分别为

　　按照FDF设计方法,设计出系统的观测增益阵为

相应特征值和特征向量分别为

其中,v1相应于故障f1的检测空间,v2相应于故障f2的检测空间,而v3和v4是剩余空间,有
πi=Cfi=Cvi,　(i=1,2)
　　考虑两个故障,一是俯仰飞轮由于机械故障等导致飞轮减速,从而输出力矩减小;二是帆板驱动机构由于卡住等使得驱动力矩减弱。按照故障幅度相等,取故障
Ty=Ty0-0.0026
(4-1)
Tp=Tp0-0.0001
(4-2)
其中,Ty0,Tp0代表预期力矩,Ty,Tp代表实际力矩。仿真中以非线性带挠性的模型递推计算来模拟卫星真实姿态运动过程,而FDF根据线性刚体模型进行设计,并附加一定测量噪声。故障发生之前可得到无故障时的输出残差幅度,随时监测残差幅度变化,确定ρ,从而随时计算检测阈值。在这里所给的两种故障下可以得到ρ≈1.5,利用(2.3.1-1)和(2.3.2-2)式可以计算出。
Xth1=53.0°,Yth1=2.1°,Ith1=55.1°
Xth2=43.6°,Yth2=1.4°,Ith2=45.1°
如果μi时变,则阈值也随之变化。另外,由于Cf1与Cf2夹角为145°,这两个故障的检测锥是相离的,因此是完全可分的。
　　图1和图2分别是两故障下输出残差与相应设计方向的夹角(180°附近表示μi＜0)。两种情况下残差方向均进入各自的检测锥之内,因此易于检测故障发生。


图1　俯仰飞轮于4000秒发生(4-1)式所示故障时
输出残差与Cf1的夹角


图2　BAPTA于4000秒发生(4-2)式所示故障时
输出残差与Cf2的夹角
5　小　结
　　本文研究了存在模型误差时,FDF的鲁棒决策方法,得到了解析的故障检测阈值,并对卫星姿态控制系统的执行机构故障进行了仿真研究。本文对FDF方法的实际应用作了一些必要工作,对FDF设计有一定指导作用。
　　后续工作还需进一步研究FDF的故障诊断能力,以便为故障系统重构等提供必要信息。
参考文献
1　Isermann R..Process fault detection based on modeling and estimation method―a survey.Automatic,1984,20(4):387-404
2　Paul M.Frank,Fault,Diagnosis System Using Analytical and Knowledge-based Redundancy―a Survey and Some New Result,Automatic 1990,26(3):459-474
3　Beard R V.Failure Accommodation in Linear System through Self-Reorganization.Rept MVT-71-1,Man Vehicle Lab,Cambridge,MA,1971.
4　Jie Chen,Ron J.Patton and Hong-Yue Zhang,Design of unknown input observers and robust fault detection filters,INT.J.Control,1996,63(1):85-105
5　周东华.控制系统的故障检测与诊断技术.清华大学出版社,1994
6　李清泉.自适应控制系统理论.设计与应用,科学出版社,1990
7　Wilkinson J H.(Cantab.) M A Sc D.The Algebraic Eigenvalue Problem.Clerendon Press,Oxford,1965
