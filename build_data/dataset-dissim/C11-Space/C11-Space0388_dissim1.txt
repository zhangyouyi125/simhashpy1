航空动力学报
JOURNAL OF AEROSPACE POWER
1999年　第14卷　第2期　Vol.14　No.2　1999



可扩展的燃气轮机仿真对象模型*
谢志武**　苏明　翁史烈
　　【摘要】　应用面向对象的分析与设计方法进行可扩展的燃气轮机仿真建模研究。将燃气轮机仿真的各种计算任务概括为部件计算、流路计算和系统状态计算三个层次，并在此基础上提出节点-连接器-部件模型，构造了一个部件模型、工质流程及仿真算法均可扩展的仿真类属框架，并通过一个三轴燃气轮机的容积效应法仿真验证了该模型的有效性和可扩展能力。
　　主题词：　燃气轮机　仿真　建立模型
　　分类号：　TK47　TP31
1　前言
　　在简单循环燃气轮机的基础上，通过增删部件和改变工质流程可以得到各种以燃气轮机为核心的复杂动力装置。在这类装置的仿真建模中应用面向对象方法可以方便地重用已有的源代码，因而不仅加速了建模过程［1-6］，而且为构造通用的燃气轮机仿真软件奠定了基础［6-8］。从图6中可以清楚地看到附面层在叶片表面的分布，尾迹以及气体的膨胀流动。受此启发本文在交接面上构造了Riemann解并使用了松弛因子，大大提高了小间隙涡轮级计算程序的稳定性。
2．2　叶列间处理
　　本文采用的是“混合平面”法［4，5］。
2　可扩展的燃气轮机仿真类属层次结构
　　软件的可扩展能力首先表现在其类属层次结构上，只有高度概括的父类才有可能使不同特化层次的子类在其上扩展。
　　为概括各种燃气轮机仿真的共性，将燃气轮机仿真中的各种计算任务概括为既相互联系又有明确分工的三个层次：部件计算、流路计算和系统状态计算。其中，部件计算以单个部件的特性为依据，根据该部件的已知参数求解其他未知参数，如根据压气机的转速、压比求解流量和效率等。认为在每一个时间步中的每一个控制单元体上比热比为定值，保持了控制方程的特征矩阵在形式上同定比热时一致。流路计算定义系统中各部件间的相互关系，规划部件计算的次序和参数传递方向，并掌握计算结束的判据。


图8　高压涡轮静叶吸力面极限流线　　　图9　高压涡轮动叶吸力面极限流线
　　高压涡轮静叶吸力面的极限流线反映出静叶吸力面附面层内部的径向压力梯度较大，气流在后缘近机匣处发生分离后又再附着，在轮毂处通道涡向上卷起形成一螺旋点（见图8）。流路计算结束时，系统中的所有部件均已求解且相互间满足一定条件，如顺算法要求通流部分满足压力和流量平衡，而容积效应法则仅需压力平衡即可。系统状态计算从流路计算的结果中获得系统的动态信息，然后用欧拉法、龙格-库塔法或辛算法等数值积分方法求解系统的下一个状态。
4　结束语
　　（1）涡轮级的工作温度范围通常很大，所以在计算中考虑变比热是十分必要的。以牛顿―莱普生法为例，稳态仿真时有如下迭代公式：

其中，是系统的状态变量，k是残量。流路计算结束后先求残量k和J矩阵，然后对J求逆，就可由第k轮迭代的系统状态k解出残量更小的第（k+1）轮系统状态k+1。上述计算虽然不包含时间因素，但与动态仿真中对右函数作数值积分一样，都是从流路计算的结果出发求解系统下一轮的状态，因而也属于系统状态计算。
　　燃气轮机仿真的三个层次是相互联系、相互依赖的。流路计算既控制部件计算的进行，其结果又是系统状态计算的依据，系统状态计算更为下一轮部件计算准备数据。因此，实际仿真计算时这三个层次的计算任务是交替进行的。


图1　可扩展的燃气轮机仿真类属层次结构示意图
　　根据燃气轮机仿真的三层次概括可以构造一个仿真类属框架。首先为上述三个层次的仿真计算任务构造相应的抽象类，然后以他们为父类扩展出各种不同抽象层次的子类。例如，可以从部件类Component派生压气机类Compressor，从流路计算类GasPathCalc派生容积效应法类VolumeEffCalc或从系统状态计算类SysStateCalc派生欧拉法类Euler等等。图1是这个类属层次结构的UML表述，其中，目字形方框代表类，虚线箭头代表依赖关系，实线三角箭头代表继承关系。图1所示的类属层次框架为部件以及流路计算和系统状态计算方法的扩展奠定了基础。
2　数值方法
　　计算忽略了动、静叶间流动的非定常性，认为各叶栅内部流动是定常的。 
3　节点―连接器―部件模型
　　为了表达工质流程的变化，本文之前的各种燃气轮机对象模型都构造了工质流类。但是，工质流类的存在极大地限制了流路计算方法的扩展。图2给出了采用常规顺算法、逆算法［10］及容积效应法［11］时高、低压压气机间的各种数据的传递方向。
3　算例结果与讨论
　　应用本文的计算方法对某一航空燃气涡轮的高压级进行了计算，计算网格采用了H型网格（见图1），静子、动子流场的计算网格点数分别为60×39×39，62×39×39。为了最大限度地提高模型的可扩展能力，本文废弃了工质流类，转而构造了一个更灵活多变的类属结构，称为节点―连接器―部件模型。该计算程序考虑到了涡轮级工作温度范围较大而引起的变比热问题。例如，由于工质流的温度t、焓i、等压比热cp、相对压力的自然对数lnPai0以及相对压力的自然对数对温度的导数dlnPai0间存在一一对应关系，因此用一个流体温度类TFluidNode来概括所有这些变量。若在仿真中需要传递某种工质的焓值，则只需传递相应的TFluidNode对象，它会自动进行相应的数值转换。受此启发本文在交接面上构造了Riemann解并使用了松弛因子，大大提高了小间隙涡轮级计算程序的稳定性。
　　为方便以后在系统中扩展新的物理量，需要为上述各物理量构造一个公共父类，称之为节点类（Node）。节点类及其子类的关系见图3，其中Node类的各子类自左至右分别代表转速对时间的导数、功率、流量、油气比、流体温度、压力、压力对时间的导数以及转速，流体温度类TFluidNode还派生出空气温度和纯燃气对空气温度的修正项两个子类。必要时，还可以在此基础上继续扩展出其他物理量。

　　　
图3　节点类与连接器类示意图　　　　图4　压气机类包含的各种对象
　　接着建立各部件类与节点类之间的关系。本文采用在交接面构造Remainn解来解决在交接面上参数的跳动问题。UML规定用实心菱形箭头表示值包含关系，箭头上的文字标注和数字分别表示包含关系的名称和双方的数量。
　　各部件所包含的节点间要进行数据传递，因此需要一个连接器类（Connector）来完成这一功能。连接器类和节点类的关系见图3，其中的空心菱形箭头代表引用型包含关系。
　　在节点―连接器―部件模型中，根据实际情况的不同，一个真实部件可能需要由几个软件部件对象拼接起来，其间的数据联系也可能与实际的物理联系有所不同。图5是用容积效应法仿真时高、低压压气机模型的图形界面实例，其中与部件相连的圆代表从属于该部件的各种节点，而粗线箭头代表连接器。由于低压压气机存在泄漏，因此增加了专门用于处理流量损耗的支管（Manifold）部件。注意到这里压气机与支管之间可以只交换流量信息而无须同时交换温度、压力信息，而且容积效应部件与各压气机之间的温度、压力、流量信息也可以分取不同的传递方向，因此就比用工质流类对象来传递数据的对象模型要灵活得多。在节点―连接器―部件模型中，各种不同的工质流程和流路计算方法都可以借助连接器的不同设置而轻易实现。


图5　容积效应法仿真时高、低压压气机模型的图形界面实例
　　需要说明的是，作为一种软件构造范式，面向对象方法仅仅改变仿真数学模型在计算机上的表达方式，却不会对原问题的逼真度和收敛特性造成任何影响。具体地说，仿真程序的逼真度取决于数学模型的精细程度，收敛特性则取决于与该数学模型相对应的包括流路计算方法和系统状态计算方法在内的数值求解方案。对一段传统的过程式仿真程序进行面向对象化改写，虽然会使程序结构和指令调用过程变得相对复杂，但它仍然遵循原有数学模型和算法所设定的计算任务和计算次序，因而计算结果必然与原程序完全相同。
　　另一方面，由于不同仿真问题可能提出不同的精度和速度要求，因而一个通用的燃气轮机仿真软件不仅需要具备为各种部件建立不同精度数学模型的能力，还必须能够对数值计算方法做相应调整。通常认为比热是与温度无关的常数，但当起始温度与终止温度的差异较大时，比热值的差异也较大，因此计算的准确性也就降低了。
4　算例
　　使用上述对象模型进行了某三轴燃气轮机动态性能仿真。仿真采用燃气轮机非线性数学模型［12］，各部件特性均已知，并且考虑了进排气压损、压气机抽气及涡轮冷却等因素。流路计算方法采用速度快、收敛性和稳定性均较好的容积效应法［11］，系统状态计算采用常用的欧拉法。采用UML进行面向对象的分析和设计，然后用C++语言编程实现。各叶片排在同一个时间步各被看作是相对独立的系统，通过“混合平面”传递参数。用这些对象可以拼接出系统的仿真模型。图6和图7给出了机组各转子转速对油量阶跃微扰的动态响应计算结果，与常规过程式仿真的结果完全一致。仿真的时间步长设为5 ms，在Pentium Ⅱ 233 MHz微机上，每步计算耗时3.5 ms，可以满足实时仿真的速度要求。
表1　某三轴燃气轮机动态特性仿真的对象配置说明

对 象 名所 属 类 名简　　要　　说　　明
lpc
hpc
hpt
lpt
pt
com
d1,d2,d3,d4
m1,m2,m3,m4
l1
v1,v2,v3,v4
rh,rl,rp
c1～c56SpeyLPC
SpeyHPC
SpeyHPT
SpeyLPT
SpeyPT
Combustor
DuctDelta
ManifoldGLC
Load
VolumeInertia
RotorInertia
ConnectorCompressor的子类，采用某机组低压压气机特性
Compressor的子类，采用某机组高压压气机特性
Turbine的子类，采用某机组高压涡轮特性
Turbine的子类，采用某机组低压涡轮特性
Turbine的子类，采用某机组动力涡轮特性

Duct的子类，Component的孙类，压损为常数
Manifold的子类，Component的孙类，流量损失为常数
负荷，Component的子类
容积惯性，Component的子类
转子惯性，Component的子类


5　结论
　　本文以可扩展能力为中心，综合运用面向对象的分析和设计方法，以燃气轮机仿真三层次概括为依据，构造了一个可扩展的仿真类属框架。本文提出并实现了节点―连接器―部件模型，并通过算例验证了该模型的有效性和可扩展能力。本文的工作为快速有效地进行热力系统建模仿真开辟了新方向。
　　由于涡轮中动、静叶在通常的情况下，其间隙是比较小的。
