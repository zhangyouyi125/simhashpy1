宇航学报 
JOURNAL OF ASTRONAUTICS
1998年 第19卷 第1期 No1 Vol.9 1998科技期刊

基于神经网络在线建模的非线性动态
系统中传感器故障检测方法
钮永胜　赵新民
(哈尔滨工业大学自动化测试与控制系*哈尔滨*150001)
　　摘　要　本文提出一种基于神经网络在线建模的动态非线性系统中传感器故障检测方法,它首先利用神经网络在线建立动态非线性系统的超前一步预测模型,然后利用神经网络对传感器的预测输出和传感器实际输出之差与一预定阈值比较以检测传感器故障。本文的优点是可以检测多个传感器故障,同时由于采用在线学习方式,非常适于航天器自主系统传感器故障检测的需要。此外,故障检测阈值的选取也比较简单。为了验证本文方法,仿真了一控制系统中同时发生漂移故障的两个传感器故障检测过程。结果表明,方法十分有效。因为通讯距离随探测器灵敏度Preq的变化率是以灵敏度的3/2次方变化的(由(10)式可见),所以当灵敏度达到一定程度后,增加灵敏度对通讯距离的影响相当明显,这不失为一个增加通讯距离的好方法。作为测量控制系统中诸参量的关键部件,如果传感器发生故障,包括硬故障和软故障,就会影响系统的运行。事实上,传感器是控制系统中比较容易损坏的器件［1］,因此控制系统需检测传感器是否发生故障,如果检测出传感器发生了故障,则报警,并调用备份传感器,或重构控制率以确保整个控制过程的顺利进行。美国NASA曾规定空间机器人控制系统应有一个故障诊断系统［1］。目前传感器故障诊断方法有多种,比较多的是采用分析冗余方法［1］,人工神经网络方法［2-6］等。采用分析冗余方法需要系统的精确数学模型,所以这个方法难以应用于具有模型不确定性的系统和非线性系统。已有的应用神经网络检测传感器故障方法则存在以下缺点:1.难以检测多个传感器故障。2.仍需系统的数学模型来估计系统的状态矢量。3.只能完成静止映射,即神经网络输入和输出都是在同一时刻。4.没有考虑系统的输入量。为此本文提出采用神经网络建模的传感器故障检测方法。此方法的优点是可以检测多个传感器故障,同时由于采用在线学习方式,非常适用于航天器自主系统故障检测需要。此外,故障检测阈值的选取也比较简单。通过对一实际控制系统［1］中两个传感器漂移故障检测的仿真表明本文方法是有效的。
2　基于神经网络在线建模的传感器故障检测方法
　　一个多输入多输出非线性动态系统:
y(k+1)=F(y(k),…,y(k-m+1),u(k+1),…,u(k-n+1))(1)
(u(k+1)是一p维输入矢量,y(k+1)是一q维输出矢量,n,m是输入和输出的最大延迟,对于线性系统n=m=1,F(…)代表一般的非线性函数)。可以用一个前馈神经网络和带延迟的输入、输出来表示［8］:
(2)
训练前准备好所有的输入输出数据,然后采取批处理训练方法建立系统的动态非线性数学模型,也可以采取在线递推方式建立,原理如图1所示,神经网络为多层感知器模型［3,8］,如图2所示,其中i,j,k分别表示输入、隐层、输出层,Wij,Wjk分别表示输入与隐层之间的权值和隐层与输出层之间的权值。


图1　动态非线性系统模型在线辩识的神经网络方法和传感器故障检测原理


图2　神经网络预测器结构
在线建立神经网络预测模型和传感器故障检测的具体步骤是:
　　(1)假设已经观测到k+1时刻的传感器正常输出样本y(k-m+1),…,y(k),y(k+1)和系统控制输入u(k-n+1,…,u(k),u(k+1),我们用k+1时刻以前的输入和k时刻以前的输出u(k-n+1),…,u(k),u(k+1),y(k-m+1),…y(k)作为网络的输入,用k+1时刻的输出y(k+1)作为神经网络的输出,应用误差反向传播算法(BP算法)迭代学习,直到一定迭代次数或一定的训练精度权值收敛。
　　(2)数据向前递推一步,利用收敛后的神经网络连接权值,用k+2时刻以前的输入和k+1时刻以前的输出u(k-n+2),…u(k+1),u(k+2),y(k-m+2),…,y(k+1)作为网络的输入,预测k+2时刻的系统输出估计值
　　(3)无传感器故障时y (k+2),十分接近,两者之差仅为递推误差和传感器输出噪声,而当传感器发生故障时,相应的残差分量将显著增大,所以如果传感器在k+2步的估计输出 和实际输出y(k+2)之差(残差)分量的绝对值｜y i (k+2)θ为一个事先确定的阈值,则可以判断第i个传感器发生故障。
　　(4)如果传感器没有故障,即,则将k+2时刻以前的输入和k+1时刻以前的输出u(k-n+2),…,u(k+2),u(k+2),y(k-m+2),…,y(k+1)作为网络的输入,而将k+2步数据y(k+2)作为网络的输出再次学习直至网络权值收敛到一定的输出精度并返回第3步直至检测到传感器故障。
　　由于神经网络每步只在线学习一组样本,而不是如离线方法那样学习所有的样本,所以收敛速度很快,可以保证实时检测故障的需要。
　　用于建模的前馈神经网络结构常根据经验和试错方法选择。本文根据试验选择神经网络结构。
　　由前面可得通讯距离z与探测系统灵敏度Preq的关系为


图5　z/Rb随a和Rb变化曲线


图6　z～P曲线


图7　z与P和Rb的综合关系曲线


图8　z/P随P和Rb变化情形
(9)
相应的曲线见图9。同时在满足系统需要的前提下,不应让系统的比特率留有太大的余量,否则会使系统的通讯距离大大减少,在较低比特率的系统中尤应如此。设
(4)
上式中的系数k可由实验数据确定。这样选择阈值消除了由输出噪声和学习误差引起的误报警,当然也有可能稍微选择偏大,从而难以检测小于阈值的传感器微小故障。如果多个残差分量发生显著变化,则可以断定多个传感器发生故障。


图9　z与Preq关系曲线


图10　z与Preq和P的综合变化关系曲线
为了比较灵敏度的改变对通讯距离的影响与其它参量改变对通讯距离的影响的大小,可用与前面相同的方法导出z/Preq的表达式
(10)
　　从(6)、(7)、(8)、(10)式容易看出,a对z的影响是线性的,而P、Preq及Rb对z的影响都是非线性的。所用的机器人数学模型是一强耦合、非线性系统模型,经过离散化后为［1］:
(3)
式中
D(k)=a1+a2cos(x4(k))
E(k)=a3+a2cos(x4(k))/2
A(k)=a2sin(x4(k))［x1(k)x2(k)+x22(k)/2］-a4cos(x3(k))
-a5cos(x3(k)+x4(k))+u1(k)
B(k)=-(a2sin(x4(k)))x21(k)/2-a5cos(x3(k)+x4(k))+u2(k)
C(k)=(a1+a2cosx4(k))a3-(a3+a2cosx4(k)/2)2(4)
其中
u1(k)=125-5(1-exp(-0.2k))
u1(k)=125-10(1-exp(-0.2k))(5)
　　u1,u2为输入,e为零均值,方差为diag［0.00001,0.00001,0.00001,0.00001］的白噪声。
　　y1,y2,y3,y4分别是测量机器人两个肘关节的角速度和角位移传感器。
　　由前面可得通讯距离z与探测系统灵敏度Preq的关系为


图5　z/Rb随a和Rb变化曲线


图6　z～P曲线


图7　z与P和Rb的综合关系曲线


图8　z/P随P和Rb变化情形
(9)
相应的曲线见图9。
2.3　发射功率P对通讯距离z的影响
　　发射功率的改变直接影响通讯距离,它们的关系从图6中可很容易地看出。图10则给出了灵敏度和发射功率联合变化时对通讯距离的影响情况。本文假定角速度传感器y2和角度传感器y4在第50个采样点同时出现了速率较大的漂移故障如图3,5所示。两个传感器同时发生故障的情况在控制系统中是较严重的情况,但采用本文方法也可以对付这类故障。图4,6示出了在线学习神经网络预测模型预测两个传感器输出和它们实际输出的残差与检测阈值的关系,阈值分别为0.024,0.0182,从图中可以看出本文方法在第51个采样点检测出了两个传感器漂移故障。其中接收系统的灵敏度S可用系统正常工作时接收天线上所需的最小接收功率Preq来代替,显然Preq越小,S越高。本文方法具有下述特点:
　　1.适用于复杂系统,特别是非线性系统中的传感器故障检测。
　　2.能够预报传感器是否发生故障,并可以检测多传感器故障。
　　3.本文方法只能检测速率较大的漂移故障和突变类型故障。
　　4.本文是在假定系统正常条件下研究传感器故障检测的,如果系统和传感器同时发生故障,则需进一步研究如何区分两类故障。事实上,有关这一问题在故障诊断领域仍是个难点,我们将另文讨论。当a值较大时,曲线的转折部分(即通讯距离由锐减到缓慢的过渡阶段)变化较慢,而当a较小时,这种变化过程就显得快多了