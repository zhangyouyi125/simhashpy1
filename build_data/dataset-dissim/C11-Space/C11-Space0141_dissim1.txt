宇 航 学 报
JOURNAL OF ASTRONAUTICS
1998年4月  第19卷  第2期科技期刊


开放式飞行任务规划方法
沈林成 高国华 常文森
(国防科技大学*长沙*410073)
关世义 孙 华 苏 康
(航天工业总公司第三研究院*北京*100074)
摘要　　本文给出了一种基于分布式黑板结构的开放式飞行任务规划方法,
简要叙述了飞行器飞行任务规划的概念和其独特要求,并对飞行任务规划的数
据预处理、知识表达、规划方法作了深入的探讨。最后介绍了分布式黑板的
结构和运行方式。

主题词无人飞行器　飞行任务规划　数据预处理　开放式系统



AN OPEN SYSTEM APPROACH TO
MISSION ROUTE PLANNING
Shen Lincheng Gao Guohua Chang Wensen
(National University of Defense Technolog*Changsha*410073)
Guan ShiYi Sun Hua Su Kang
(the Third Research Academy of CASC*Beijing*100074)
AbstractA distributed blackboard-based open system approach to mission route planning 
is given briefly.And the data pre-processing,the knowledge representation and the planning 
methods of the mission route planning are discussed.Finally,the distributed blackboard's 
structure and operating rules are given.

Key wordsUnmanned aircraft　Mission route planning　Data pre-processing　 Open system 
approach

1引言

　　飞行任务规划是无人飞行器有效执行任务的重要支持,其中心内容是选择
最优飞行航线。所选航线必须满足地形匹配、地形跟踪及景象匹配等各种导
航要求,以较高概率到达(或命中)目标,同时所冒风险又不能超出一定的限度［
1］。EKF和MEKF初始误差
的均值设定为零，初始方差阵P(0)=0，系统动态噪声强度ε1=1m/s2，测量噪
声强度ε2=10-3。由于无人飞行器的飞行
区域基本上被敌人防御系统所覆盖,为最大限度地减少被敌方雷达发现的概率,
它需要作超低空地形跟踪/地形回避(TF/TA)飞行,因此飞行任务规划需要在
各种因素之间进行仔细权衡。纯人工地进行这些权衡不但费时费力,且航线质
量也不一定好。

　　八十年代中后期,美国投入大量的人力物力进行自动飞行任务规划方法的
研究,取得了较大的成功［2,3,4,5］,但在实用上仍有较大的局限性。

    令为确定性微分方程
d=f(t,)dt+Budt,0=EX0
(17)
的解，且令X为随机微分方程
dX=f(t,X)dt+Budt+ε1σ(t)dw,X(0)=X0
(18)
的真实解。所以将
人完全排斥在外的全自动飞行任务规划并不是最好的,也并非规划人员所希望
的。理想的飞行任务规划系统不仅应具有良好的自动航迹规划能力,而且应该
对人开放的,即具有灵活的人机交互机制。2 ?无人飞行器任务规划的基本要求

　　无人飞行器任务规划是要寻找从发射点到指定目标的最优飞行航线。航
线既要尽量提高飞行器的命中精度,又要尽量减少坠毁概率和被摧毁概率。这
意味着任务规划方法必须识别既要满足飞行器特有导航要求,又要满足突防要
求的飞行航线。另外,飞行航线还需满足各种战略战术约束。这些约束往往相
互耦合,改变其中一个因素,通常会引起其它因素的变化。图1中，在某一时刻t，相对距离估计误差利用公式


求得，其中E［ex］代表x的估计误差的均值。

2.1导航要求

　　许多远程无人飞行器采用惯性导航系统(INS)。xf,yf,zf代表终端脱靶量。利用矩阵迹的性质，(6)式可
以写作

(7)
把H,N,Φ，S按定义代入(7)式可得

(8)
当只考虑位置信息时，令s1=1,s2=s3=0,则(8)式化为

(9)
综合(5)、(9)两式，设双重性能指标为

(10)
其中c和s是大于零的常数。

　　由于TERCOM地图的独特地形特征要求,一般难以找到合适的TERCOM地
图。若TERCOM地图数量很少,将导致飞行航线数量太少,容易被敌人识别出,
从而增加了飞行器被拦截概率;另外,对于某些特别平坦或地形起伏但相对无
差异的目标,可能没有合适的TERCOM攻击航线;对于有着大块沙漠的目标区
域,航线规划后到实际使用之间的数月或数年内,由于风造成沙丘移动,其地
形可能发生明显变化;沿海地区尽管地形起伏,但TERCOM在水域上空无法工
作;TERCOM制导在冰山和密林区上空也可能遇到麻烦,在这种地区,高度表
能交替地接收来自地面和冰面或森林的回波。同理可求得速度估计量的均方根
型误差的统计结果E［ev］以及目标加速度估计量的均方根型误差的统计结果
E［ea］。

2.2突防要求

　　当敌方防御系统不能捕获和跟踪无人飞行器,或虽然捕获但来不及拦截时,
就达到了突防目的。为提高突防能力,除需在设计中使飞行器保持尽可能低的
信号特征(低RCS参数)外,更重要的是使飞行航迹本身具有良好的突防性能。
在飞向目标过程中,对飞行器的主要威胁是敌防御系统和碰地。这两种威胁是
相互关联的,飞行任务规划需要在减少坠毁概率的高飞与减小被摧毁概率的低
飞之间进行折衷。

　　为提高飞行航线的突防性能,飞行任务规划还需采用欺骗航迹,加强航迹
的不可预测性。定义X~为围绕确定流X-的波动，从而有X=-+X~。

2.3　物理特性的要求

　　飞行任务规划必须满足燃料限制和射程约束。在降低敌防御系统和撞到
地面这两种威胁的同时,必须考虑到高度的任何降低都会减少飞行器的航程。

　　由于受到飞行器垂直和水平机动性能的约束,地形跟踪时,地形高度的升
降经常比飞行器可能达到的高度变化要快。另外，系统的动态模型(1)式是线性的，当初值较准确时，容易求得它的
精确解。反之,在地形高度迅速下降时,
飞行器必须提早拉开以免撞到地面。在威胁回避和地形回避时,为了避免侧向
撞到障碍物也需要留有适当的机动距离。

2.4战略和战术限制

　　要确保飞行器到达目标,还须满足许多战略战术限制,它们是根据国家政
策或战略原则提出的。每一项新的限制都会降低飞行器到达目标的概率。

    仿真时，系统初始状态为x0=3500m,y0=1500m，z0=1000m，vx0=-1
100m/s，vy0=-150m/s,vZ0=-50m/s,aTx0=aTy0=aTz0=0m/s2。它们可能在同一时刻飞
过同一地区,或攻击同一目标,导致飞行路线可能交叉。规划时必须防止它们
发生碰撞。

　　己方伤害:飞行任务规划要避免来自自己方面的任何危险。

　　到达时间:一项任务可能要求飞行器沿特定路线在某个特定时间到达目标
或某些中间点,这就对飞行路线、飞行速度等加以限制。

　　禁飞区:根据国家政策或政策因素,禁止飞行器飞过某些特定地区(如划定
的禁飞区、中立区、人口稠密区等)。

　　有限TERCOM地图:大量使用同一张TERCOM地图带来的误差或该地点未
预料到的敌防御系统会使飞行器到达目标前有许多架次被意外地摧毁。

3　飞行任务规划预处理

　　飞行任务规划过程涉及了上述诸多因素的权衡以及众多规划约束条件的
检验,是一个高强度的计算过程。如果对这些因素进行在线计算,将导致规划
过程的极端复杂性。因此,在飞行任务规划之前,可以事先对各种因素进行分
析计算,以避免规划过程中的大量数学计算。第一个子问题是由初值问题(17)
所决定的确定性问题；第二个子问题是由波动量方程(21)―(22)所确定的随
机性问题。


图2 相对距离估计误差
图3 相对速度估计误差
图4 相标加速度估计误差
6  结论

    我们提出在导弹被动制导问题中采用改进的推广Kalman滤波器(MEKF)。地形图象分
析包括地形统计特征分析和地形可导航性分析。xT,S和N是正定对角加权矩阵，tr表示矩阵的迹。根据地
形统计分析,确定飞行器的参考飞行高度及其相应的区域。地形可导航性分析
就是按照地形匹配和景象匹配的选择准则对战区地形进行分析评价,确定出所
有可能的地形匹配区。系统动态模型
为
dX=AXdt+bdt+wdt
(1)
其中X=［x y z vx vy vz aTx aTy aTz］T，前三个变量代表目标与导弹之间的
相对位置，中间的三个变量代表相对速度，后三个变量代表目标加速度；b=
［0 0 0 -aMx -aMy -aMz 0 0 0］T是控制向量，aMx、aMy、aMz代表导弹加速度；
w=［0 0 0 0 0 0 wTx wTy wTz］T是噪声向量。威胁分析就是根据有关的
信息、情报,分析敌放威胁范围中的雷达探测区、火力杀伤区及地形遮蔽区,
并根据飞行器对地形跟踪的要求,分析出敌威胁范围内可实施地形跟踪的安全
走廊。

3  双重指标导引律

    系统(1)―(2)所对应的确定性系统为


在线性二次型控制方案中，我们要在满足微分方程约束(3)，始端条件约束t0，x0,y0,z0,vx0,vy0,vz0,aTx0,aTy0,aTz0以及终端条件约束tf的前提下，求出控制
量aMx，aMy，aMz，使得性能指标最小。

4飞行任务规划问题知识表达

　　飞行任务规划需多方面的知识:区域背景知识,自然语言接口知识和航线
产生知识。区域背景知识是作战区域的地理和军事特征知识,包括地形标高、
威胁配置、可用作导航地标的地理参考点、雷达地形遮蔽等。

　　作战区域的地理和军事特征知识采用多重分辨率锥体结构的组合地图和
符号地图两种表达形式。符号地图表达包括:地形匹配区、威胁区、地形遮蔽
区、地形跟踪区、按碰地概率和飞行器升限确定的可飞/不可飞区等。可飞区
域包括自由飞行区域和有一定飞行代价的飞行区域(雷达探测区减去火力杀伤区,
地形跟踪区、地形遮蔽区等),不可飞区域包括火力杀伤区、指定禁飞区、人
口稠密区、中立地区、障碍区域等。约束知识尽量表达在组合地图中,并在规
划过程中尽量以数学描述形式纳入到代价函数中;无法嵌入到组合地图或无法
纳入代价函数的部分尽量设计成一系列“对照表”;无法用上述两种方法描述的
知识,用推理模式或仲裁规则来表达。

　　自然语言接口知识包括任务生成和处理自然语言总是和解释中需作为参
考的大量信息。它分为两类:语言知识和非语言知识。显然，对于已知的X-，(21)和(22)是线性的，而X~和Y是高斯过
程。

　　开放式任务规划系统需要的另一类知识是航线产生知识。它描述了生成
航线和确定所生成的航线中(可能很多)哪一条航线最可能成为可飞行航线所需
的数据和程序。这类知识以“if…then…”规则形式编码,规则的设计需要在
经验丰富的任务规划人员指导下进行。这类知识大致分为三组:第一组规则与
地理和军事特征的识别有关,这些特征对于TF/TA航线规划是重要的。第二
组规则与飞行器的飞行特点有关,比如飞行员一般以45度角而不沿一条垂直
于山脊的航线飞行,因为45度的交叉角可使飞行器更快地进入山脊另一侧的
雷达盲区。第三组规则主要负责备选航线评估,决定哪条航线更好些。

5开放式任务规划的基本方法

　　路径规划的方法很多,一般都是化为状态空间中的路径搜索问题,利用搜
索算法求解。在被动制导条件下，
导弹的机动飞行轨迹会对滤波器的性能产生直接影响［2］、［3］，因此在
设计导引律时有必要考虑系统可观性指标。基于确定性搜索的方法一般化为数值成本最小化问题,然后利
用动态规划或者A*搜索等算法求解。成本的大小通常根据燃料消耗和生存能力
来衡量。基于随机搜索的方法主要有:遗传算法和模拟退火规划方法,均为概
率搜索算法。一种改进的推广Kalman滤波器［4］(MEKF)可以克服这一
约束，因此我们提出在导弹被动制导中应用MEKF进行目标状态估计。显然，对于已知的X-，(21)和(22)是线性的，而X~和Y是高斯过
程。X~的误差协方差矩阵P(t)与X的误差协方差矩阵相同。

　　以上方法直接用于求解飞行任务规划问题还有较大的局限性:飞行器面临
的战场环境异常复杂辽阔;规划约束条件众多且模糊性大,各因素间存在强耦
合;飞行器有独特的制导体制、突防要求和命中精度要求;飞行任务规划过程
具有非马尔可夫特性;飞行任务规划过程需及时贯彻指挥员的作战意图,人应
该能够充分地参与飞行任务规划过程;飞行任务规划一般要求一次规划多条航
迹,多条航迹间可能有重合。

　　因此有效的飞行任务规划方法应是开放式的:一方面应该是分层分段分区
域的多种规划方法的融合;另一方面应以人为中心,强调人机交互规划的重要
性,将自动规划只作为一种辅助手段。开放式任务规划方法可以描述为:首先
对发射位置和攻击目标的合理性进行评价,若不满足约束条件就提出修改建议,
然后通过份层来处理航迹规划问题,并在各层上允许规划人员的介入和干预。
第一层次是满足导航要求的高级别符号航线规划,通过称号处理裁减下一层次
的搜索空间。第二层次是两个导航点之间满足突防要求的小范围符号航线规
划,进一步裁减下一层次的搜索空间。第三层次是满足物理性能要求的状态空
间搜索,基本上是一个高强度的计算过程。它对于高飞行高度的航线规划来说
是很快的,但对TF/TA航线规划则可能较慢。因为在TF/TA任务中,在大量
爬升、俯冲和转弯动作。然而，
只有当系统的动态模型和观测模型都很接近于线性时，EKF的估计结果才有
可能接近于真值。第一搜索阶段从符号阶段确定的近似航线开始。每一
条近似航线都确定了一条飞行走廊,在第二个搜索阶段中,每一个飞行走廊包
含的区域都将按渐近提高的分辨率进行分析。这种分析会产生比原来飞行走
廊更狭窄的走廊集合。在被动制导条件下，
导弹的机动飞行轨迹会对滤波器的性能产生直接影响［2］、［3］，因此在
设计导引律时有必要考虑系统可观性指标。

5  MEKF在导弹被动制导中的应用

    在MEKF中，线性化的参考点是一个确定值，而在很多情况下，这个确定
值就等于状态的均值。重复此过程直至达到
所要求的高分辨率。渐进深化搜索较A*搜索快,但无法保证获得最佳航线,然
而它使人工参与成为可能。在每一个搜索阶段,计算机都可以向用户解释它为
什么选择某一些飞行走廊而舍弃了另外一些,用户可以认可或修改它。

6开放式任务规划系统的结构

　　开放式任务规划系统是高度交互式的:允许用户参与部分工作,能够解释
自身作业的合理性,易于修改。一般采用面向对象的模块化设计和黑板系统结
构。为避免一般黑板系统的通讯瓶颈问题,采用分布式黑板(主从式)系统结构。
它由对应于物理CPU的若干局部黑板组成,并由一个主黑板管理全局。

　　黑板上的共享内容是以对象为单元的结构化数据。由此可知，如果系统状态均值较高，波动较小，那么
由这种方法得到的估值可能具有相当高的精度。按照任务规划系统的功能和规模
要求,需要3～4个局部黑板,每个黑板对应于一个CPU并配置一个局部监视器。
所有的功能模块(知识源KS)也被划分成3～4组,每一组对应于一个局部黑板。
对于KS来说,所有的黑板逻辑上是一个整体,它存取黑板信息时,只向监视器
发一个标准的黑板操作命令,不必指出该信息属于黑板系统中的哪一部分。监
视器将首先在本地黑板上寻找,再到其它黑板上搜索。由于局部黑板与本地K
S紧密相关,大部分存取操作均发生在本地黑板,减少了通讯开销。

　　每一知识源作为一独立的进程在计算机上执行,有一个专用的窗口,知识
源之间的协作由分布式黑板来实现。在系统启动后,除用户接口知识源外,每
一知识源以类似的方式运行。运行完初始程度后,就转入静止状态,然后知识
源监视信息黑板。一旦得到与其有关的信息,知识源的处理过程就恢复并完成
相应功能,然后又转入静止状态。在接到“退出”信息后,知识源执行终止程序
并清除它本身的处理程序。用户接口知识源以不同的方式工作,在执行初始程
序后就等待规划者的输入。一旦接到输入请求,知识源就将信息传至黑板,然
后转入静止状态并开始监视黑板。当有信息传至黑板,表明用户的请求已满足
时,用户接口知识源的处理过程立即恢复并等待任务规划者的其它输入。

　　系统启动的同时,也给每个知识源建立了一个窗口。

    令为确定性微分方程
d=f(t,)dt+Budt,0=EX0
(17)
的解，且令X为随机微分方程
dX=f(t,X)dt+Budt+ε1σ(t)dw,X(0)=X0
(18)
的真实解。
这样任务规划者就不会为系统如何运行的一大堆细节所困惑。任何其它知识
源都可以在该窗口上显示关键性信息,保证任务规划者可以看到所有关键性信
息。X~的误差协方差矩阵P(t)与X的误差协方差矩阵相同。战场地形图象分析和符号地图分割预处理为开放式任务规划提供
了灵活有效的知识结构。知识表达的组合地图多分辨率锥体数据结构具有很
大的优点,但也存在一些局限性,在许多方面还需要进行深入地研究,特别是
符号地图分割在支持TF/TA航线规划方面有很大的潜力。


本文于1997年5月6日收到
参考文献
1Millar R J.An Artificial Intelligence Based Framework for Planning Air Launched Cruise 
Missile Missions.AD-A154466,1986
2Halpern M E.Application of the A* Algorithm to Aircraft Trajectory Generation.AD-
A268728,1993
3Willoughby J K,etal.Optimization Approaches to Route Planning for Cruise Missile.A79-50061
4Jardine T J and Shebs S T.Knowledge Representation in Automated Mission Planning.AIAA 
Computers in Aerospace IV Conference,83-2317
5MacMillan T R,etal.Knowledge Based Route Planning.Proceedings of IEEE 1990,NAECON,
p1001-1007
6Malin J A.Automatic Routing Module.N88-17251,1988
7沈林成.自主移动机器人地形导航――数字地形模型与自动路径规划研究.
国防科技大学博士论文,1994
