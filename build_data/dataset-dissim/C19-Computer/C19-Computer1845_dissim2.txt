微型机与应用
MICROCOMPUTER & ITS APPLICATIONS
2000 Vol.19 No.2 P.53-54




微机硬盘引导扇区故障的解析与修复
张红
摘 要： 对硬盘引导扇区的内容、功能加以分析，讨论其发生故障的现象、原因和修复方法。
关键词： 硬盘 主引导扇区 引导扇区 扇区故障
　　硬盘具有体积小，容量大，存取速度快，记录密度高的特点，由于硬盘内磁盘的盘片和磁头都被密封，硬盘制造时空气要通过高效过滤口才能进入密封室内，所以硬盘的硬故障，即物理损坏，如盘片划伤，驱动器控制系统损坏等发生率大大低于另一种软故障，如病毒感染，配置不当等软件故障，而许多软故障多与硬盘上的引导扇区的内容有关。玻璃刻花工艺要求刀具加工速度不能过快，小臂和大臂控制脉冲方波周期不同，则小臂和大臂加工速度都可能是变化的。
1 硬盘主引导扇区及引导扇区
　　硬盘的主引导扇区是位于硬盘的0柱面，0磁头，1扇区，它是由硬盘的低级格式化程序生成，其内容有3部份：（1）主引导程序（主引导记录MBR），（2）4个分区项，（3）结束标志字（55AA）。硬盘的主引导扇区为512B，启动微机系统时，系统首先对硬件设备进行测试，测试成功后进入自举程序INT 19H，然后读系统磁盘0柱面，0磁头，1扇区的主引导记录（MBR）内容到内存指定单元，0：7C00首址开始的区域，并执行MBR程序段。硬盘主引导记录（MBR）是不属于任何1个操作系统的，它先于所有操作系统而被调入内存并发挥作用。因此另一定时器计时初始值应由程序每次计算。引导扇区是指硬盘中DOS分区开始的第1个扇区，即逻辑驱动器的第1个扇区又称BOOT区，经由FORMAT高级格式化写到该扇区，有5部分组成，即：（1）跳转指令，（2）厂商标识和DOS版本号，（3）BPB，（4）DOS引导程序，（5）结束标志字（AA55）。以上5部分共占用512B。这种结构的控制过程与作直线运动的机械手控制过程完全不同。
2 硬盘引导扇区引导失败的修复
　　引起系统不承认硬盘或硬盘不能自举的原因大多是关键程序区和数据区信息损坏等软故障造成的。对于这类软故障。用户大都可以根据屏幕上出现的提示信息来判断引起故障的原因。
　　接下来的程序是处理θ1和θ2同时发脉冲控制2台步进电动机联动的工作过程。
　　利用上述控制过程，可作到机械手双臂联动。另一种是慢速运动。否则将损坏产品。我们可以利用DEBUG程序来完成修复工作，而原有数据不会受损。若发生分区表错误（主引导记录未被破坏），我们先用DEBUG读取硬盘主引导记录，然后在内存中修改正确，最后写回到硬盘的主引导扇区。
　　例如：若硬盘启动直接进入ROM－BASIC，或从A盘启动后键入C：却不能够进入C盘，而显示INVALID DRIVE SPECIFICATION，那么，我们可以采用该方法：
　　A＞ DEBUG
　　－A 100
****：0100 MOV AX，201
****：0103 MOV BX，200
****：0106 MOV CX，1
****：0109 MOV DX，80
****：010C INT 13
　　****：010E INT 3
　　****：010F ∧C－G－100 （将主引导记录读入200H开始的内存中）
　　－D 3B0 3FF （显示分区表，发现引导标志为“55”而不 
　　　　　　　　　　　　　　　　　　　是“80”或“100”
　　－E 3BE 80 （将引导标志改为80）
　　－E 102 3 （修改汇编小程序的第一条语句）
　　－G－100 （将修改后的主引导记录写入硬盘）
　　经以上修改，主引导记录的引导标志恢复为80，该故障现象消失。若主引导记录被破坏，可从另外一台启动正常、干净无毒且与有故障微机的硬盘分区相同的微机中获取未被破坏的主引导记录，再写回原硬盘。这样2臂同时转动完成实际曲线运动。 
　　其一般故障有： 
　　MISSING OPERATION SYSTEM 
　　NON－SYSTEM DISK OR DISK ERROR 
　　DISK BOOT FAILURE 
　　BAD OR MISSING COMMAND LNTERPETER
　　出现故障后，可用含有与原硬盘上操作系统版本相同的A盘启动后，在A＞提示符下运行：
　　A＞ SYS C：
　　当屏幕出现SYSTEM TRANSFERED时，表示系统文件传输成功。若出现：
　　NO SYSTEM ON DEFAULT DRIVE
说明执行命令的当前盘上，没有原启动计算机的DOS版本的3个系统文件。加工时必须时刻与加工曲线相切。时钟频率为晶体振荡频率的一半，且机器周期是时钟周期的6倍