微型机与应用
MICROCOMPUTER & ITS APPLICATIONS
2000 Vol.19 No.3 P.27-28



多层交换技术分析
鄂大伟
　　摘　要：多层交换机是一种综合交换机速度和路由器流量控制功能于一体的、新的网络互连设备。本文分析了多层交换技术出现的原因,为以上问题的解决提供了良好的方案。
　　关键词：多层交换 交换技术 路由技术
1 为什么要采用多层交换
　　在20世纪80年代中期,为实现计算机网络的标准化,国际标准化组织（ISO）提出了开放系统互连（OSI）参考模型。OSI参考模型采用7个层次的体系结构,并为每个层次的划分建立了1个标准的框架,用于描述规定每个层次中的服务定义的协议规范,时至今日,OSI模型仍被认为是新一代计算机网络体系结构的基础。这里所讨论的“多层交换”,实际就是指在OSI参考的数据链路层、网络层和传输层上实现的交换技术。显示的定时控制电路就是这样以固定的速率对显示屏幕不断地进行扫描,从而对屏幕进行刷新。垂直地址计数每循环计数1次,1幅画面就扫描完了。连接设备是大家熟知的共享式集线器。随着对网络带宽的进一步需求,工作组交换机替代了共享式集线器,随之也出现了LAN交换机,即第2层交换机。第2层交换技术在数据链路层中进行操作,这就说明在LAN交换机中,帧的传输是基于以太网、令牌环网或FDDI MAC的地址,LAN交换机对网络协议诸如Internet协议（IP）或Novell的IPX协议来说是透明的。因此,第2层交换机产品大多数是基于端口的交换,其交换机的接口模块都是通过高速背板/总线交换数据的,速率可以达到每秒几十Gb。
　　然而,LAN交换技术并没为大规模的LAN建设提供一个完整、普遍的解决方案。这主要是由于传统的LAN交换技术不是完全可以扩充的。进入90年代以来,互联网络成为应用焦点,利用路由器通过WAN连接不同类型的局域网络已成为网络应用的主流。在大部分实际运行的网络中,LAN交换机必须与路由器相结合。路由器的过滤和防火墙功能使控制广播域变得更容易,从而达到抑制广播风暴和增强安全性的目的。路由器能够智能地确定最佳传输路径,并支持冗余连接,提高网络性能和可靠性,但是路由器的端口价格及延迟是较严重的问题。今天,即使是最高档的主干路由器也难以应付由于VLAN、Intranet以及其它基于IP的应用所带来的迅猛增长的数据流量。字符显示模块较为复杂,完成DRAM信息在电视接收机上的显示。使图文电视进入信息产业具有投资小、成本低、便于功能扩展、传输速度快等特点。同样,垂直地址计数器在垂直方向对显示字符的行数和消隐区所占的行数进行控制,并在规定的位置上产生垂直同步信号。这些新的交换技术的出现为网络应用提供了新的解决方案。
2 第2层交换（Layer 2 Switching）的不足
　　第2层交换实际上是面向局域网的交换技术。LAN交换是解决网络堵塞、扩展网络带宽的主要选择之一。LAN交换机中具有一定数量的物理端口用来连接LAN网段,通常为8～128个。这些端口通过提取每个发送到交换机的数据包的源MAC地址,得到MAC的目的地址及与接收该数据包的端口地址,进而得知端口与MAC目的地址之间的关系。由于LAN交换机大多数都是自动配置的,所以较易安装、构造和管理。
　　第2层网络交换技术的不足之处是明显的,它极大地扩展了网络,但它使网络又恢复到了网桥的平铺拓扑结构,容易形成广播风暴。为网络提供容错技术的生成树（SpanningTree）导致在数据路径使用上的低效率,对异种网络之间互联的限制、安全性等。在数年前,这些因素使路由器的使用成为必须。路由器的低效率和大时延是使用户设法减少路由器数量的原因。
　　2×10MUX（140）是用于选择刷新地址的,在刷新周期内,不允许对DRAM进行读写。
3 第3层交换（Layer 3 Switching）
　　网络层是OSI参考模型的第3层,它作为通信子网的最高层,负责将数据从物理连接的一端传送到另一端,包括寻址、路由选择、连接的建立、保持和终止等。基于OSI的第3层交换,是指在交换机内部完成不同子网间和虚拟网间的互连,从而改变了传统网络解决方案中由交换机外接路由器来完成局域网中不同IP子网、IPX子网和虚拟子网的互连。这样可大大减少原来采用路由器连接不同子网所带来的延迟、瓶颈等弊病。SEL信号由/RAS延迟2个CLK时钟周期（CLK为系统时钟,27MHz）得到,使得行地址被锁存后,经过2个系统时钟周期,SEL变为0,2×10MUX（141）选择通过高10位地址,即列地址,再将SEL信号延迟2个系统时钟周期产生列地址选通信号/CAS,目的是确保列地址稳定后,才由/CAS下降沿锁存入DRAM。尽管目前似乎对第3层交换这一术语的解释不尽相同,但实际的做法就是在原有的第2层交换机内加入最新的ASIC（专用集成电路芯片）的路由模块,即把与路由器有关的第3层路由硬件模块插接在交换机的高速背板/总线上,使路由从软件之中移出并移入ASIC之中,其成本远低于传统路由器的成本。1个真正的第3层交换机并不是简单地将传统路由器加入到第2层交换机中的产品,它要使得路由模块可以与需要路由的其它模块间高速交换数据,使路由模块能真正达到线速的路由能力。这不仅仅是硬件上的改变,还表现在软件的服务质量方面以及能提供极强的对网络流量的控制能力。
　　第3层交换机根据定义都是属于存储-转发设备,况且还要承担路由功能,然而却达到了与第2层交换机同样的包处理速度。在以往采用存储-转发方式的第2层交换机产品中,很少有延时能达到小于70μs的。数据桥也可将图文电视数据行从1个频道的电视信号中取出,插入到其它频道的电视信号上。
4 功能演示
　　编写好单片机程序,先在4MB内存条中以117A38H开始的304（130H）个内存单元（指16位宽）中写入汉字“串”在字符发生器中的地址代码（基地址）“E0E0”H,紧接着在从117B68H开始的304和内存单元写入汉字“鼻”的地址代码“C0C0”H（由于单片机只有8位宽,所以必须分别对低8位区和高8位区进行操作）。例如CoreBuilder 3500第3层高功能交换机,依赖于成熟的第三代ASIC技术,提供了线速的第2层和第3层通信能力,大幅度地提高了高端交换设备和路由设备的性能和性能/价格比。同时,由于使用了先进的基于策略的服务机制,该交换机可以支持实时的多媒体网络通信。加上对虚拟网、组播、多协议路由和网络管理的支持（包括RMON和巡回分析端口）。CoreBuilder 3500第3层高功能交换机可用作主干局域网络由设备来提供第3层的转发功能,从而取代局域网中的传统路由器。同样地,它也可以作为接入千兆以太网或ATM网的边缘设备。
4 第4层交换（Layer 4 Switching）
　　OSI模型的第4层是传输层,它的作用是利用下面3层所提供的服务向高层提供可靠的端到端的透明数据传输,主要任务是提供进程间通信机制和保证数据传输的可靠性。传输层也是TCP（传输控制协议）和UDP（用户数据报协议）所在的协议层。TCP协议是目前在Internet上广泛使用的一种协议,而UDP协议则是一种在目标计算机描述信息如何到达应用软件的协议。由水平地址计数器跟踪的1行所有19个字符,依次从VRAM中取出时,只能显示1行所有19个字符的1排,此后水平地址计数器仍继续计数,留出规定宽度的消隐区域,并在此区域中产生水平同步信号。ROMADDSEL作为字符发生器地址的最低位,它首先为低电平,选择低8位点阵信息,用第1个/CEROM低电平输出,并用LATCHDOT1锁存;然后ROMADDSEL信号变为高电平,选择高8位点阵信息,用第2个/CEROM低电平输出,并用LATCHDOT2锁存。既然第4层交换使用了与特定应用有关的信息（端口号）,利用这个信息可以完成大量的服务。例如通过查询其所接受的每个包内诸如TCP端口号之类的应用级信息,第4层交换机可以做出比第2层和第3层交换机更为明智的发送决策。
　　根据第4层交换的定义,第4层交换应具有以下特性:
　　1.许多路由器被用于建立基于包过滤式的防火墙,第4层交换也具有这种能力,它对包的过滤能力是在ASIC中实现的。第4层交换机允许用户以LAN速度对通信量和防火墙功能进行优先考虑。它可消除与防火墙认证有关的延迟,可以在所有端口以全介质速度操作,即使在千兆以太网连接上也是如此,而其它交换机则会出现此类延迟。如果用户计划在自己的网络上支持没有延迟的防火墙安全性,那么采用第4层交换机是值得考虑的。按所要选页的页号后,图文电视解码器则将该页的数据取出,进行视频处理,最后显示在电视屏幕上。当因缺乏第4层信息而受到妨碍时,紧急应用的优先权就无从谈起。借助于第4层交换,TCP和UDP协议端口号告诉交换器生成传输流的应用程序的类型,然后,交换器则可以将此数据包分类映射到服务质量保证中。18×4=72=48H,以计数范围0～47H设计的点计数电路,实现VRAM中取所需要显示的汉字,在字符发生器（ROM）中的地址码,再由该地址码去ROM中取其点阵信息,并锁存,最后将点阵信息置位给移位寄存器。
　　3.提供附加的硬件手段,以每端口为基础收集应用层流量统计。管理员使用第4层交换支持的统计特性,能够获得丰富网管信息。管理员不仅可以跟踪服务器和客户之间的数据,也可以很好地跟踪某1个应用服务在工作、服务器上的活动和被打开的对话数等。
　　简而言之,多层交换技术正是交换和路由技术智能化的组合,它为各种结构的LAN提供了一个完整、集成的解决方案。这就是越来越多的网络设计者把视线转到LAN中的多层交换技术的原因。
　　并/串转换电路由2片74377锁存器构成,用于在LATCHDOT1和LATCHDOT2信号控制下锁存字符发生器送来的汉字点阵信息