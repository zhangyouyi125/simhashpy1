微型机与应用
WEIXINGJI YU YINGYONG
2000　Vol.19　No.5　P.33-35




CORBA在TINA网络和业务管理中的应用
李欣舒斐张顺颐
摘 要：CORBA规范定义了能支持互操作性的接口和业务，TINA为基于CORBA的业务开发和网络管理应用定义了框架结构，文中给出了具体的应用方法及其与当前使用较多的TMN框架的互操作。
关键词：CORBA规范 电信管理网 分布式处理环境
　　CORBA（Common Object Request Broker Architecture）作为在异构环境中实现对象之间进行交互的参考模型，已应用于各种设备，得到了很多操作系统的支持。CORBA成功的关键在于它解决了互操作的问题，可支持2个或多个不同领域的管理应用之间的通信，允许不同厂家的第三方产品集成，其实现与具体的语言和平台无关。
　　TMN体系结构为不同类型的操作系统和电信网络设备之间的管理信息交换定义了一系列标准接口。它提出了一个“管理者-代理”模型，只要支持同一个协议栈，就可以互相通信。所有的信息模型都是由ITU-T负责定义的，用面向对象的观点来看待网络中物理资源和逻辑资源每个资源都能抽象为1个对象。虽然许多网络管理开发商已经成功地应用了TMN的体系结构，但还是存在下列问题：
　　（1）如何从专有的中间件过渡到多平台，并以尽可能低的开发成本，增加开放性和灵活性。
　　（2）简化高层的功能集成，在业务管理层使用TMN概念，引入ODP（Object Distributed Processing）和TINA（Telecommunications Information Nerworking Architecture）的概念。
　　（3）与不支持OSI管理的客户管理系统的互操作。
　　（2）购物网页。OMG定义了一系列CORBA服务，方便了分布式应用的建立。
　　（3）查看购物袋网页。许多国际标准认为基于CORBA的TMN系统是灵活的，允许在现有系统从TMN到TINA的平滑过渡。提供可选择的各种商品（名称、单价、简介、制造厂家、生产日期等）任用户选购。ORB提供了对象间发送请求、接收应答的透明机制，实现了异构分布式环境下不同系统之间的互操作。对建立在CORBA上的应用组件，其接口用IDL定义，用某种具体的编程语言实现。这样，1个CORBA应用包含的对象之间可以通过ORB机制相互通信。在交互的2个对象实体中，1个作为客户端，有权访问对象参考并激活对象接口所定义的操作，另1个作为服务器，由对象实现接收操作请求及参数，执行完毕后将结果返回给客户端。
　　（2）购物网页。对象定位、对象实现的透明性是CORBA的主要优点之一。同时，CORBA制订了一系列协议，允许驻留在不同ORB的对象进行透明通信，简化与其它环境下现有协议的集成，如OSF的DCE、Microsoft的COM等。
　　一个对服务器端对象实现的请求包括几种机制，如图1所示。

图1 CORBA请求处理过程
　　一种最简单的情况是静态激活，客户端知道服务器端IDL接口的情况，由IDL服务器端接口自动生成客户端Stub，它负责将客户端的请求从编程语言的形式转化成目标对象。服务器端对象根据IDL规范，自动生成skeleton，对目标对象执行相反的操作，重新转化成编程语言，完成任务，这样就实现了异构系统之间的互操作。
　　为了更详细了解程序内容，请参阅参考文献1光盘。
　　由于ASP（Active Server Pages）的Session是某一连接者所有网页的共同对象，可以用它来记录用户在不同网页上选购的商品。使用界面仓库，它们就可以获得注册和访问IDL接口的权限。使用DII，客户端能建立请求，利用从IR动态检索得到的信息并激活1个操作。动态的激活方式给ORB模型提供了极大的灵活性，而客户端和服务器端无需了解此方法是静态的还是动态的。对象适配器提供了访问ORB服务的对象实现，是完成与其它对象系统之间互操作的关键组成部分。
　　（3）查看购物袋网页。OMG还定义了一系列CORBA服务，如名字服务、事件通知服务等，可以运行在所有的平台上。如放入购物袋程序、购物网页、查看购物袋网页，就是Session对象的一个很好的应用。一个业务的定义是从企业模型的规范开始的，包括该业务中的角色，如业务和网络提供者、管理者及各种用户，也包括各角色间的关系。如下代码：
　　＜％
　　　　DbPath＝SERVER．MapPath（″ShopBag．mdb″）
　　　　Set conn＝Server．CreateObject（″ADODB．Connection″） 
　　　　conn．open ″driver＝｛Microsoft Access Driver （＊．mdb）｝；
　　　　　　　　　　　　　　　　dbq＝″ ＆ DbPath
　　　　sql＝″Select＊From Products″ ′这里的Products是
　　　　　　　　　　　　 ′ShopBag．mdb数据库的1个数据表
　　　　sql＝sql ＆ ″Where ProductID In （″ ＆ ProductList 
　　　　　　　　　　　　　　　　　　　　　　＆ ″）″
　　　　sql＝sql ＆ ″Order By ProductID″
　　　　Set rs ＝ conn．Execute（sql）
　　％＞
　　由于调用conn．Execute命令建立了1个Recordset对象：rs 则rs中的数据记录即是被选中的商品的记录。如放入购物袋程序、购物网页、查看购物袋网页，就是Session对象的一个很好的应用。
2．1 TINA的会晤概念
　　从计算的观点来看，TINA认为所有的软件对象都运行在分布式处理环境上，这意味着计算对象之间的交互遵循着客户机-服务器模式，TINA为建立这种模型定义了会晤的概念。
　　一个会晤定义了业务成员间的关系，会晤管理包括建立、激活、修改、支持和完成会晤的各种功能。通过会晤机制，不同类型的终端可以在不同时间段使用各种电信业务。
　　TINA定义了3种不同类型的会晤： 
　　（1）接入会晤。专用于处理用户的认证和授权，支持终端用户的可移动性，支持对专有业务的访问。接入会晤可以看作是用户和可用业务之间交互的起点，根据用户的需求，接入会晤可以建立并管理业务过程。从计算观点上看，用户代理支持个人接入机制，它根据当前情况决定一种业务是否能被该用户使用。
　　（2）业务会晤。
关键词：ASP Session对象 购物网页
1 网上购物系统基本构架
　　网上购物是当今Internet应用十分热门的话题。为了支持用户专有的业务，业务会晤分成用户业务会晤和提供者业务会晤。
　　（3）通信会晤。为用户业务建立通信连接，减轻了通信资源管理和业务控制。设有“放入购物袋”按钮，含有“查看购物袋”，“退回所有商品”，及各分类购物网页的连接。从TMN观点，可以把通信会晤看作网络管理层和业务管理层的分离。
　　首先，接入会晤产生对某种新的业务会晤的需求，根据用户情况建立业务会晤，定义会晤权限。然后，用户得到直接与业务会晤交互和激活操作所需的会晤参考。当用户希望结束一个业务会晤时，可向接入会晤提出要求，切断此次业务会晤。使用会晤对象来实现代理接入权限的控制对代理本身是透明的。从代理的角度看，会晤的功能是强大的，它能对不同底层业务提供一致的接入，而且可以依据某些代理的要求建立专有的会晤，例如，它可作为基于CORBA的应用和其它应用之间的网关。
　　在这种体系结构中，很容易建立TMN所定义的管理系统。一种方法就是每个操作系统的主机管理应用都运行在CORBA上，不同对象可以用不同的编程语言实现，利用CORBA提供的透明机制互相访问。从功能观点，这些管理应用能同样满足TMN管理业务的需求。这种方法的优点是仅用1个记号就能区分管理系统和被管理系统。
2．2 TMN向TINA的过渡
　　TMN系统可以平滑过渡到TINA系统。
　　为了更详细了解程序内容，请参阅参考文献1光盘。本节讨论几种不同的过渡方法，给出OSI／CORBA网关的一些细节，说明如何在传统的框架中实现CORBA的互操作，以及包含DPE业务的基于CORBA的TMN结构。
　　（1）从TMN向TINA过渡的方法
　　为了实现从传统TMN向TINA的平滑过渡，必须有一个渐进的过程，所以，基于TMN的系统和基于TINA的系统会在一段时间内共存并相互作用。
　　主要的问题是基于CORBA的应用与传统的基于OSI的应用之间如何进行互操作。为使在这二种不同的框架结构下开发的应用能相互作用，要引入一些连接。一种方法是通过在TMN组件中加上CORBA通信机制，为应用程序的开发者提供相应的透明的生成框架。这样就能从OSI域扩展到CORBA域，使二个域在一定程度上互相重迭。列出用户选择的所有商品，能更改所选某商品的数量，取消选中的某商品。在这里，网关充当CORBA管理者的虚拟代理和TMN代理的虚拟管理者，作为OSI管理者向OSI代理提出请求，并回传应答和通知。
　　现有的一些过渡方法已经考虑了这些问题，基本上包括：
　　①在GDMO信息模型的基础上，连接CORBA管理者和OSI代理。
　　②把OSI相互作用的语义加到CORBA中间件上。如下代码：
　　＜％
　　　　DbPath＝SERVER．MapPath（″ShopBag．mdb″）
　　　　Set conn＝Server．CreateObject（″ADODB．Connection″） 
　　　　conn．open ″driver＝｛Microsoft Access Driver （＊．mdb）｝；
　　　　　　　　　　　　　　　　dbq＝″ ＆ DbPath
　　　　sql＝″Select＊From Products″ ′这里的Products是
　　　　　　　　　　　　 ′ShopBag．mdb数据库的1个数据表
　　　　sql＝sql ＆ ″Where ProductID In （″ ＆ ProductList 
　　　　　　　　　　　　　　　　　　　　　　＆ ″）″
　　　　sql＝sql ＆ ″Order By ProductID″
　　　　Set rs ＝ conn．Execute（sql）
　　％＞
　　由于调用conn．Execute命令建立了1个Recordset对象：rs 则rs中的数据记录即是被选中的商品的记录。列出用户选择的所有商品，能更改所选某商品的数量，取消选中的某商品。
　　上述方法均能有效地实现向TINA的过渡，具体使用哪一种方法由重用的限制、源代码是否可得到以及现有组件的集成等因素来决定。
　　（2）作为TINA计算对象的TMN管理者／代理
　　OSI管理模型是建立在包含1组被管对象的代理概念上的，被管对象是对现实资源的描述。通过代理执行对被管对象的操作，来满足管理者的需求。代理控制被管对象的活动，改变被管对象的状态。另一方面，CORBA的运行方式依赖于包含1组对象的服务器。如放入购物袋程序、购物网页、查看购物袋网页，就是Session对象的一个很好的应用。放入购物袋程序把在本购物网页所选购的商品编号先放在1个Products数组中，使用以下命令：
　　Products＝Split （Request （″ProductID″），″，″）
　　式中Split函数能把所选中的商品编号分割成字符串数组。
　　管理者和被管对象之间都可由CORBA对象实现，它们的相互作用利用了2个接口：管理操作和通知，如图2所示。

图2 管理者--被管理者
　　（3）CORBA-OSI／CMISE 网关
　　CORBA和OSI／CMISE之间的网关允许连接2个分别使用OSI和CORBA的组件，无需作出修改。为了能更改某商品的数量，用文本框形式由用户输入，如上代码中文本框输入命令：
　　＜TD＞＜Input Type＝Text Name＝″＜％＝″Q＿″ ＆ rs（″ProductID″）％＞″ Value＝＜％＝Quatity％＞ Size＝3＞＜／TD＞
　　用Session（rs（″ProductID″）记录某商品的数量，如上代码ASP程序部分：
　　＜％ 
　　　　While Not rs．EOF
　　　　Quatity＝CInt（Request（″Q＿″ ＆ rs（″ProductID″）） ）
　　　　If Quatity ＜＝ 0 Then
　　　　　Quatity＝CInt（Session（rs（″ProductID″）） ）
　　　　　If Quatity ＜＝ 0 Then Quatity＝1
　　　　End If
　　　　　Session（rs（″ProductID″））＝Quatity
　　　　　rs．MoveNext
　　　Wend
　　％＞
　　其中Session（rs（″ProductID″））＝Quatity 是将用户确定的数量记录在Session（rs（″ProductID″）对象中。另一种是静态转换，就是为特定的模型建立网关。这种方法不够灵活，但占用资源少。网关可以用于特定模型，也可以用于一般模型。网关的实现需要对象模型从GDMO／ASN．1转换到CORBA／IDL，包括CMIP协议数据单元向CORBA发出请求及CORBA如何返回响应和通知。这样经Split处理后，Products就成为所选中商品编号的1个数组。对于在OSI框架中开发的TMN应用，可以直接在框架中引入CORBA通信机制来生成支持CORBA的组件。这种技术的优点是能利用已有的投资。把用户选择的所有商品记录在Session对象中。CORBA管理者对象可以在代理端通过一般的CMISE接口来访问被管对象，或者通过由被管对象类的GDMO规范生成的专用接口来访问。管理者使用DPE服务中的名字服务来建立特定名字和对象参考之间的关系，使用通知服务向管理者传递通知信息，并提供了信息模型服务来描述GDMO／ASN．1信息模型。

图3 基于CORBA的系统成分的相互作用
　　（5）TMN中的DPE服务
　　现已定义了几种DPE服务来支持管理
　　①消息服务。CORBA2．0通信模型是同步的，它基于远程调用，而CMISE／CMIP原理是基于异步模型的。OMG正在制订新的CORBA规范，以支持实时异步请求，避免阻塞，要求能自动处理调用，支持优先权管理。如放入购物袋程序、购物网页、查看购物袋网页，就是Session对象的一个很好的应用。CORBA名字服务维系了对象参考和逻辑名之间的关系。名字是CORBA里提供的独立的位置参考。
　　 ③通知服务。TMN要求有一种事件过滤功能，而CORBA的事件服务不提供这种功能。为此，TINA增加了通知服务，它利用了CORBA的推进模型，包含了过滤功能。传输过程如图4所示。

图4 通知服务体系
　　通知服务器负责管理通知方法，它接受通知发送端和接端的注册，当发送端想传播1个通知，就从信道激活1个推进操作，由信道处理需要此通知的接收端列表，如果能与过滤器匹配，则继续向前传送。④信息模型服务。把用户选择的所有商品记录在Session对象中。它给出组件的属性、名字、类型及所包含的对象。它在GDMO模板和接口库中的IDL定义间建立连接。
3 结束语
　　新业务的不断出现必然要求通信网络具有开放性，网络管理者和被管对象的实现要求更高的灵活性。基于CORBA的TINA能够满足电信运营者对网络结构的要求，并能保证现有通信网在正常运转的同时逐渐过渡到TINA，具有极其广泛的应用前景。
李欣（南京邮电学院信息网络技术研究所210003）
舒斐（南京邮电学院信息网络技术研究所210003）
张顺颐（南京邮电学院信息网络技术研究所210003）
参考文献
［1］Vinoski S．CORBAIntegrating Diverse Applications Within Distributed Heterogeneous Environments．IEEE Comm．Mag．1997；35(32)
收稿日期：1999－12－26
