计算机工程
COMPUTER ENGINEERING
1999年 第25卷 第8期 Vol.25 No.8 1999



基于颜色的图象检索技术
凌玲
摘要：论述了基于色彩的图象检索方法，对颜色空间的选择、颜色的量化以及颜色的相似测试进行了讨论。在此基础上，对两种典型的基于颜色的图象检索方法的特点、关键技术的实现方法以及存在的根本问题进行了详细的分析和比较。 
　　Mel- 伸缩对数倒频谱系数 (Mel-scaled frequency Cepstral coefficients-MFCCs) ：这是音频数据经 Z －变换和对数处理后得出的结果。以往对图象数据的管理是从图象中抽取属性信息，并在关系数据库中把它们当成格式化数据，对图象的检索仅局限于对图象属性的字符串匹配上，这种基于属性的方法要求用户能精确定义查询内容非常困难。考虑到基于内容的图象检索方法具有传统的文本检索技术无法比拟的优越性，因此，研究和开发基于内容查询的图象数据库是当今研究的热点。 
　　由于颜色是人识别图象的主要感知特征之一，因而基于颜色的查询是基于内容的图象检索中最基本的方法。迄今为止，基于内容检索的图象数据库的典型代表主要有： IBM 的 QBICTM ，哥伦比亚大学的 Visual SEEK 图象查询系统，密执根大学和 MIT 多媒体实验室开发的 Virage 系统等，其应用领域涉及多媒体数据库、电子图书馆、商标管理、医疗图象管理、公安系统、卫星图象管理等领域 [1] 。下面就基于颜色的图象检索中涉及的关键问题以及检索方法进行论述和比较。 
1 颜色模型的选择 
　　颜色是图象内容组成的基本要素，选择一个符合人眼视觉特性的颜色模型是利用颜色特征进行图象检索的关键。 

图1 Mel-伸缩对数倒频谱系数
2 基于内容的音频分析 
　　自然界的声音极其广泛，如音乐声，风雨声，动物叫声，机器轰鸣声等等，要从数以千万计的音频数据中提取所需的信息，常规的基于文本检索方法是行不通的，这就需要新的技术。 HSV 颜色模型与人的视觉特性比较接近，它由色度 H 、饱和度 S 、亮度 V3 个分量组成。由于这种模型具有线性伸缩性，可感知的色差与颜色分量的相应样值上的欧几里德距离成比例 [2] ，因此 HSV 颜色模型比 RGB 颜色模型更直观、更容易接受。 
　　通过非线性变换可将 RGB 颜色空间 r、g、b值转换到 HSV 空间的h、s、v值 [2] ： 
设 v'=max(r,g,b) ，定义 r',g',b' 为： 
　　（1）
则
　　（2）
其中 
　　（3）
式中， r,g,b ∈ [0 … 255] ， h ∈ [0 … 360] ， s ∈ [0 … 1] ， v ∈ [0 … 1] 。该颜色空间中两种颜色c1 =(h1,s1 ,v1) 和 c2 =(h2 ,s2 ,v2 ) 之间的距离为 [3] ： 
d(ci ,cj )=[(vi-vj) 2 +(sicos hj-sjcos hj )2 +(si sin hi -sj sin hj) 2 ] 1/2　　(4) 
两颜色之间的相似度为： 　　(5) 
2 颜色的量化 
　　由于人眼对视觉的分辨能力有一定局限性，因此对整个颜色空间进行适当的量化是必要的，即选择一定代表性的颜色，丢弃那些无显著视觉意义的信息，从而使图象的检索过程能节约大量的计算时间。 
　　可将 H、S、V3个分量按照人的颜色感知进行非等间隔的量化，即把色度 H 空间分成 8 份，饱和度 S 和亮度 V 空间分别分成 3 份，并根据色彩的不同范围进行量化，把量化后的 3 个颜色分量合成为一维特征矢量： 
l=HQs Qv +SQv +V　　(6) 
其中，Qs( 分量 S 的量化级数 )=3 ， Qv( 分量 V 的量化级数 )=3 。因此 (6) 式可表示为 
l=9H+3S=V　　(7) 
这样，根据上式， H 、 S 、 V3 个分量可获得 72 柄 (bin) 的一维直方图 [2] 。 
　　上述问题也可采用模式识别中的聚类方法对颜色空间进行量化处理 [4] 。把颜色空间所有的颜色按要求量化为 N 种颜色，用统计法寻找 N 个最优的初始聚类中心，即寻找颜色空间中 N 个最有代表性的颜色值；然后用迭代的方法，把颜色空间中的所有颜色按最小距离准则向 N 个聚类中心聚类，即可得到与各聚类中心感知距离最邻近的 N 个聚类域 s i (1 ≤ i ≤ N)-- 颜色集合；最后使用每个颜色集合 s i 的质心 cen(s i ) 来形成新的 N 个聚类中心，即 N 个颜色集合的代表色。这里 
　　(8) 
式中， x 为 si 颜色集合所包含的一种颜色， count[x] 为 x 在图象库中出现的次数， Ni 为 si 颜色集合所包含的颜色在图象库中出现的总和。 
3 颜色的相似测度
　　用数值来有效表示两幅图象在颜色上的相似程度，这便是颜色的相似度量问题，它是直接影响检索效果的重要环节。在模式识别技术中，特征的相似度量均采用距离法。关于距离度量方法可采用绝对值距离、欧几里德距离、二次距离度量方法 [5]。
　　绝对值距离形式如下： 
　　 (9) 
　　欧几里德距离形式如下： 
　 (10) 
　　其中， Hq 为待检图象颜色直方图， Ht 为库中图象颜色直方图， hq [ci] 和 ht [ci] 分别表示待检图象和库中图象第 i 种颜色象素的频数。 Muscle Fish 公司即应用此种方法，先将带标识的数据加窗处理，对每帧数据提取音高，响度，亮度，带宽属性，而后对属性序列计算其均值，方差和自相关值，加上能量共 13 个特征，最后采用平均矢量量化的方法将其分配到矢量空间的特定区域中。目前克服这一缺陷的方法是采用直方图二次距离法，即在欧氏距离计算中加进颜色相似矩阵，其形式如下 [3] ： 
D(Hq,Ht)=(Hq-Ht)T A(Hq-Ht)　　(11) 
式中， An×n为颜色相似矩阵
　　(12)
　　其元素 sij 表示颜色ci和 cj 之间的相似度，如 (5) 式计算所得。它可以通过对需要的关键词和填充模型进行 HMM 训练，以使其与每一个单词匹配。 
4 基于多种主色调扩展的图象检索方法
　　一幅图象的主色调能够反映该图象的基本概貌，因而可作为查询的主要特征进行相似性匹配，考虑到人眼对颜色的认知在一定范围内具有模糊性，在选择主色调时也往往带有一定的随机性和个人的主观因素。因此，对主色调进行扩展是弥补上述缺陷造成漏检的一种有效的方法。 
　　采用正态分布拟合法可以对指定颜色进行扩展。设用户指定颜色为 l0 、模糊度为 σ ，则经过正态分布拟合后的直方图特征 f (l) 如下： 
　　（13）
　　可以证明在这个范围内的颜色都可能与用户实际需要的颜色相关，因此可以按上式来确定用于检索的颜色扩展值。 
　　(1) 关键词识别 
　　关键词识别是指在给定音频数据中查询少量特定的单词或短语。比如给定一段 " 雨声 " 数据，查找与 " 雨声 " 相似的音频数据。 
　　音频技术已研究了 20 多年，但实用的搜索引擎还需时日。数据库建立以后就可以进行音频信息检索。采用图象分割的直方图检索方法则可以有效地提高图象检索的准确性[3]。 
5 基于图象分割的直方图检索方法 
　　颜色直方图虽然能较好地反映图象中各种颜色的频率分布，但没有保留各象素颜色的空间分布信息，这显然与人的视觉感应不符，即误检率较高。为此，可采用基于图象分割的直方图检索方法[3]予以解决。 
　　方法一是对图象中所包含的对象的边界进行提取 ( 即提取图象的纹理特征 ) ，采用 Snake 边界提取算法、手工交互相结合的方法以及采用小波变换的方法提取图象纹理特征，然后对每个对象所包含的颜色用跨距离扫描线算法进行直方图统计，最后采用距离法对待查图象和库中图象进行相似性匹配。实验结果表明：采用对象分割比整幅图象进行相似检索精度提高了 7% ～15% 。 
　　方法二是将一幅图象简单地划分为 n × n 个子图象 {P1， P2 ，…，Pn2 } ，然后分别计算每个子图象的直方图，这样，整幅图象的直方图就等于各子图象的直方图之和，即： 

根据直方图可得空间距离的度量式为： 

　　可见，基于图象分割后的直方图距离的计算精度要比对整幅图象的直方图距离计算的精度要高，从而有效地提高了检索精度。但由此要为计算相似性距离付出较高的代价，且越精确的距离公式其计算代价也越高。因此如何高效准确地查询用户的图象数据是图象检索方法的主要目标，采用多阶段的 " 粗粒度 " 和 " 细粒度 " 相结合的相似匹配检索方法则不失为一种提高检索效率的有效方法。 
6 结束语 
　　基于内容查询的图象数据库把图象处理、图象识别、数据库 3 个领域的技术成果结合起来，是一个很有前景的发展方向。图象数据库是图象处理技术和传统数据库技术的应用，又为图象处理技术提供了有力的支持。对此有很多高效的算法，这里就不赘述了。如果能很好地解决这些问题，必将使图象检索技术产生一个飞跃。 
2.2 音频分类与检索方法 
　　在音频检索应用中，常需要对音频数据分类