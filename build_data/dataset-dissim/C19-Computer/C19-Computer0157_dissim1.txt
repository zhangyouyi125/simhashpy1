微型电脑应用
MICROCOMPUTER APPLICATIONS
2000　Vol.16　No.1　P.60-61



浅析“图层”在建筑CAD中的应用
桂丽萍　肖忠
摘　要：本文从CAD的组成、应用等多方面阐述了图层的功能与作用，对广大CAD爱好者提高CAD的认识水平与应用能力有一定的指导意义。
关键词：图层　CAD　图形　功能
Abstract：This paper discusses functions of graphical laye rs in view of CAD's composition and application. It is helpful to the CAD profes sionals and amateurs.
Keywords：layer　CAD　drawings　function▲
一、图层的概念
　　自从有了CAD(Computer Aided Design计算机辅助设计的缩写)“图层”这个概念就一直困扰着我们，它看似抽象、高深，却又具体、实用。含义丰富，功能强大，不会用“图层”的人也能用CAD进行设计，但对CAD的认识一定还处在一个较低的水平上，使用CAD工作时会感到操作步骤多、修改难、工作量大等；如果能深刻领会“图层”这一有着特殊意义的概念，会发觉工作立刻变得简单、方便、快捷起来，设计水平也会随之大幅提高，随着各种CAD绘图软件诞生、发展，“图层”的应用越来越广泛，并日益显示出其无比强大生命力，今天可以这么说，没有图层就没有CAD。
　　“图层”是CAD中性质相近、相同或者逻辑意义上相关的图形对象的集合。■
作者单位：张国珠(杭州电子工业学院 310037)
参考文献：
［1］张宏 标准试卷自动处理系统概述，管理信息系统，1997.7
［2］左晓明，顾锋，计算机辅助制图试题库管理系统的研制与探讨，江西科学，Vol.16增刊
收稿日期：1999-8-20
。将这些透明纸叠加起来，就得到最终的图形。它是各种CAD绘图软件进行设计的基本保证，正确、合理地使用图层，是发挥如AutoCADR14、Photoshop、lightscape、天正等CAD软件巨大功能的重要标志，也只有正确的使用了图层，才能将各类绘图软件的强大功能发挥得淋漓尽致。
二、图层赋予图形特定的含义
　　CAD给以往的手工设计带来了巨大的变革。
　　查询是否方便快捷，首先取决于数据库中表的字段的设置是否合理。例如，我们在图纸上画了一个正方形，如果不作任何文字说明的话，谁都无法知道这一方形代表的是什么。而工程制图试题库的信息主要是图形，信息量很大。
　　在以上的方法中，使用最频繁、而最方便的就是“图层”。因为一旦我们将这一正方形画在一个叫做“柱子”的图层上，那么即使不作任何文字说明，我们也知道这个正方形就是一根柱子。许多建筑CAD专业软件如天正、ARCHT、中望等，当程序要对“柱子”进行编辑操作时，通过“柱子”图层来判断哪些线条是“柱子”，并可对柱子进行复制、删除、交线处理等操作。
三、查询功能的实现
　　在题库中设置查询功能的目的是使用户可以迅速地掌握整个题库的情况，人工组卷时可以方便快捷地找到所需的试题。毫无疑问，工程图纸上的每一条线，都代表特定的意义。但点阵图形所占存储空间比矢量图大得多，上千道试题的图形如果采用点阵格式必将占居庞大的存储空间，使运行速度降低；再者点阵图形无法修改，题库只能设计成封闭型，给题库的维护和使用带不不便。
　　为了排版打印，首先在录入图形试题时要按图形大小确定其在一张试卷中所占的图幅大小，为方便排版，本题库按试题的复杂程度和试题本身的需要确定了三种图幅大小：四分之一页、二分之一页、一页。每次变换，都要先设置线型再画线，这样在进行设计时，既费力又费时。要想使绘图方便快捷，最佳的解决途径就是使用“图层”。
　　首先，可根据不同的线型来创建相应的图层。例如，我们建立一个图层，将这个层设置好线型之后，再要画某种线型时，只要把线条画在相应那种线型的图层上，所有在这个图层上线条都被赋予了这种线型的属性，这样假如我们要画不同的线型，只要简单的把当前图层切换为具有此种线型的图层即可，这样绘图的速度即可大大的加快。此外如果想改变某一类线型，只需改变图层的线型设置，那么该图层上的所有线条就立即改变过来。我们设置了试题编号、试题章节、试题特征、试题难易程度、答题参考时间、试题图幅大小、优先权等字段。
　　题库选择目前最流行的可视化编程语言Visual Basic 6.o进行编程，使用OLE控件，可以同步将与Access数据库连接Auto CAD图形试题在VB程序中显示。
　　结合“图纸空间”这一功能，我们更可以在一张图纸上同时呈现多个图形，而这多个图形却表现对同一实体的不同视图，如我们可以设置上图为总图，而左下图为墙体，右下图为柱子的布置图。利用图层在图纸空间的特性，我们只需一个总图，就可以十分快捷的通过“冻结”当前视窗的某些图层来达到此目的，却不影响当前视窗的这些已关闭的图层在其它视窗中的正确显示。而以往手上工绘图却需要分别画出这三幅图。由此可见我们减少了许多重复的工作。
　　排版算法：打开试卷文件，读出试题总数以及每道试题试题编号和图幅大小。少则上千个面，多则上万个面，还需要给它们贴上各种材料，才能做最后的渲染。
　　通过比较各种数据库，我们选取了Access97数据库管理系统来管理Auto CAD中生成矢量图形试题，在Access97数据库中以OLE对象的方式插入图形试题，通过操作Access数据库中试题的非图形信息管理Auto CAD中的矢量图形，从而解决了矢量图形不易管理的问题。
　　这时，如果我们利用“图层”功能，即在建模时分图层建立实体(不同的实体建立在不同的图层上)，把要贴同一种材料的实体再放到同一图层上，那么我们只需按图层贴上材料，该图层上的所有实体就一次性统统都贴上材料了，尤其是内容复杂、实体众多、使用材料量大的建筑物(或室内设计)效果图，更能充分发挥图层的作用，更能体现图层易编辑、易修改、易管理等许多的优越性。
　　至于对效果图作最后润色，最常用的软件photoshop也把图层作为一个特色功能，如我们对一幅效果图作修改时，常常先在层中复制它，然后在这复制层中作各种修改，如果修改的不满意，只要简单地将一复制层拖到垃圾桶中即可，而对原图形丝毫无损，而许多特殊效果，也制作在效果层中，而不损坏原图，这样修改也方便，更不会影响别的层上的图形。特别是在photoshop5.0中更是增加“文字图层”这一功能，在“文字图层”中我们可以对文字做许多特殊效果的处理，利用文字图层中Effects(制造效果)功能，我们可以将在以往旧版的photoshop中需要许多步骤才能完成的文字特殊效果如文字阴影一步就“搞定”。
　　另一极具特色的制作效果图的软件“渲染巨匠Lightecape”也充分利用“图层”这一概念，首先可以选择性的开关图层，这样，可以大大简化准备阶段的表面处理过程；另一方面，使用图层作为保存求解阶段多种设计方案的一种方式。例如，如果你想看看一个房内不同的灯光布置的效果，可以将不同的方案放置在两个不同的图层上，然后，使用不同的图层选项来分别进行渲染得到不同的效果图以作比较。
六、结束语
　　正是看到了图层具有如此强大而方便的功能，而且具有巨大的潜力，因而软件开发商对“图层”这一概念越来越青睐，而越来越多的绘图软件把“图层”当做一个必不可少功能，而已有的软件把“图层”这一功能越来越强化，新开发的绘图软件中，“图层”将扮演越来越重要的角色。■
作者单位：桂丽萍(华南建设学院计算中心 510405)
参考文献：
［1］George Omura 《Auto CAD 14 从入门到精通》电子工业出版社　1998年3月
［2］广州德克赛诺科技有限公司 《德赛渲染巨匠 Lightscape 用户手册》
［3］Deke McClellcmd 《Photoshop 4 实用大全》 中国水利水电出版社 1998年4月
收稿日期：1999-9-28日
