计算机工程
Computer Engineering
1999年　第25卷　第9期　Vol.25 No.9  1999



基于Web的网络管理技术研究的设计
吴　刚　白英彩
　　摘　要：首先讨论了WBM的管理特点和目前的两种工业管理标准：WBEM和JMAPI，然后提出了一种基于WBEM的网络管理系统设计实现方案(WebNMS)，重点阐述WebNMS实现的体系结构和系统设计实现中的一些关键要点．WebNMS提高了网络管理的效率，为复杂Intranet的网络管理提供了更多的便利和更大的灵活性．
　　关键词：网络管理系统；WBM；WBEM；JMAPI；Java语言
Research and Design of Web-based Network Management System
Wu Gang Bai Yingcai
(Golden Bridge Network Engineering Center, Shanghai Jiaotong University, Shanghai 200030)
　　Abstract　This paper firstly discussed the management features of WBM and two primary industry management standards: WBEM and JMAPI. Then a design scheme based on WBEM standard to implement the Web-based Network Management System (WebNMS) is presented in detail. Emphasis lies on WebNMS system architecture and several key points in the process of the system implementation. Definitely, WebNMS has greatly promoted the management efficiency and provided more convinience to flexible management of complex network systems.
　　Key words　Network management system; WBM; WBEM; JMAPI; Java programming
　　国外网管产品具有较强的性能，其价格也相当高，一般通常为几万美元。这样的价格对国内的一般中小企业是相当难于承受的。针对这一特点，我们开发了GoldView中文网络管理系统。该系统是一套面向中小型企业的基于PC Windows平台的网络管理系统，能够管理具有200个主机节点的企业网络，其设计基于Internet TCP/IP协议的SNMP标准，实现了ISO 7498所规定的网络管理主要的5大管理功能域。因此，MA&C 系统中的Agent对象是一个五元组A_Object＝＜Aid，A，M，C，I>，其中，Aid 是 A_Object 的唯一标识符，与A_Depiction 中的Aid 相对应；A是A_Object 具有一定数据结构的私有存储区域，为属性集，与 A_Depiction中的F、S和R相对应，如Agent对象类型；M是 A_Object 的操作集合，定义了该类对象为完成其任务而必须具有的自主行为特性；C是A_Object 的协作操作集，定义了当条件符合时，该类A_Object触发协同请求时或该类A_Object被请求协同工作时的操作；I是A_Object与网络和其它A_Object 的接口操作。
　　GoldView NMS也是不断完善和发展的。其中，基于Web的网络管理模式WBM是网络管理系统目前发展的主流方向之一，而且，它也同目前Intranet发展方向相一致，是企业网管理发展的必由模式，具有广泛的市场需求和前景，应当大力发展。
1 基于Web/Java的网络管理模式WBM的特点 
　　Intranet企业网具有复杂的异构分布式特性，这大大增加了网络管理的工作量，给网络管理员真正管理好Intranet带来了很大的困难。传统的网络管理方式已经不适应当前网络发展的趋势，不能够实现对这种复杂的企业网实现高效和灵活的管理。
　　作为一种全新的网络管理模式，基于Web的网络管理模式WBM可以允许网络管理员使用任何一种Web浏览器，在网络任何节点上方便迅速地配置、控制以及存取网络和它的任何组成部分。WBM从出现伊始就表现出强大的生命力，以其特有的灵活性、易操作性等特点赢得了许多技术专家和用户的青睐。
　　其特点可归结为：(1) WBM融合了Web功能与网管技术，为网络管理员提供了比传统工具更强大的能力。本模型对通信服务的可靠性要求较高，因而采用流式套接字。
*基金项目：国家自然科学基金、浙江大学曹光彪高科技基金
作者简介：余春艳(1976～)，女，研究生，主要研究方向为CSCW、MultiAgent、智能CAI
作者单位：浙江大学人工智能研究所，杭州　310027
参考文献
1Koch M.The Collaborative Multi-user Editor Project　　Iris.TUM Info XI,1995-08 
2林守勋,林宗楷,郭玉钗等.多Agent协同工作环境MACE.计算机学报,1998,21(2)：188-192
3齐英剑,赵志勇,齐英辉.计算机支持的协同工作及系统模型研究.第一次全国 CSCW 学术会议论文集,北京:电子工业出版社,15-19 
收稿日期：1998-12-24
。
2　WBM网络管理工业标准WBEM和JMAPI
　　目前基于Web的网络管理模式有两种实现方式：
　　一种是每个管理设备上有一个小型的Web 服务器，浏览器既可以直接查询该服务器，也可以发送/接收SNMP方式的请求/响应。
　　另一种方法是为浏览器开发应用程序接口作为中介，该程序接口可以将访问请求转换为管理设备可以理解的指令，从而不必为每个管理设备增加支持HTTP的能力，避免了复杂化和可能的安全问题。其特点是：学习性、知识性、自主性和相互合作性。
　　上述两种实现方式区别在于这些方法的执行地点和对浏览器能力的要求。WBEM(Web-Based Enterprise Management)主要是基于第一种方式，即扩充修改浏览器，而JMAPI(Java Management API)则主要是构造浏览器应用程序接口。
2.1 JMAPI
　　为了能够利用功能强大的Java计算环境解决系统管理的问题，SUN公司扩充了Java基础类库，开发了专用的管理类库JMAPI。JMAPI是一种应用编程接口，是可扩充对象和方法的集合体，可以用于跨越一系列不同的异构操作系统平台、系统体系结构和网络传输协议，便捷灵活地开发无缝集成的系统、网络和服务管理应用。JMAPI侧重于解决分布式系统管理，因此根据不同的环境进行伸缩是关键所在。为了通过网络编程套接字Socket来实现多点传输，系统采用主从方式，通过教师Agent软件模拟多点传输方式，每个参与多点传输的学生Agent以及教师Agent都有一个成员状态栏，且学生Agent只需与教师 Agent进行连接，教师Agent启动监控功能模块检测成员的状态，并动态维护成员状态栏，以此为教师Agent的广播功能提供支持，各学生Agent进行操作时，只需向教师Agent发送数据，教师Agent根据成员状态栏中的信息转发信息包。其次，Java虚拟机驻留在要管理的关键平台上。
　　管理对象是JMAPI 应用程序开发的核心。为了通过网络编程套接字Socket来实现多点传输，系统采用主从方式，通过教师Agent软件模拟多点传输方式，每个参与多点传输的学生Agent以及教师Agent都有一个成员状态栏，且学生Agent只需与教师 Agent进行连接，教师Agent启动监控功能模块检测成员的状态，并动态维护成员状态栏，以此为教师Agent的广播功能提供支持，各学生Agent进行操作时，只需向教师Agent发送数据，教师Agent根据成员状态栏中的信息转发信息包。
　　JMAPI结构包括：支持Java的Web浏览器、管理对象服务器和器件。支持Java的Web浏览器让管理者发出管理操作，这些操作可以从浏览器上交互地进行，也可以由标准的应用程序(可以是图形或者命令行的用户界面)调用。管理对象服务器为应用程序提供了管理对象的实例，包括管理对象工厂、数据库和HTTP服务器。器件则是被管理的资源，从大型服务器到单个网络部件，Java终端和DNS服务器都可视为一个器件。虽然这些设备执行本质上不同的功能，但都可以通过管理对象服务器进行管理。每个器件都必须安装JMAPI代理软件。JMAPI总策略是通过动态下载代理将管理推给管理设备。
　　JMAPI是一个完整的网络管理应用程序开发环境，主要提供了：厂商需要收集的完整的特性清单，可生成资源清单表格、图形化的用户接口；访问SNMP的网络API；主机间远程过程调用；数据库访问方法。在理论上，JMAPI的应用程序在整个Web上将以同样的界面和功能灵活地实现互操作。它注重于构造管理工具的软件框架，并尽量采用已成熟的技术，如提供了使用SNMP协议的接口，并充分利用了业已广泛接受的Java语言本身所具有的优良特性，如RMI和安全机制。
2.2 WBEM
　　WBEM标准于1996年7月推出。MA&C系统支持3种协同工作：个别辅导、群体指导和自由讨论。WBEM的核心是超媒体管理框架(HMMA, the HyperMedia Management Architecture)，由协议、管理机制和对象管理者三者组成。虽然它是寻求解决当前一些管理应用的失败之处，它还是"兼容和扩展"了当前的标准，如SNMP、CMIP 和DMI，因而可以集成不同管理平台提供的管理服务。它试图利用WEB技术在不影响网络基本结构的前提下实现网络和系统综合管理。
　　WBEM的设计目标是：(1) 提供的新框架可以覆盖传统的管理：配置、故障、计费、性能、安全管理以及操作管理和规划；(2) 建立在Internet传输、安全和配置的标准之上；(3) 为系统、网络和应用提供统一的建摸和管理数据模型；(4) 根据管理元素集合的数目巨大和分布式的特性，提供一种可伸缩的解决方案。
　　该规范采用HTML和其它Internet数据格式来表示管理信息，并使用HTTP协议。
　　此项标准是面向对象的， 它能够将从网络设备、系统平台和网络应用程序等多种系统资源、以多种网络管理协议(SNMP, CMIP, DMI)获得的管理数据抽象化，加强了系统管理的能力并且使管理信息以单一的协议形式出现。WBEM被认为是"兼容和扩展"了当前的管理标准SNMP、DMI和CMIP，而并不是取而代之。WBEM实际上更强调"公司管理"胜于"基于Web"，虽然WBEM以Web工具的形式出现，但其真正目标是强化对于网络元素和系统的管理，包括网络设备、服务器、桌面和应用程序。
3　结束语
　　基于MutiAgent和CSCW的多媒体教学系统支持教师和学生之间以及学生之间的协同工作和信息交流过程，不但为学生提供了一个生动活泼、社会化和个人化并存的学习环境，而且大大地提高了学生和教师在完成教学工作任务过程中相互合作和信息交换的质量，适应了信息化社会对教育的需要。
　　1998年6月，DMTF开始接手WBEM进一步标准化的工作，从而增加了可互操作管理技术的支持力量。DMTF在WBEM的基础上，提出了CIM(Common Information Model)，试图融合不同标准下的工具，或至少使它们能够互操作，从而建立跨越系统、网络、应用乃至Internet的综合管理。
2.2　MA&C系统Agent的通信
　　由于MA&C是一个基于MultiAgent和CSCW的多媒体教学系统，而一个协同系统中，通信是基础，合作是形式，协调是关键。所以通信层的实现是多Agent系统中的一个关键问题。学生Agent包括两部分应用子模块：一部分用于支持学生的学习活动，另一部分用于支持学生对当前的学习状况进行自我评测，主要是通过与评测库的交互来确定学生的知识水平和错误所在。CIM想利用面向对象的管理技术并相信新的模型会因DMI和其它数据提供者如SNMP、CMIP的广泛应用而得到普及。MA&C系统支持3种协同工作：个别辅导、群体指导和自由讨论。 
3 Web管理模式系统的研究工作
　　基于Web网络管理系统WebNMS以已经研制完成的SNMP网络管理系统GoldView NMS系统为基础，设计目的是为了实现以Web方式方便和灵活地实施对企业网络计算环境的管理。系统以WBEM作为研究目标，采用了实现WBM Server代理的解决方案。将一个基于Web的服务器加载到管理工作站(代理服务器)上，网络用户使用Web的超文本传输协议HTTP，通过Web浏览器和代理工作站通信，而管理工作站则仍然使用SNMP协议和终端网络设备通信。这种代理解决方案继承了传统的基于工作站的管理系统的优点，代理服务器和所有的网络终端设备通信仍然通过SNMP协议，因而这种方法完全可以实现与只支持SNMP协议的设备无缝集成协同工作。
3.1 WebNMS系统实现的体系结构
　　图1为WebNMS管理系统的体系结构图。从中可以看出，具有Java功能的Web浏览器、WBM管理服务器和被管理网络资源的管理协议代理Agent 3部分构成了整个网络管理系统。Java使能的Web浏览器为网络和系统管理员执行各种管理任务提供了灵活、一致的操作用户接口，被管理的网络设备和资源中安装有相应的管理代理SNMP Agent，通过代理与Web管理服务器交换管理信息。




图1　基于Web的网络管理系统WebNMS体系结构模型
　　WBM管理服务器是整个系统的管理核心，实施具体的浏览、查询、监控和配置等管理任务。它由4部分组成：(1)Web Server负责同Web浏览器通信，接收和响应浏览器的请求，并且与管理服务集模块所提供的各种服务交互，是实现Web交互方式的基础；(2)管理服务集提供对网络和系统进行全面和有效管理的各种服务，如网络拓扑图的自动发现和图形显示、网络配置、系统性能、故障检测和恢复、安全措施、系统端口和帐户计费等传统的网络管理功能，还可为管理用户提供多种高效的管理工具，为在此基础上集成更多的其它系统服务提供开发的接口；(3)管理信息库集中存储从网络代理所收集到的网络设备管理参数信息，如路由器的路由表、端口数据流量和数据报文的丢失率等信息，这些是实施管理措施的依据，它以层次的树图来组织，查询的效率对系统的性能有很大的影响；(4)管理通信协议SNMP gateway接口完成HTTP方式的管理服务原语同SNMP原语间的信息转换，以SNMP协议方式实现与各个SNMP Agent的网络通信，收集被管理网络设备的管理服务信息。
3.2 WebNMS系统实现的一些要点说明
　　(1)采用Java作为开发语言
　　Java是一种解释性程序语言，具有小型化、解释执行、高性能、实现简便、多线程、同步技术、垃圾收集和面向对象等优良特点，并且，将网络安全性能在技术设计中得到实现，安全特征是Java语言和其运行环境所特有的属性。
　　Java具有固有的Web能力，完备独立的Java applets能够被传送到浏览器并且在浏览器所在的本地机上运行。Java applets具有浏览器强制安全机制，可以阻止其访问本地系统资源并且对网络资源的访问也进行限制，对于WBM管理动态数据是一种行之有效的技术。与静态链接的HTML不同，Java能够用于处理各种任务，诸如显示网络运行画面，打印复杂图片等，并且能实时表示从轮询和陷阱得到的更新管理信息，添加动态图象。
　　(2)Web服务器同管理服务的通信方式：Java Servlet
　　CGI定义了Web服务器同外部程序交互的标准与规范，CGI程序通常用解释性语言，如UNIX shell scripts 或 PERL，也可用编译性的语言如C编写。而服务器小件Java servlet是Web服务器调入和激活的Java类，处在服务器端，与浏览器端的应用小件相似，它使得Web服务器具有信息交换的功能，又不损失速度与可靠性。
　　Java Servlets和CGI程序都用于服务器的功能。但是同CGI相比，Java Servlet性能更好，功能更强。Servlet可以同服务器运行于同一进程，一旦servlet装载入服务器，就一直保持。因此，仅被调用一次，而不是在每次请求时都要调用，从而消除了不必要的响应客户请求的启动、初始化时间，大大改善了服务器的执行性能。一般的协同系统中，按照交互合作方式和协同者的地域分布而从时间和空间的概念来界定，大致有以下4种协同方式：同步模式、分布式同步模式、异步模式、分布式异步模式。
　　因此，WebNMS系统中Web服务器和管理服务集之间的信息通信采用了Java Servlets来高效实现。
4　总结
　　Web网络管理模式WBM的研究工作倍受注目，从诞生之日就成为研究者关注的焦点，它为企业Intranet复杂网络环境的管理注入了更多更大的活力，提供了更方便的网络管理机制。
2.2　MA&C系统Agent的通信
　　由于MA&C是一个基于MultiAgent和CSCW的多媒体教学系统，而一个协同系统中，通信是基础，合作是形式，协调是关键。Agent之间的通信一般有4种方式：第一种是 - 私线 -(private-line) 方式，即Agent之间进行保密性良好的直接通信；第二种方式是 - 黑板-(blackboard) 方式，即把信息放在广泛可取的 - 黑板 - 上，实现广播通信；第三种方式是 - 预定点 - 方式，通信的Agent将信息放在一个约定好的位置，实现间接通信；第四种方式介于二和三之间，Agent进行分组，每个组都有相关的黑板。考虑到KQML(Knowledge Query and Manipulate Language) 现已成为定义Agent之间通信语法和语义规范的主体通信语言的事实标准，设计了与 KQML 语言兼容，并且适合C++ Builder 编程环境下使用的特定Agent通信语言，该语言可形式化地表示成为一个四元组：{动作，源Agent，目标Agent，内容}