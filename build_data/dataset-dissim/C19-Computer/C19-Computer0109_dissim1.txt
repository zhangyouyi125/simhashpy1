计算机应用
COMPUTER APPLICATIONS
1999年 第19卷 第9期 Vol.19 No.9 1999



基于Internet的远程会诊实时系统的设计与实现
冯天亮　尚文刚　梁海华　陈力
　　摘　要　本文介绍基于Internet网络环境下，远程会诊实时系统的设计以及在这一网络环境下远程会诊的实现方法。
　　关键词　远程会诊,Internet，实时系统
1　前言
　　目前，我国网络建设势头非常迅猛。国家重点金卫工程中，一个重要项目是远程医疗，该网络采用卫星专用通信网VSAT 和国家共用数据通信网CHINADDN 两种通信信道。由于完全的CORBA包括CORBA core和CORBA Compliance points，一些必需的部分(也即最小内核)为包括ORB Interface、BOA、IR、IDL Mapping在内的CORBA Core。这样的投资对大多数的县及县以下的医院是一个不小的数字。因此，在Internet 环境下建立适合中小型医院使用的远程医疗会诊系统，在我国现阶段经济条件下有非常重要的意义。
　　所谓视图变量就是MIB变量是在“数据库”化后的外模式下的视图。四大互联网比较大的缺点是远程通信速度都比较低，在这样的网络环境下实现图像、声音实时传送是有一定的困难。因此，本研究的目的是在传送速度比较低的Internet网络环境下实现图像、声音实时传送，及在这一网络环境下的远程医疗运行模式。IPL的过程若是有同级，高级用户正在访问某一域时用户等待。
　　. 医疗专家咨询系统，提供临床学科的基本情况、常见病的诊断方法，以及该学科专家的基本情况、专长，及请求会诊时的联系方式。
　　. 远程会诊系统，提供请求会诊客户方与服务方之间的双向实时交流，会诊双方可以进行文字、图形、声音的双向传送。
2.2　硬件组成
　　硬件是一个基于Internet下及与之配套的远程会诊所需的硬件。
　　Internet网 即是能提供ISP 接入服务的网络平台。
　　医疗专家咨询系统 建立会诊专家资源的Web服务器采用 HP-E500、内存 128M 、硬盘4GB的服务器。 
　　远程会诊系统 由NetMeeing服务器、专线接入和拨号接入客户组成。
　　NetMeeing服务器采用 HP-E500、内存 128M 、硬盘4GB的服务器。 
　　专线接入客户端微机的基本配置为 P II-300、内存 32M、硬盘4GB ，通信设备为 10M 3COM网卡，外部配备为 AGAF DUOSCAN T1200透射式扫描仪和16位声卡及配套的话筒和音箱。
　　拨号接入客户端的硬件配置除通信设备外，其他设备可以与专线接入客户端的一样，只是通信设备改为56Kb Hayes 外置式调制解调器。
2.3　软件平台
　　软件平台是UNIX 操作系统、HTML语言、NetMeeing 、Windows 98 中文版和NETSCAPE。
3　系统设计思想与策略
　　在Internet网上实现远程会诊要解决的主要问题是在不太高的网络传输速度的情况下，实现远程会诊中的文字、图形、声音的实时传送，以及病历资料的组织方式和会诊双方的交谈模式。
　　在远程会诊中需要传送的病历资料主要是文本（如病历、各种检验结果、各种辅助检查结果）、静态图像（各种形态图片、心电图、脑电图、B超、X光片、CT片等）和动态图像（病人实情、动态心动图、等）。静态图像采用128×128的分辨率，以16帧/秒的速率传送。可以采用PCM编码技术（8bit/象素），传送这样的图像即产生一个固定的比特率──2.1Mbps。 动态图像采用25帧/秒的速率传送。每帧由512个象素组成， 每个象素点采用8bit（PCM编码方式）进行编码，图像传送的比特率──52.3Mbps。［1］
　　本系统是建立在拨号入网的基础上，面向广大县及县以下的医疗单位，在远程会诊中传送的主要信息是文本、静态图像及声音信息，动态图像信息如果是必需传送也是采用非实时的方式传送。在互通的基础建好之后，就必须知道对方(服务方)的IOR(Interoperable Object Reference)号了，很像打电话所必需的电话号和上网的IP地址一样。因此不失真快速地传送原始病历资料是一个关键环节。目前医疗过程中的很多诊断都依赖于医学影像学的诊断结果。
1　客户登录部分
　　整个系统的框架如图1。首先不管是客户还是服务端对象，都把自己的应用层意义通过统一的IDL语言说明，这就保证了跨语言的能力，实现了应用层上互通的可能。
　　从不失真的角度来看，原始图片资料扫描的分辨率是越高越好，但是这样会大大增加网络传送的压力。对于会诊病历中的文字资料采用键盘输入是不现实的，一方面会诊医生电脑操作水平有限，另一方面会出现重复输入所产生的错误，因此会诊病历中的文字资料也采用图形的方式传送。在满足医疗诊断需要的前提下，扫描时尽可能采用低一些的扫描分辨率，以减少网络传送的压力。这样做不光访问方便了，也解决了一些通常方法完成不了的问题(具体参见文献[2])。经试验，第一类采用300线（传真格式）方式扫描，第二类采用600线，8字节方式扫描，第三类采用800线，8字节方式扫描，可以满足临床诊断的要求。
　　实时会诊时，会诊双方之间的信息实时交流是一个重要环节。本系统采用Microsoft NetMeeting 软件来实现远程医疗会诊，该软件不仅可以实现双方或多方实时对话、文件传送还可以实现视频信号实时传送。为了保证传送的实时性，声音用 8位11KB/S 采样率采样，可以达到比较好的实时性 。本系统不考虑对视频信号进行实时传送，如果会诊过程中的确需要传送视频信息时，可以采用非实时的方式传送。
　　基于Internet 网上的远程会诊系统是一个分布系统，会诊请求方如何查找到对应专家来应诊也是一个关键环节。为了能提供更多的专家资源，应以医学院校为核心在其学校的校园网Web服务器建立远程会诊专家主页，远程会诊专家主页以临床学科分门别类建设，每个学科内容包含学科特点、专家特长、常见病历资料库以及实时会诊的联系方法。实质是在首先将局部MIB库进行“数据库”化后再将全部网络的各域中的各个代理所控制的“数据库”进行“分布式数据库整合。采用超文本技术实现远程会诊专家信息的管理，大大方便请求客户方查找到对应的专家来进行会诊。
4　系统的运行模式
　　基于Internet网上的远程会诊实时系统，其诊断模式是非面对面的交互新模式。

图2　变量转换
3　Manager和Submanager互操作部分
　　由于在系统内部就不考虑SSL，当然根据需要添上也是无妨的。请求会诊客户方可以使用NETSCAPE浏览或使用 YAGO 查找合适的会诊专家进行实时会诊。在会诊过程中，请求会诊客户方还可以根据会诊需要请求第三方参与会诊。远程会诊模式是以互动交流模式为主，这种诊断模式可以在短时间内实现双方或多方会诊，突破了时间和空间的限制，是一种比较理想的医疗诊断模式。MIB库的“数据库”化过程就是加上外模式的过程，具体是通过添加视图变量实现的。然后拨号上网，根据初步诊断查找有关专家（如果已熟悉的可以直接联系），联系到会诊专家后，启动NetMeeing 软件与会诊专家建立实时通信，通过NetMeeing的工具栏中文件传送项，把所有病人病历资料生成的图形文件传送给会诊服务方。病人病历资料传送完毕，启动NetMeeing 工具栏的音频和白板项即可以进行实时文字和声音通信，会诊双方可以就病人的病历资料进行实时讨论。会诊结束，会诊服务方可以把诊断结果写成书面报告，再生成图形文件；然后用NetMeeing的工具栏中文件传送项，把病人的诊断结果返回给会诊客户方。会诊结果可以使用文字实时传回给会诊的客户方，但是考虑到临床诊断的法律责任及医生操作电脑的水平，在现阶段采用书面诊断报告的形式是比较合适的。

图2　远程会诊流程
　　NetMeeing 软件提供的实时功能不仅是双方的实时交流，而且可以提供多方实时交流的功能，也是说可以提供多方实时会诊。在实时会诊中，一个会诊服务方不能解决问题，可以通过NetMeeing 的呼叫功能项呼叫第三方参与会诊，多方之间可以实现实时的文字和语音交流。在 Mapping 方面一般用C++。因此实时会诊最好不超过三方，如果已有三方参加会诊时，还需要请求第四方进行会诊，最好断开另一方，以保证会诊的实时性。
5　系统实现的关键问题
　　在一个完全开放的Internet网络环境中实施非面对面的远程医疗会诊，比较重要的一个问题是会诊中专家身份的验证。
　　具体而言，中心服务器在接收到客户请求式自行判断标准生效后，起动IPC、IPL过程。但是从网络上请来的专家，请求方可能是完全不了解。这样一来，如果出了医疗事故，其医疗事故的责任找谁负责?因此，要对远程医疗专家库的信息进行验证，并采用适当的加密措施。MbD详细介绍参见参考文献[3]。会诊双方（请求客户方和会诊服务方）都需要通过代理服务器进行身份验证才能进行远程会诊，以确保会诊专家的资格，确保远程医疗过程中的法律责任。会诊诊断报告加盖医生所在医院的公章，再生成图形文件后传送回请求方，其法律责任会得到更大的保证。
6　结束语
　　在Internet网上开展远程会诊的研究，除了要解决系统建设的有关问题外，会诊双方如何适应这种互动的医疗会诊模式也是值得探讨的问题。
4　Submanager和Agent间的互操作
　　这是通过MbD完成的(主要针对make()操作)。这两者前者处理make()接口，后者处理get()、set()接口。我们在进一步探讨这些问题，但是我们认为此种会诊模式会得到医生的认可，并会改变传统的医疗会诊模式。
注：广东省卫生厅资助项目（卫A1997335）
作者简介：冯天亮　副教授。从事计算机教学及计算机在医学领域的应用研究工作。
作者单位：广东医学院　广东.湛江（524023）
参考文献
［1］　王　睿,等. 医工结合高校的校园往主干及局域网仿真. 计算机工程与应用,1998;(4)
［2］　刘冬杰. 基于Internet的远程教学系统. 中山大学学报论丛，1997;(3)
［3］　李　莉，等.基于Domino的远程录取系统的设计与实现. 计算机应用，1998;(8):38-40
收稿日期:1999-06-16(修改稿)
