信息与控制
INFORMATION AND CONTROL
1999年 第28卷 第3期 Vol.28 No.3 1999



一种实现灰箱系统故障定位的诊断技术*
郭其一　卢桂章　赵新
　　摘要：故障定位是故障诊断的关键之一，而神经网络的训练和学习速度问题，一般不适用于通过在线学习而实现的动态诊断。同时兼顾二期工程的内容，为质量管理分系统的全面实现打下良好基础。网络补偿部分的联接权采用在线学习方法，具有快速的收敛速度和良好的跟踪特性。
　　关键词：灰箱系统，神经网络，故障诊断，故障定位
　　中图分类号：TP206　　　　　　文献标识码：B
A FAULT POSITIONING DIAGNOSIS TECHNIQUE
FOR GREY BOX SYSTEM
GUO Qiyi
Shanghai Tiedao University, Shanghai 200331
LU Guizhang　ZHAO Xin
Nankai University, Tianjin 300071
　　Abstract　Because of the learning and training speed, the neural networks is not used in dynamic diagnosis with on-line self-learning in general. And the fault positioning is very important. In this paper, an observer method, is put forward to realize functions of fault isolation and part diagnosis, which is based on neural networks, built on mathematical model for the known part of the object, and combined with compensation net and the fault positioning technique. It is a deep knowledge method with fast convergence speed and good tracking character istics when training process is on-line.
　　Key words　 grey box system, neural network, fault diagnosis, fault positioning
　　1　故障定位诊断
　　故障诊断就是根据系统的测量信息，经过给定的推理原则，计算状态特征，判断系统是否故障；若发生故障则指明故障部位与机理，向控制者(机器或人)提出故障时系统控制和处理原则，实施故障保护。BS-CIMS一期工程的6个分系统将在上述计算机环境下运行。而被诊断系统几乎都是人造系统，其部分结构一般是已知或可知的，但由于其结构的复杂性、非线性特性和测量信息的有限性，数学模型或无法完整求出、或模型过于复杂、或无法准确描述、或运行过程中的变结构及某些参数未知等，而成为灰箱系统。因此很难用一般的解析方法实现诊断计算，在诊断时如何实现故障定位也就更加困难。
　　神经网络能够通过自身的学习了解被学习对象，尤其是对一些不确定和非线性对象的特性与参数能够给出合理和准确的描述。因此神经网络也被广泛地应用在故障诊断这样的智能应用领域。
　　BS-CIMS一期工程目标体现在以下几个方面：
　　(1) 以企业采用现代造船模式为基础，以船体设计、生产、管理一体化为主线，以民船船体建造为主要生产对象,利用引进的TRIBON软件开展生产设计，抽取CAD有关信息，实现BOM生成系统和船体分段装配计算机辅助工艺设计。即把对对象的认识过程交给人工神经网络的学习训练算法中。但是，往往由于描述非线性对象的网络结构过于复杂，而使学习与训练的速度太慢，不适合在线动态诊断。由神经网络构成的故障诊断系统，实际上是一个神经网络专家系统，它将人类专家丰富的诊断应用经验作为知识描述，存储在神经网络的连接权中，将诊断推理过程转变为一个网络的静态计算过程，这是基于浅知识的诊断推理方法［3］。
　　但上述诊断方法在实现故障的定位尤其要实现部件诊断时有相当的困难，现有的关于故障定位的推理计算方法常常要求系统模型已知［5,8］。本文则提出一种以系统可知部分数学模型为基础，结合状态补偿构造人工神经网络实现状态估计，部分联接权系数实时在线自学习以表达对象的结构特征和输入输出关系，建立一个能够描述系统内部物理关系的诊断模型，通过文\[2~5,8\]方法的有机结合实现灰箱系统的诊断推理、故障定位与部件诊断。文\[8\]对基于状态估计的诊断方法以及相应的残差分析与诊断策略进行了详细的阐述。
　　2　实现灰箱系统故障定位的诊断模型
　　设系统的结构模型为
　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　(1)
其中n×1的向量x(t)∈Rn是状态变量，m×1向量y(t)∈Rn是系统的输出，r×1的向量u(t)∈Rr是系统的输入。将此系统在某平衡点t0以时间步长T线性化并且离散化后得
　　　　　　　　　　　　　　　　　　　　(2)
其中Ai是n×n常数矩阵(i=1,2,…,l1)，Bi是n×r常数矩阵(i=1,2,…,l2)，C是m×n常数矩阵，D是m×r常数矩阵。在BS-CIMS一期工程中利用BAAN软件开发报价系统和制定目标成本。实际上，式(2)仅表示在特定条件下的可知部分数学模型，不可知部分主要包含系统的时延环节、控制策略、非线性因素、变结构变参数及其他的一些不可知因素。令：
　　　　　　　　　　　　　　　　(3)
若系统满足能观测性条件，则由(2)可求出
　　　　　　　　　　　　　　　　　(4)
将(4)式作为系统(1)线性部分的状态估计，记为ΨL，也称为线性子网络；同样也可以构造出非线性子网络ΨN. ΨL与ΨN并联，其输出相加后与补偿网ΨO串联联接实现系统(1)的状态估计, ，可以任意精度逼近x(t). 本文仅以ΨL与ΨO的串联联接实现了系统(1)的状态估计. 补偿未知部分的子网ΨO构造为：
　　　　　　　　　　　　　　　　　　(5)
作为对状态估计的补偿输出，其中f1(k)是对xi(k)的估计，即是n×n权系数矩阵。因此(4)、(5)两式共同构成了一个基于对象数学模型的神经网络，同时又是一个状态观测器，实现对系统状态的估计，如图1所示。这里的ωij是根据对系统已知知识获得的，是已知量。vij(k)是系统偏差Δy(k)控制下学习获得的，是时域变量，但是它的设计与选择的根据是系统的物理结构和特性(式(12)(13))，系统部件的激励特性必须在权学习中强制性体现出来，这样一方面实现了故障定位，另一方面实现了无监督的Hebb学习规则和有监督的Widrow-Hoff学习规则的结合，这就构成一个深知识的诊断推理模型从而达到部件诊断的目的。计算中心的BAAN软件已在HP工作站，UNIX操作系统环境下安装完毕，具备了开发环境。

图1　串联补偿实现定位诊断的模型结构
　　在这样结构的人工神经网络中，每一个神经单元都有一定的物理背景，神经元之间的连接都表达了相应的状态变换关系，因此该神经网络既充分描述被诊断对象的结构特征，又实现对系统的状态估计，而且可以在线学习联接权。因此，计划编制要采用按时限分解，不断平衡下一级时限的计划波动以保证本级时限的计划完成。在系统故障时依据网络结构的物理关系，反演推理可以将故障隔离到元部件级，实现故障定位和部件诊断，发现故障机理。而现有的文献已经证明了3层BP神经网络可以以任意的精度逼近任一连续非线性函数，并可充分满足网络的结构简单性与映射精度间的统一［7］。
　　3　传动系统的定位诊断实践
　　图2所示被诊断对象是一个实际的直流串励电机控制系统的简化结构图，其中a1a2是变压器付边绕组；L1是平波电抗器；L2是励磁绕组；R2为励磁电流分流电阻；磁通是非线性的。可得系统的数学模型如下
　　　　　　　　　　　　　　　　　　　　　　　　　　　　　(6)
　　　　　　　　　　　　　　　　　　　　　　　　　　　　　(7)
其中：
　　(a) Rd：电枢回路的等价总电阻，Rd＝0.061Ω。
　　(b) L：电路的等价总电感，L＝16.5mH。BS-CIMS计算机支撑环境如图3所示.


图3　渤海造船厂CIMS一期工程计算机支撑环境
　　BS-CIMS采用Client/Server结构，BAAN软件也支持这种结构，数据库为BAAN Base (INFORMIX)，一期工程网络通讯工作主要有：
　　(1) TRIBON软件子网和船研所大楼微机网之间不同应用软件的通讯;
　　(2) 船研所微机网和管理网(BAAN)之间不同应用软件的通讯;
　　(3) 管理网BAAN主机通过网络和各分厂之间应用软件的通讯;
　　(4) 由于BAAN Base内部是INFORMIX数据库，所以船研所微机服务器配置微机版本的INFORMIX数据库，以保持数据库的同构，方便信息的访问。由于在额定工作点，由
　　(g) J：折算到电机上的等价总转动惯量
J=0.00/065m　　其中m为整个拖动系统的质量。
　　(h) ML：折算到电机上的阻力转矩，是一个干扰量，只有一个估计值。

图2　直流传动控制系统简化主电路
　　由图2知，系统测量是给定输入ud0(k)、电机电枢电压ud(k)、电枢电流id(k)和速度n(k)，且是经过归一化处理后的标称值，按百分数表达，100%分别代表电流是2000A、电压是2000V、速度是200km/h。令
　　　　　　　　　　　　　　　　　　　　(9)
　　将式(6)和(7)离散化，则图2中的已知结构部分构成图1中的神经网络联接权ωij
　　　　　　　　　　　　　　　　　　(10)
其中

　　　　　　　　　　　　　　　　(11)
　　根据第2部分的要求，未知部分的连接必须体现部件的物理特性和激励特性，令
　　　　　　　　　　　　　　　　　　　　　　(12)
其中
　　　　　　　　　　　　　　　　　　　　　　　(13)
一般取：于是vij(k)的学习就变为ζij(k)的学习，最简单的在线自适应学习算法就可以达到系统跟踪和状态估计的目的。
　　3　BS-CIMS信息编码原则
　　由于CIMS工程的需要，尤其渤海造船厂正处于转换造船管理模式，所以建立BS-CIMS分类编码系统更显得特别重要和必需。学习的准则为
　　　　　　　　　　　　　　　　　　　　(14)
系统状态估计误差确定如下
　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　(15)
　　　　　　　　　　　　　　　　　　　　　　　　　　　(16)
　　　　　　　　　　　　　　　　　　　(17)
　　　　　　　　　　　　　　　　　　　(18)
残差
　　　　　　　　　　　　　　(19)
　　诊断过程的设计与实现：
　　(1)建立诊断模型；
　　(2)给出初始参数：vij(0)=K0，其中K0是系统的放大系数，可以通过实验方式预先获得；
　　(3)基于采样信息，在(14)式的控制下在线学习网络的联接权vij(k)；
　　(4)由式(15)～(19)计算跟踪误差和残差AVG(k)；
　　(5)根据已知的Rd和L，由式(12)用辨识算法在线求出ζij值；
　　(6)根据残差评估准则分析［8］AVG(k)；系统运行正常则重复步骤(3)，否则进行步骤(7)；
　　(7)若系统异常，辨识出故障时的等效电阻R′和电感L′；
　　(8)判决故障部位并评价故障的后果及处理方式，给出故障报警；
　　(9)重复步骤(3)，进入下一轮的诊断过程。
　　图3是基于系统已知模型加补偿构成的神经网络状态观测器对状态估计的跟踪特性仿真结果，输入是单位阶跃信号，因已知的非线性过程经过分段处理(8式)，故联接权的学习采用最小二乘法，经过4个测量周期递推，跟踪达到误差控制要求(在仿真时也采用递推的遗传算法，按每个测量周期递推进化迭代3次，则大约需要60代(即20个测量周期)后开始收敛，达到类似结果)。工程设计分系统在BS-CIMS一期工程中，主要利用TRIBON软件开展船体结构设计，利用微机上的软件开展船体建造、设计管理及工艺设计。这些分系统与船舶设计系统、工艺设计系统之间的主要信息界面如图2所示。在“九五”末期基本实现系统集成，通过系统集成和全体员工努力，使企业经济效益逐年增加，逐步进入国际先进造船行列。
作者简介：郭其一，38岁，副教授。从事控制、检测及故障诊断方向的教学与研究工作。
作者单位：郭其一：上海铁道大学电气工程系　上海　200331
　　　　　卢桂章　赵新：南开大学机器人与信息自动化研究所　天津　300071
参考文献
　1　Venkatasubramanian V, Vaidyanathan R, Yamamoto Y. Process Fault Detection and Diagnosis Using Neural Networks. Computers Chem. Engng., 1990, 14(7):699～712
　2　潭民，疏松桂。基于神经网络的控制系统故障诊断.控制与决策，1990, 5(1):58～60
　3　杨叔子等。基于知识的诊断推理.清华大学出版社，广西科学技术出版社,1993:76～119
　4　刘建华,张伟江,徐晓鸣。基于PNN滤波的非线性系统故障检测方法.控制理论与应用,1997,14(2):171～177
　5　隋家贤，黄苏南，夏圈世。故障检测与定位.自动化学报，1995,21(4):487～493
　6　Ernest O. Doebelin，童钧芳，关国枢译。系统的建模和响应――理论及实验方法.上海科学技术文献出版社，1986:100～160
　7　焦李成。神经网络系统理论.西安电子科技大学出版社，1996，15～100
　8　周东华，孙优贤。控制系统的故障检测与诊断技术，清华大学出版社，1994，12～156
1999-01-14收稿
