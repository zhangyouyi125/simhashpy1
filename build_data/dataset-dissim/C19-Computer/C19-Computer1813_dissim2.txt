微型机与应用
MICROCOMPUTER & ITS APPLICATIONS
2000　No.19　No.1　P.42，45




一种微电机实时测速方法
姜卫东
摘要： 一种新的微电机实时测速方法以及基于这种方法实现的测速设备的设计思想、系统结构及功能。
关键词：微电机 实时测速 采集卡
　　检验微电机质量的关键在于检测其转速变化曲线、电流变化情况、电机在负载和空载时的转速变化情况。
HTML文件中：
　　＜param name＝sentence＿rightanswer value＝″AEEADEDEBB…″＞
源程序中：
　　parameter＝getParameter(″sentence＿rightanswer″)；//获 //取答案参数
　　if(parameter。这种方法存在潜在的缺点。首先，由于这种方法计算的转速是对一段时间内方波数量的计数，得出的是一段时间内电机的平均转速，因而它不能实时测量电机的转速，无法得到准确的电机的时间－转速曲线；其次，当电机低速转动时，测量精度低。
　　本文提出1种实时微电机测试系统方案，主要针对传统测速系统的不足，在克服以上缺点的同时，根据实际电机生成部门的具体需要，以实现微电机测速方便、快捷、灵活的特性。
1 系统结构及功能
　　针对传统测速系统的缺点，本文提出如下方案：在传统方法的第2步对方波进行一定速率采样，通过接口电路，把采样数据送入计算机，计算机对数据进行处理、分析，得出时间－速度曲线、时间－电流曲线以及有关的参数信息，自动确定微电机质量合格情况，并把相关的信息存入已建立的数据库中，为以后的质量分析提供详尽的数据资源。程序段为：//时间显示线程
　　public void start()
　　{
　　　　if(time＿thread＝＝null) {
　　　　time＿thread＝new Thread(this)；
　　　　time＿thread．start()；　//开始考试
　　　　}
　　}
　　public void run()　　　//线程运行
　　{
　　　　while(time＿thread。将来题库扩充时也仅需将新题答案依次加在原题库答案之后，而无需改动源程序。将来只需再将已调的题目图片用g．drawImage()方法显示在题目区中即可。
1 编程思想
　　此程序是一个可以模拟GRE（美国研究生入学考试）的程序，其考试界面完全按照ETS的标准界面绘制而成，操作流程也完全按照真正的考试过程设计。
　　从图1可以看出，系统采用对每个方波进行采样的方法计算转速，其转速曲线与微电机的转速完全一致，因此，用此方法测量的是微电机的实时转速，且转速精度完全由采集卡的采样率决定，因此，只要改变采集卡的采样率以满足需要，就可以获得很高的测速精度（如精度为1转以下的测量，传统方法是不能做到的），这对测量微电机在无负载和有负载时的转速变化尤为准确、可靠（这也是微电机质量检验的关键）。

图1 系统结构框图
　　由于引入了微机，建立了微电机测量数据库，并配有丰富的处理、分析、统计、绘图、打印软件，使得管理者对产品质量分析和统计非常方便（如一段时间内测量的微电机转速分布曲线、不合格产品分布曲线、有无负载时电机电流变化曲线等），这也是本微电机测速系统的一大特色。系统主要完成以下功能：（1）实时测量转速；（2）实时测量电流；（3）可变精度测量；（4）系统的显示、打印、统计、分析等。
2 设计思想
2.1 可变速率AD采集卡
　　AD卡为双通道可变速率采集卡，采集芯片采用多通道复用芯片，以实现对转速方波和电流信号交叉采集（即奇数点采集转速信号，偶数点采集电流信号），这样采集的好处是保证微电机的转速和电流在同一时刻是一一对应的。通道间转换由外部数据指定。由于采集芯片以2通道交叉方式工作，因此采样速率为系统时钟的一半。能不能将考试也移植到Internet上，用网络来完成传统考试繁琐的全过程已成为人们所思考的问题。
1.4 答案的记录与报送
　　若为正式考试，可将考生所选答案和正确答案一同输出保存在文件中，待考试结束后由专人将文件通过Internet传送回考试中心，考试中心审核后再将官方成绩送至各个地区的各个考点。
HTML文件中：
　　＜param name＝sentence＿rightanswer value＝″AEEADEDEBB…″＞
源程序中：
　　parameter＝getParameter(″sentence＿rightanswer″)；//获 //取答案参数
　　if(parameter。

图2 2路变速率采集卡框图
2.2 接口电路
　　接口电路与采集卡同在1块电路板上，由于采集卡的采集速率不高（不超过30KB／s），接口采样ISA总线，系统采用查询方式通过接口访问缓存。接口电路主要完成地址选择，数据的出入以及发送控制命令。其结构框图如图3所示。

图3 接口电路框图时钟
2.3 软件设计
　　微电机测速系统软件包括5个部分，分别为：系统设置、数据处理、报表统计、打印输出、帮助信息。
　　系统设置：包括采集数据长度设置、采集时间设置、触发方式设置、数据处理结果显示设置、图形显示方式及种类设置等。
　　数据处理：包括对本次测量结果分析和本次前多个测量结果的统计分析，以得出关心的参数（稳定转速、稳定转速方差、前多个测量结果分布图等）。
　　报表统计：完成数据库报表统计功能。如1天或1个月检验情况报表输出。
HTML文件中：
　　＜param name＝sentence＿rightanswer value＝″AEEADEDEBB…″＞
源程序中：
　　parameter＝getParameter(″sentence＿rightanswer″)；//获 //取答案参数
　　if(parameter。
　　帮助信息：提供必要的软件使用说明。
　　本文提出的微电机实时测速方法不但克服了传统微电机测速的缺点，而且具有功能完善、结构简单、设备成本低、使用灵活方便等特点。文章对此程序的一些重要的编程细节做一简要介绍，希望能对从事这方面的工作者有所裨益。
姜卫东（长沙国防科技大学电子工程学院ATR室410073）
收稿日期：1999－08－27
