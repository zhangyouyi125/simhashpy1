计算机应用
COMPUTER APPLICATIONS
1999年 第19卷 第9期 Vol.19 No.9 1999



煤矿安全监视图像数据库系统研究
孟倩　周延　于洪珍
　　摘　要　本文提出了一个将安全监视图像分成背景图像与运动视频图像并分别存储入库以提高图像数据压缩比的思想，并研究了安全监视图像数据库的数据模型，给出了系统结构。
　　关键词　安全监视，图像数据库，数据压缩
RESEARCH ON THE SAFETY MONITORING IMAGE DATABASE SYSTEM IN COAL MINE
Meng Qian
Computer Science Department of Xuzhou Normal University, Jiangsu.Xuzhou 221009
Zhou Yan　Yu Hongzhen
China University of Mining and Technology，Jiangsu.Xuzhou 221008
　　Abstract　In this paper, a method for enhancing the image-compressing rate is proposed. The basic thought of this method is dividing the Safety Monitoring Image into Background Image and Motive Video Image, and inputting these two images separately into the image database after compressing the motive image. This will highly enhance the image-compressing rate. In addition, the data model of the Safety Monitoring Image database is researched, and a kind of system architecture of the image database system is given.
　　Keywords　Safety monitoring image, Image database, Image compression
　　　　作为矿井现代化安全管理的关键一环，很多煤矿安装了电视监视系统，并将电视监视系统与计算机联网。为了将进出某采区的下井人员采样存档，一旦发生事故，可以快速检索在事故现场的井下人员，为紧急救援提供帮助；另外，在事故发生前后一段时间内将现场情况录制下来，以供事故分析和研究，我们进行了主要用来存储各种安全监视图像的安全监视图像数据库系统的研究。该系统是一个特定领域相关的应用系统。
　　. 大容量的数据存储能力使IC卡本身成为有效的数据载体。
　　运动物体运动区　据统计，安全监视图像中背景部分约占3/4，运动部分仅约占1/4。
　　. 安全监视一般不考虑音频、视频同步问题
　　从井下和井上传来的安全监视信号中，一般没有音频信号。
2　安全监视图像数据库系统结构
　　系统处理的安全监视图像是具有时空特性的动态影像，由视频帧构成。图像通信的接口功能是从网络获取影像媒体的数据以构成图像库。图像库获取的方法是把连续视频按帧采集，以视频帧序列表示视频信号。一段视频图像是由若干帧构成，若干段视频图像序列，构成了一个视频图像库。IC卡是集成电路卡，它无需往复机械动作即可完成多次人―机―卡间的会话过程，使卡在应用时更易操作。
　　为了减少图像数据存储量，我们采取两种措施来进行图像数据压缩：
　　. 将安全监视图像分成背景图像与运动图像两部分，因背景图像已知，所以可事先存入一背景图像库中，即所有图像帧的背景部分在库中只存放一次。
4.3.3　公开档案区数据结构与编码
　　以下描述了公开档案区AZ3的数据结构（自1996年西南交大校园IC卡发行起即采用，由此奠定了该系统的多功能特性）：
　　RW控制字、发行卡号、身份证ID(对于未成年无身份证者，参照身份证号码编码原则编制代用身份号，同时对该卡加以特殊标记)、学号／工作证号、姓名(其间出现的生僻汉字用汉语拼音标注)、单位(采用变长子字段设计以节约存储，加速检索)、(单位/专业)代码、性别、民族、政治面貌、婚否、分类码、入学(工作)、借书证号(图书馆条码)、照片存储地址、现住址、家庭所在地、乘车区间、籍贯、学生类型、血型/身高/体重、危急症/过敏症、医疗证号、游泳证号及体检记录、日消费限额、AZ1用户进入口令(密文形式)、AZ1加密算法与参数(密文形式)、发卡时间、更新时间、发卡或更新操作员代码、本区校验算法参数(密文形式)、本区校验码、特殊标记(对未办理身份证者加以标记并特殊处理)
4.4　相关读写设备的选型或研制
　　根据我们的经验，IC卡读写设备的质量和可靠性是系统成败的关键因素之一。
2.2　安全监视数据库系统结构
　　安全监视数据库系统结构如图1所示：

图1　工业电视图像数据库系统结构
　　用户接口　用户接口实际上是用户与图像数据库系统交互的界面和窗口。用户接口首先对用户输入的命令或操作进行检查，把错误信息返回给用户，而将正确的命令或操作变换成系统的内部形式，由数据库管理系统完成命令解释及任务调度。
　　图像通讯接口　以单幅图像的形式从视频源采集进来，送图像管理系统处理。
　　图像数据库管理系统IDBMS　任何数据库系统都离不开数据库管理系统的支持，同样IDBMS是整个安全监视图像数据库系统的核心。对于从图像通讯接口输入进来的原始图像，IDBMS调用图像处理模块进行处理，提取出运动图像部分存入运动视频图像数据库；IDBMS对于来自用户接口的正确命令进行解释执行，遇到检索、维护存取等事务性操作，先由IDBMS 处理，如需播放则调用图像处理模块将运动视频图像和与之相对应的背景从各自数据库中提取出来，并进行图像合成，再交由IDBMS通过显示设备输出。
　　数据词典是关于数据库模式信息的数据库，存放的是各种数据库模式的类型定义，数据库已知性检验的约束规则、各种代码、用户权限等，是IDBMS的一部分。为使系统具有描述及易修改的功能，还可将数据字典模式信息存放于另一数据库中，称作数据定义字典。
　　图像处理模块　对于输入到系统的原始安全监视图像，为了减少图像数据的尺寸以便于存储，对它们进行预处理。在背景图像库相应背景图像参与下，提取出运动视频图像，并运用图像压缩技术对其进行压缩，以一定的存储模式存入运动图像库。需要图像输出时，由该模块从背景库中提取背景，从运动视频图像库中提取相应的运动视频图像段，并进行背景图像与运动图像的合成。
　　数据库　数据库部分包括背景图像库、运动视频图像库和常规数据库三部分。常规数据库中存放的是图像的描述信息。
3　安全监视图像数据库数据模型
　　传统的关系数据模型是建立在严格的数学基础――关系代数上，解决了数据库管理中的许多问题。比如，它可以应付网络系统或局部供电系统突发故障，保证学生上机、用餐这类时间性极强的活动的支付正常进行；也容易设计多功能的系统，将门禁、考勤、考试、学籍、医疗、消费等多功能集于一身。因此人们开始探讨适合非格式化数据的新的数据模型。
3.2.2　系统的主要安全技术措施
　　多级的密钥与口令管理；
　　按不同子系统安全需求的多种密码保护;
　　实现支持联网与不联网小额支付应用的用户消费余额底帐；
　　利用小额消费限额控制风险的运行管理；
　　用户卡的挂失与消费余额认定, “黑名单”的发布与 “灰名单”（指可能被系统的攻击者操作过的卡片名单）的跟踪。
3.1　系统设计目标
3.1.1　系统总目标
　　本系统总目标是：一卡覆盖全校主要管理和消费应用，并支持持卡人长期使用（从本科到博士毕业留校任教）。
　　. 大容量的数据存储能力使IC卡本身成为有效的数据载体。因此，利用面向对象技术开发图像数据库或多媒体数据库尚处于研究、探索阶段。另一种是以扩充现有成熟的数据模型（如关系、层次）为方向，利用其牢固而成熟的理论基础，实现技术和应用背景，开发面向应用的图像数据库或多媒体数据库。
　　在安全监视数据库系统中，可以采用特征描述法，将描述图像的一些信息，如存入日期，时间，操作员，摄像头号，摄像头安装地点等信息输入数据库，在特征信息上进行查询。因此，这是基于结构化数据的简单逻辑条件查询，一般不作基于语义的查询，查询方式较为简单。建立数据模型的原则是简单实用，我们选用了关系模型扩充的图像数据库数据模型。
　　在常规的管理系统中，主要使用的数据类型是数值型、字符型、布尔型、日期型等。安全监视图像数据库扩充了视频图像型，以存放运动视频图像。目前考虑的应用包括：校内银行、上机管理、教务学籍管理、图书借阅、校医院医疗卡（同时具有急救信息卡功能）、游泳馆管理子系统、校内(小额)消费购物支付、科研经费管理、校宾馆客人的消费结算等。
4　安全监视图像DB的存储及存取
　　常规数据由于数据量小，可用定长技术处理，因而可以按定长的字段、记录、块三级存储单元方便地组织数据地存储。而图像数据量大，且图像经压缩后其数据量参差不齐，因而不能用定长的字段、记录、块三级存储单元组织存储，这在存储结构上大大增加了复杂度，我们可将存储结构分为两部分。
3.1.2　系统近期目标
　　明确系统的近期目标是必要的。
　　考虑到数据压缩的需要，我们以变长记录VLR作为动态视频图像库的基本结构，低层的变长记录对用户来讲是透明的。这样引入变长记录之后，库长度将变得短得多。在定长记录库文件中查找记录是容易的，用记录大小乘以记录号即可得到一个记录相对字节偏移量，对于变长记录库，由于每个记录长度不变，因此就要利用某种形式的索引。自1997年底起，西南交大校园IC卡系统全部改用西南交大计算机安全与通信保密研究所（CSCSI）自行研制的CSCSI-1型读写卡器。背景图像与运动视频图像分开存放对于用户来说是透明的。如图2所示。

图2　存储结构
　其中　　BackAdr　　　　：相应背景图像地址；
　　frameFirstAdr：帧数据起始地址；
　　framelen：帧长度；
　　fmeNo：帧序列中帧序号；
　　lstfmeAdr：上一帧地址；
　　nxtfmeAdr：下一帧地址；
　　key：存取关键字；
　　fmeHeadAdr：表头地址。
5　结语
　　本文提出了一个将安全监视图像分成背景图像与运动视频图像并分别存储入库的思想，这将使安全监视图像数据库的数据压缩比获得质的提高。
　　. 利用“磁条――IC复合卡”实现银行信用卡、单位多功能卡的合一。主要从事多媒体数据库、安全监测监视等的研究及教学工作。
作者单位：孟　倩　徐州师范大学计算机科学系　江苏.徐州（221009）
周　延　于洪珍　中国矿业大学江苏.徐州（221008）
参考文献
［1］　李国辉，汤大权，许　健.VBS―全软件动态视频图像编辑与播放系统的设计与实现.小型微型计算机系统，1994;(6)
［2］　李舜革.图像数据库的分类和系统基本构成.中国计算机用户，1991;(8) 
收稿日期:1999-05-16(修改稿)
