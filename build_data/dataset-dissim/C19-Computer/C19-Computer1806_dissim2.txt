微型机与应用
MICROCOMPUTER & ITS APPLICATIONS
2000　No.19　No.1　P.21-24




多频自同步高分辨率彩色显示器故障诊断与处理
李海泉
摘 要： 多频自同步高分辨率彩色显示器的特点、结构组成以及该类显示器的故障分析、故障诊断测试和故障处理技术。 
关键词： 多频自同步 高分辨率彩色显示器 故障测试与处理
　　多频自同步高分辨率彩色显示器（Multisync Hight Resolution Color Display），简称MHCD。该类显示器行频自同步范围较宽（行数从15kHz连续升高到45kHz），场频自同步范围40～90Hz，从而能兼容目前流行的MGA、CGA、EGA、CEGA、SEGA、Hercules，以及VGA，SVGA等多种显示适配器。
1 组成与故障分析
　　MHCD显示器由7个部分组成：①开关电源；②显像管电路；③行扫描电路；④场扫描电路；⑤多频自同步电路；⑥视频信号电路；⑦接口电路。
1.1 开关电源
　　该类显示器开关电源有2组电压输出，一组回路输出固定电压，另一组回路输出可变电压。它按配接的适配器不同输出不同的电压，如CGA卡为51V，EGA卡为60V，VGA卡为91V等。若开机后无光栅，但工作指示灯亮，则固定电压输出无问题，应检查可变电压输出。
　　因此，即使是象mStartTime一样的模块级全局变量，也应尽量避免在通用过程中使用，它们应作为参数由事件过程显式地传给通用过程，而不是直接在通用过程中使用全局变量。
1.2 显像管电路
　　MHCD显示器的显像管电路与VGA显示器的显像管电路基本相似。显示器加电后无光栅，或光栅呈很亮的单一颜色，或出现回扫线等故障现象，这时应检查显像管电路。

图4　在Form间使用Form级公用变量传送数据
　　Form级公用变量，不仅在说明它的模块中可用，只要以说明该变量的Form名称为前缀，其它模块中的过程也可以直接修改引用，所以，相对Form级私有变量而言，它在更大的程度上损害可维护性和可复用性。当加电后，无光栅或光栅呈1条垂直亮线，或行幅不正常，或光栅几何失真，或行幅不同步等故障现象，应检查和处理行扫描电路中的故障。

图1　同一Form中的事件过程间数据传送
　　由于Form级私有变量只在说明它的模块中可用（1个Form、标准模块或类模块），所以对可维护性的影响要小一些（相对于全局变量），同时也解决了图1所示的应用中事件过程间数据传送问题。当光栅缩成1条水平亮线，或场幅不正常，或出现场线性失真，或场中心偏移，或场消隐电路使光栅出现回扫线等故障现象时，则应检查和处理场扫描电路的故障。
1.5 多频自同步电路
　　多频自同步电路，包括同步信号处理电路、频率／电压变换器、电压比较与跟踪和自动S校正电路。这部分电路是该类显示器最具特色的电路，是该类显示器能在变化范围很宽的多种行频条件下实现自动同步的关键。该电路中的频率／电压转换器（LM331N）能精确地把不同频率的输入信号转变成相应幅度的输出控制电压加到相应行扫描电路的行振荡级，从而兼容不同的显示卡（适配器）。表示1个事务活动的开始。若MHCD显示器在多频条件下出现不同步，或光栅出现S形失真，则应检查多频自同步电路中的故障。
1.6 视频信号电路
　　视频信号电路，包括R、G、B 3路视频信号放大器电路，亮度和对比度调节自动控制电路。若MHCD显示器出现满屏呈现某单一颜色，或缺少某种颜色，或荧光屏上亮度不一致，关机后还出现亮点等故障现象，则应测试和处理视频信号电路中的故障。
1.7 接口电路
　　接口电路，包括适配器、反相器、视频信号处理电路和D／A转换器等电路。该电路的故障现象比较复杂，凡显示器出现故障，前面6部分检查均无问题，则应考虑接口电路中的问题。
2 开关电源的故障测试与处理
2.1 开关电源的故障诊断
　　当MHCD显示器电源发生故障时，开机后无光栅，电源指示灯不亮。这时，应先检查保险管是否烧断，整流桥硅片是否击穿，再检查其热敏电阻是否短路、晶体管放大器是否损坏，然后检查滤波电路、保护电路或干扰抑制电路有无故障，负载回路有无短路、断路或接触不良。
　　对于GW500显示器，开机后若无光栅，但工作指示灯是亮的，可以肯定固定电压组K1无故障，应集中检查可变电压组K2中的故障。
　　因此，即使是象mStartTime一样的模块级全局变量，也应尽量避免在通用过程中使用，它们应作为参数由事件过程显式地传给通用过程，而不是直接在通用过程中使用全局变量。下面介绍在E－DP编程环境下，Visual Basic过程间共享数据的方法以及过程间共享代码的方法，并相应讨论对复用性和可维护性的影响。开机后，若有光栅，但图形不稳定，如图像边缘扭动或有严重抽丝，则应检查电源的滤波电路、稳压电路、干扰抑制电路和过压、过流保护电路。若这些电路均正常，则应检查行扫描电路有无故障。若开机后无光栅，工作指示灯也不亮，则应检查其固定电压输出。K1电源的输出电压分别为8V、16．5V、25V和120V。如果这4组电压全部偏低或无输出电压，则应检查该回路的输入和输出端，看有无元器件短路、断路，全力排除其中的故障。若其中1路无输出电压，则应检查该路负载是否短路。若负载正常，则应检查脉冲整流、滤波电路或脉冲变压器下绕组是否正常，竭力排除其中的故障。
2.2 开关电源的故障测试与处理
　　1．假如某台AST 486微机与多频自同步Fusjitech彩色显示器联机。加电后，工作指示灯亮，荧光屏光栅时有时无且忽大忽小。前者在1个应用中整个范围内有效，后者则局限在1个应用的某一过程中有效；VB中，除了上述2种变量外，还有模块级私有变量，其作用域为说明该变量的模块。这种故障多因显示器上某个元件参数性能变差形成的。开关电源输出电压不稳，也会出现这种现象。
　　故障测试及处理。先打开机盖，将主机板从机箱内拉出。加电测量开关电源103V输出组，发现该组电压不稳。将103V负载断开，再测还是不稳。这样判断故障出在电源部分，测开关功率管各性能参数符合要求。因此怀疑振荡电路IC1（TDA4601）可能有问题，换IC1故障依然存在，如图1所示。如图6所示。拆下C618测容量小于5μF，应为100μF。说明C618性能变差。换新电容，开机试验，荧光屏光栅正常，故障排除。模块级私变量可用范围是标准/代码模块ProjMd，它在相应工程（Project）的整个运行期间有效。当经分析、检查、排除了①和②二种可能后，就要检查、测试和处理行扫描电路中的故障。由于Form既是容器也是用户接口，所以当界面修改涉及到删除包含procStart和procStop的Form时，所有其它Form中调用procStart和procStop的过程，都要作相应的修改；进一步，其中含有共用通用过程的Form在程序运行过程时，内存中始终需要该Form的副本（即从用户界面而言已不需要该Form，但其中含有供其它Form调用的通用过程，所以仍不能关闭/释放该Form），因此，为了提高可维护性和运行效率，共用通用过程应保存在标准/代码模块中，而不是存放在Form中。当判断故障在行输出管时，应查清是行输出管Q403，阻尼二极管D401，逆程电容C413～C415和行输出变压器T402那一个损坏。这时，如果用户接口有所变动（会导致原事件过程名的改变等），各调用过程不用作任何修改，因为这时调用过程调用的已不是事件过程本身，而是事件过程所调用的通用过程。
　　（3）光栅几何失真
　　造成光栅几何失真的原因有2方面：①显像管枕形失真校正电路故障引起光栅枕形失真；②因线性补偿电感或S形校正电路故障引起线性失真。
　　（4）行信号不同步
　　同步信号处理电路（IC501）、频率／电压变换电路（IC201）和电压比较、跟随电路（IC202）发生故障，会造成行信号不同步。
　　对上述故障现象，要进行综合分析，通过自动诊断、人工诊断、仪器测试和直接观察的方法，进行故障定位，再排除其故障。
3.2 行扫描电路的故障测试与处理
　　假如某Super 486微机与CTXCC－1435多频自同步高分辨率数字／模拟两用彩色显示器联机。加电后指示灯和显像管灯丝亮。关机后，再开机加电，又重复上述故障现象。
　　故障分析。这种现象是显示器高压保护性反应。其原因有2种：一是行输出电压太高；二是行频过低。
　　故障测试及处理。
　尽管使用Form级私有变量实现事件过程间数据传送，但在通用过程中仍要避免直接使用，应使用过程参数将Form/模块级私有变量、Form级公用变量、或全局变量的值传给通用过程，这样可以提高过程的复用性和可维护性。因此可以确定是高压保护反应。该显示器的高压保护取样电路如图2所示。B＋电压由行输出变压器T303第1脚行逆程脉冲经D501整流，C501滤波后，得到与高压变化成正比的直流电压，再通过接插件D送到电源，经电阻R139、VR102、R138分压后，送到行输出电压控制电路中，保证行输出电源电压稳定。经检查B＋电压整流二极管D501软击穿短路，使A点电压变为锯齿波。
　　图1列出了2个事件过程，事件过程cmdStartClick（）是用鼠标点触命令按钮cmdStart事件的处理程序。造成行输出集电极电压大大提高，使阳极高压超过高压保护额的值。于是发生高压保护，使显示器停止工作。因D501是软击穿，因此在开机10分钟内还能正常工作，但10分钟后击穿短路，失去整流作用，造成上述故障。当更换二极管后，故障现象消失。

图2 CTXCC－1435多频自同步显示器行扫描电路
4 场扫描电路的故障测试与处理
4.1 场扫描电路的故障诊断
　　MHCD显示器场扫描电路的常见故障现象有：光栅呈1条水平亮线；光栅底色出现回扫线；场线性失真；场幅不正常；场中心偏移等。从而将开始时间从Form1中的事件过程cmdStart_Click（）传给Form2中的事件过程cmdStop_Click（）。因此，电子束不能在垂直方向偏转，屏幕上出现水平亮线。因此，当开机后光栅呈水平1条亮线，若电源和行扫描电路正常，可以确定场扫描电路有故障。事件过程cmdStopClick（）是用鼠标点触命令按钮cmdStop事件的处理程序，表示1个事务活动的结束。当场消隐电路出现故障时，场消隐信号不能加到栅极（G1极），会导致光栅底色出现明亮的回扫线。
　　（3）阻容元件损坏引起场线性失真
　　当IC301管脚之间的阻容元件损坏时，会使荧光栅上、下方格的大小不一致，出现场线性失真。C306、C305损坏，不仅会使场线性变坏，而且还会出现上半部图像卷边现象。
4 使用Form级公用变量
　　在以上的例子中，由于2个事件过程在同一Form中，所以变量mStartTime说明为Form级私有变量。
　　（5）元器件故障使场中心偏移
　　调节VR304，光栅可以上、下移动。若VR304有故障，或Q306、Q307损坏，会使扫描光栅场中心偏移，造成显示图像在屏幕的位置偏上或偏下，或使图像上部或下部超出屏幕。
4.2 场扫描电路的故障测试与处理
　　假如某GW0540微机与GW500多频自同步高分辨率彩色显示器联机。显示器加电后，指示灯不亮，显像管灯丝也不亮，偏转线圈无加电反应，用手触摸荧光屏无静电反应。
　　故障分析。从故障现象看，故障有2种可能：一是电源有问题；二是场扫描电路接触不良。例如，本来如果鼠标点触按钮时计算事务耗时，改为在某一文本编辑框内按下回车键时计算事务耗时。打开机盖，加电测量电源电压，45～135V输出管为155V，B＋为0V；另一组电源8V、16．5V、25V和120V均无输出。电源部分电路如图3所示。在线测Q1的PN结电压，发射结为0．071V，不正常；集电结正常。D1反向压降为0．01V，不正常。将Q1和D1管焊下测试，其PN结正、反向电阻均正常，说明这2个元件没有损坏。重新焊好Q1、D1，断开R5与Q1基极连线后，再测试Q1和D1有关极电压，均正常。
　　有一种情况，如上述示例，在1个Form中说明的全局变量，在其它Form中不对其修改；为了消除公用变量的副面作用，可用1个Form级私有变量及1个公用通用过程替代，即将该变量说明为From级私有变量，同时增加1个公用过程用以读取该变量；如图5所示。用万用表RX1档测试Q1的b、e之间电阻仅53Ω。检查R5、R7、C9和D1几个元件，发现C9击穿短路。更换后再测试上述元件管脚电压，均正常。联机后有显示，但几分钟后屏幕底边随机上、下抖动，图像被压缩，线性变坏。再用万用表测试场扫描电路IC301（TDA1170H）各脚电压均正常。用示波器观测IC301各脚波形，第4、7、11脚波形不正常。

图1　同一Form中的事件过程间数据传送
　　由于Form级私有变量只在说明它的模块中可用（1个Form、标准模块或类模块），所以对可维护性的影响要小一些（相对于全局变量），同时也解决了图1所示的应用中事件过程间数据传送问题。散热片必须与主机地线相连才能正常工作。用鼠标点触命令按钮cmdStart的时间存放在变量mStartTime中，在事件过程cmdStopClick（）中要利用StartTime计算由按钮cmdStart启动的事务活动所用的时间；然而没有办法将mStartTime的值通过参数传递给事件过程cmdStopClick（）（因为事件过程的参数是由系统固定的），因此，在这个应用中，说明了Form级私有变量mStartTime，使得这个容器中的所有过程都可以直接引用或修改mStartTime。
关键词： Visual Basic 事件驱动程程序设计 变量 可维护性 复用性
　　具有面向过程方式编程经验的软件开发人员，在使用Visual Basic等可视化开发工具时，其开发工作大多数是以E－DP（事件驱动程序设计方式展开的。
　　（1）开机后，满屏全红（或全绿或全蓝）色，图像信号显示不出来或模糊不清。这时，应检查以下电路是否正常：①视频信号处理电路；②视频放大器、三通道宽带放大器及其它外围元器件是否损坏，如C707～C709；③检查显像管阴极相应连接，看是否相应阴极连接发生断路或短路现象。
　　（2）图像中缺少某一种基色。
1 关于全局变量
　　在面向过程程序设计方法中，由于全局变量的值能被系统中的任何过程修改，所以全局变量被认为是损害过程独立性的重要因素之一，所以在面向过程程序设计中，一个重要的原则是：尽量避免使用全局变量，而提倡使用参数显式地传给被调用的过程。造成这类故障的原因有以下几种可能：①视频信号预处理电路到视频放大器的信号传输线路断路或接触不良；②视频放大器Q801～Q809中某一三极管损坏，使图像信号传输丢失，使颜色中缺少某种基色；③通道部分IC601（74LS04）损坏，使主机给出的某一信号不能正常传输；④IC701某一路损坏，使相应的颜色信号无法输出。这时，应重点检查Q801～Q809是否完好。如配接VGA卡，则应检查视放输出级或IC701是否损坏。如配接EGA，则应注意检查IC601、IC602及其外围电路。⑤IC602（82S147）损坏，使通道部分的译码出错而损失某一路颜色信号。
　　（3）因元器件故障，造成彩色不正常。其故障现象主要有2种：一种是由于缺少某一种颜色引起的彩色不正常；另一种是出现彩色失真。检查时，应重点检查IC601（74LS04），IC602（82S147）、IC701（LM1203N）几个集成块及其外围电路。IC601的故障多数是由于适配器插卡带电拔插引起的，因此应严禁带电拔插。IC602的故障主要是译码错，出现彩色失真。如果出现彩色不正常，光栅底色不能关掉或图像很暗，调节对比度旋钮无效，通常是IC701损坏造成的。
　　（4）显示器满屏亮度不一致。

图3　在通用过程中使用参数传送数据
　　相对图2所示的版本而言，通用过程procStart和procStop的复用性以及程序的可维护性都得到了提高。一般来说，这种故障大部分都是Q701或Q702损坏引起的。当用鼠标点触命令Form1中按钮cmdStart时，唤醒事件过程cmdStart＿Click（），cmdStart＿Click（）调用ProjMd中的procStart将事务开始时间保存在变量mStartTime中；当用鼠标点触命令Form2中按钮cmdStop时，唤醒事件过程cmdStop＿Click（），cmdStop＿Click（）调用ProjMd中的ProcStop，ProcStop利用mStartTime计算事务耗时elasedTime。
3 在通用过程中的模块级私有变量
　　图2是在图1所示的例子基础上的1个改进版本，在图2所示的例子中，事件过程cmdStart_Click（），调用通用过程procStart来读取开始时间；相似地，事件过程cmdStop_Click（），调用通用过程procStop来计算事务耗时，计算出的结果通过参数传给cmdStop_Click（）；在本例中为了例示在通用过程中，使用模块级私有变量对复用性的影响，在图中所列的2个通用过程中，都直接使用模块级私有变量mStartTime，而不使用参数将其由事件过程传给相对应的通用过程。出现这种故障的原因多是关机消亮点电路Q310的Ce结击穿、C425漏电或D424损坏。要经过测试，确定到底是那个元件故障，再更换和修复。
5.2 视频通道与显像管故障的测试与处理
　　假如某HP586微机与MAXISCAN多频自同步模拟／数字两用彩色显示器联机。
　　因此，即使是象mStartTime一样的模块级全局变量，也应尽量避免在通用过程中使用，它们应作为参数由事件过程显式地传给通用过程，而不是直接在通用过程中使用全局变量。
　　故障分析。在使用过程中，该机光栅始终是正常的。
　　对图2所示的通用过程procStart和procStop进行改进，即在其中不直接使用模块级私有变量，而是通过参数传递mStartTime的值，这种改进的版本如图3所示。
　　故障测试与处理。打开机盖，首先观察视频放大器输出电路，即视放管尾板电路各极波形。当屏幕显示正常时，显像管阴极Rk、Bk、Gk视频信号波形正常。当屏幕无显示时，显像管阴极就测试不到信号波形。这说明显像管电路正常，故障不在尾板，而在视频通道板上。
　　因此，即使是象mStartTime一样的模块级全局变量，也应尽量避免在通用过程中使用，它们应作为参数由事件过程显式地传给通用过程，而不是直接在通用过程中使用全局变量。输入到显示器的视频信号是数字／模拟R、G、B信号和2个同步H及V信号。与视频及同步信号有关的IC402（74LS04）第2脚电压不稳定，经反复试用及测试，确认IC402不能正常使用。从而将开始时间从Form1中的事件过程cmdStart_Click（）传给Form2中的事件过程cmdStop_Click（）。
6 多频自同步与接口电路的故障测试与处理
6.1 故障诊断
　　多频自同步电路若发生故障，会出现光栅S形失真或多频不同步等故障现象。
3 在通用过程中的模块级私有变量
　　图2是在图1所示的例子基础上的1个改进版本，在图2所示的例子中，事件过程cmdStart_Click（），调用通用过程procStart来读取开始时间；相似地，事件过程cmdStop_Click（），调用通用过程procStop来计算事务耗时，计算出的结果通过参数传给cmdStop_Click（）；在本例中为了例示在通用过程中，使用模块级私有变量对复用性的影响，在图中所列的2个通用过程中，都直接使用模块级私有变量mStartTime，而不使用参数将其由事件过程传给相对应的通用过程。
6.2 故障测试与处理
　　假如某AST486微机与AST多频自同步彩色显示器联机。显示器加电后，工作指示灯亮，荧光屏光栅正常，但联机后，荧光屏变暗且不显示字符，出现杂乱的1条水平亮线。
　　故障分析。图6没有使用Form级全局变量，然而，在其中使用了全局通用过程ProcStart和ProcStop，在任何Form中都可以调用ProcStart修改mStartTime，但只能通过调用ProcStart来进行，可避免对全局变量的“无意”修改。
　　故障测试与处理。该显示器接口电路是由LM324、74LS244、74LS05、74LS06几块集成电路组成。从而将开始时间从Form1中的事件过程cmdStart_Click（）传给Form2中的事件过程cmdStop_Click（）。拆下74LS05，用TTL集成电路测试仪测量、确认该芯片已损坏。更换新的74LS05芯片，联机字符显示正常，故障排除。
李海泉（西安石油学院计算机系710065）
收稿日期：1999－08－19
