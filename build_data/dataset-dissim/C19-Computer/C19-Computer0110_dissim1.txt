计算机工程
Computer Engineering
1999年　第25卷　第9期　Vol.25 No.9  1999



一种基于主动网络技术的曜网络管理模型
袁　俊　何　丹　杨培根
　　摘　要：介绍了TMN的基本概念，从技术的角度探讨了TMN的体系结构，并指出了现行TMN的不足之处．最后提出了一种基于主动网络技术的电信网络管理模型－ATMN
　　关键词：电信管理网络；网络管理；主动网络；可编程交换结点
A Telecommunications Network Management Model Based on Active
Network Techniology
Yuan Jun He Dan Yang Peigen
(State Key Laboratory for Novel Software Technology, Nanjing University, Nanjing 210093 Department of Computer Science and Technology, Nanjing University, Nanjing 210093)
　　Abstract　This paper introduces the basic concept of TMN, discusses the architecture of TMN in technological perspective and points out its limitations. At last we propose a new network management model of TMN based on active network technology, ATMN>
　　Key words　Telecommunications management network; Network management; Active network; Programmable switch
　　网络管理是电信行业最重要也是最复杂的课题之一。电信网络管理的功能包括运行、管理、维护和供给功能(OAM&P)，这些功能是提供和监控网络及其传输的一些业务所必需的。ITU-T于80年代中期提出了电信管理网络(TMN，Telecommunications Management Network)的概念[1][2]及相应的建议M.3010[3]。
　　根据ITU-T M.3010建议，TMN的基本概念是一种有组织的体系结构，可以使不同类型的管理系统和电信设备之间以一致的方式交换管理信息。
1　TMN的体系结构
　　ITU-T在M.3010建议书中从功能、物理、信息3方面定义了TMN的体系结构。
1.1　TMN的功能结构
　　TMN的功能体系结构(见图1)引入了一组标准的功能块和参考点，从逻辑上描述TMN内部功能分布。TMN的功能模型中包括网元功能(NEF)、协调功能(MF)、操作系统功能(OSF)、工作站功能(WSF)、Q接口适配功能(QAF)和数据通信功能(DCF)。经试验，第一类采用300线（传真格式）方式扫描，第二类采用600线，8字节方式扫描，第三类采用800线，8字节方式扫描，可以满足临床诊断的要求。MF起协调作用，使没有共同接口的OSF与NEF、QAF能正常通信。NEF直接或通过MF与OSF通信，以便受其监控，它主要提供通信和支持功能。考虑到医疗中的法律责任和医生对此种会诊模式的适应能力，我们首先在临床辅助诊断学科（心电图）开展远程医疗会诊试验工作，初步效果还是可以。WSF提供TMN与用户之间的交互能力。为了在TMN个功能块之间交换信息，TMN的功能结构还提供了DCF，以保证各个功能块之间管理信息的正常传送。

图1　TMN功能结构
　　TMN定义了5类参考点：q(包括q3与qx)、x、f、g、m，这些参考点是互不重叠的功能块之间的信息交换场所。MF与NEF、QAF、MF在qx参考点交换信息。OSF与NEF、QAF、MF、OSF在q3参考点交换信息。不同的TMN实体信息交换发生在x参考点。m参考点位于TMN的外部，在QAF和非TMN管理实体之间，这样就可以通过TMN环境管理非TMN的NE。g参考点也在TMN之外，供WSF和使用者交换信息。
1.2　TMN的物理结构
　　TMN的物理结构(图2)中引入了一组物理块及这些物理块间的接口。TMN的物理结构是功能结构的物理实现；TMN的物理块是与它相对应的功能块的物理实现；TMN接口是功能结构中参考点的物理实现。系统设计的重点是解决远程会诊中就病人的已有病历及相应的检查资料进行会诊。网络中的资源被抽象为管理对象，GDMO(Guideline for Definition of Managed Objects)为这些对象的定义提供了语法规则。这些管理对象在系统内被组织成一个管理信息库(MIB, Management Information Base)。TMN信息结构引入了OSI系统管理原则中管理者/代理的概念，管理者发送管理命令给代理，代理对被管理的资源实行管理操作。
2　TMN存在的问题
　　TMN框架反映了现代电信网络管理技术的最新发展。然而，通过对TMN体系结构的分析，我们认为TMN还存在着一些问题。从TMN的功能结构可以看出，TMN的管理功能集中于OSF， 而TMN的信息结构运用了OSI的管理原则，所以实现上采用了以中央平台为中心的管理，管理应用在中央平台上执行，向网元设备上的代理发送管理命令，接收、处理由代理返回的管理信息。这种网络管理模型主要有以下缺陷：第一， OSI系统管理最初在80年代中期提出，当时的电信网络规模小，网元设备的功能和管理任务都比较简单，且管理信息较少，将对网元设备的管理功能集中于中央平台完全可以适应当时电信网络管理的需求。
　　NetMeeing服务器采用 HP-E500、内存 128M 、硬盘4GB的服务器。因此，以平台为中心的管理模式限制了网络管理的可伸缩性。 动态图像采用25帧/秒的速率传送。代理只是根据管理者的管理命令访问MIB，然后回送管理信息。在网元处理能力有限的情况下，这种管理模型是合理的。然而，如今的网元处理能力越来越强，采用管理者/代理模型导致一些网元资源(如CPU、内存等)没有得到充分利用。在会诊过程中，请求会诊客户方还可以根据会诊需要请求第三方参与会诊。
　　在远程会诊中需要传送的病历资料主要是文本（如病历、各种检验结果、各种辅助检查结果）、静态图像（各种形态图片、心电图、脑电图、B超、X光片、CT片等）和动态图像（病人实情、动态心动图、等）。另外，网元的软件体系结构也在改变，一些原先用通过代理软件完成的管理功能现在则通过MIB实现，因而网元设备有更多的闲置资源。
　　从以上的讨论可以看出，OSI的系统管理模型中的管理者和代理的负载严重失衡。一方面，中央平台处理的数据量急剧增长，难以管理大规模的电信网络；而另一方面，网元设备的资源得不到充分利用。因此OSI系统管理模型已经难以适应现代电信网络管理的需求。
3　一种主动网络管理模型ATMN
　　主动网络(Active Network)技术为TMN的发展提供了新的思路。主动网络是一种新型的网络体系结构，它的主要特征是它的"主动性"。主动性主要表现在两个方面：第一，报文可以嵌入程序代码，可以在主动结点上执行，主动结点可以改变报文的报头和内容；第二，主动网络的一些中间结点(如交换机、路由器等)可以对接收到的报文进行特定的计算，从而改变了传统网络存储转发的计算模式，使得中间结点至少增加了计算的能力。 
　　远程会诊系统 由NetMeeing服务器、专线接入和拨号接入客户组成。四大互联网比较大的缺点是远程通信速度都比较低，在这样的网络环境下实现图像、声音实时传送是有一定的困难。主动网络的实现一般可采用可编程交换结点，这种方法提供了一种程序报文的下载、处理机制。主动网络技术适合应用到TMN中，潜在的好处是：第一，传统的TMN中管理者与代理经常传送大量管理信息，若采用可编程交换结点技术传送执行代码，在网元设备上处理管理信息，可以减少网络的信息流量；第二，管理程序在网元设备上执行，可以利用闲置的网元资源，同时可以缩短管理通路，减少延时，使得管理进程可以在网元设备上获取当前的信息，实施网管操作的精确性高。
　　NetMeeing服务器采用 HP-E500、内存 128M 、硬盘4GB的服务器。该模型保留了OSI管理模型中的代理及管理信息库，并对网元设备进行扩充，使其支持主动网络技术。

图3　ATMN网络管理模型
　　该模型主要由5部分组成：(1) 管理应用(MA)：将TMN功能模型的OS进行分解，每一个管理应用程序完成特定的网络管理功能，如计费管理、告警等。然后拨号上网，根据初步诊断查找有关专家（如果已熟悉的可以直接联系），联系到会诊专家后，启动NetMeeing 软件与会诊专家建立实时通信，通过NetMeeing的工具栏中文件传送项，把所有病人病历资料生成的图形文件传送给会诊服务方。(2) Dispatcher：为了使远程网元有一定的管理功能，必须将管理应用分发到远程网元系统。Dispatcher负责将管理应用及管理要求组成一个主动报文并发送给完成管理任务的网元设备。(3) 代码下载执行协议(CDEP)：对现有的通信协议进行扩充，使得它支持主动报文(Active Packet)的传送。主动报文中封装可在网元设备环境中执行的管理程序目标代码。(4) Active Server：为了处理主动报文，网元设备要支持主动网络技术。目前医疗过程中的很多诊断都依赖于医学影像学的诊断结果。Active Server提供了一种程序代码的下载和执行机制，作用是负责接收主动报文，然后根据报文中的管理要求在网元设备上执行管理程序代码。(5) 代理：与OSI系统管理模型中的代理作用相同，通过访问MIB来执行具体的网络管理任务。
　　ATMN与TMN相比，主要有以下几个优点：第一，管理的主动性。传统的TMN采用OSI管理者/代理的管理模型，管理者需要执行大量的数据处理、分析工作，而网元设备只是根据管理者的要求，简单地执行网管操作,将管理信息回送给管理者。系统设计的重点是解决远程会诊中就病人的已有病历及相应的检查资料进行会诊。第二，管理的灵活性好。
2.2　硬件组成
　　硬件是一个基于Internet下及与之配套的远程会诊所需的硬件。而传统的管理功能的增加、修改要受OS具体实现的限制。因而ATMN很适合于动态性很强的业务管理的开发。第三，管理应用在网元上获取当前的管理信息实施网络管理，在网元上处理管理信息，管理更加精确，同时节约了网络带宽。例如，对于计费管理，完全可以在网元上进行计费数据的分拣和分类，而无须将数据传送到中央平台集中处理。对于告警管理，则可以由网元上的管理应用自动处理一些告警，而将告警级别较高或需要网络管理员介入的告警信息返回给网管中心。
3.2　实例
　　作者根据ATMN模型，在某通信公司的交换机上实现了计费管理应用。该公司的计费管理采用集中式管理方式，网络管理及监控中心的集中计费台启动自动拷贝命令从指定局的交换机中将计费数据拷贝到集中计费台上，并进行验证存盘。由于计费数据信息量大，将各本地局的计费数据拷贝到监控中心会占用大量的网络带宽，定时时长设置不当会影响告警及话务数据的传送。从应用的角度考虑，没有必要将本地局的计费数据信息传送到监控中心，因为用户的计费数据完全可以在用户所在局的交换机上直接处理，并由用户所在局的脱机计费系统对数据进行处理。因而，利用ATMN网管模型传送计费管理程序，在用户所在局进行计费管理是合理的。会诊双方（请求客户方和会诊服务方）都需要通过代理服务器进行身份验证才能进行远程会诊，以确保会诊专家的资格，确保远程医疗过程中的法律责任。(2) 在交换机的IMX平台上用C语言实现了一个简单的Active Server，它是一个后台驻留程序，监听TCP端口2000。同时在网管平台用Visual C++提供的Socket编程接口实现了Dispatcher，它的主要任务是根据网络管理员的要求，将可在交换机上执行的网络管理程序目标代码传送给Active Server。Active Server接收到管理程序后，在IMX平台上启动执行该程序。
4　相关的工作
　　本文提出了一个利用主动网络技术对电信网络进行管理的模型ATMN，目前我们的实现与理想中的模型还有一定的差距。
　　基于Internet 网上的远程会诊系统是一个分布系统，会诊请求方如何查找到对应专家来应诊也是一个关键环节。程序代码通过TCP/IP协议被当作传统的报文进行传输。我们根据计费管理的实际要求，约定将封装程序代码的报文交给特定的进程处理，模拟实现主动网络中传送主动报文的过程。因此，本研究的目的是在传送速度比较低的Internet网络环境下实现图像、声音实时传送，及在这一网络环境下的远程医疗运行模式。对这两个问题，目前国际上的一些研究，如ANTS(Active Network Transport System)研究的是一般的主动网络传输机制、MBD(Management By Delegation)研究的是采用代理的管理模型等，这些研究的成果和经验都值得借鉴。我们将进一步研究和完善ATMN。
5　结束语
　　电信管理网络TMN的研究涉及到面向对象、分布式计算、计算机网络等很多技术，是一个比较活跃的研究领域。很多的研究机构，如ITU-T、OMG、NMF(Network Management Forum)都为TMN的研究和发展做了大量工作。为了保证传送的实时性，声音用 8位11KB/S 采样率采样，可以达到比较好的实时性 。
作者简介：袁　俊(1974～)，男，研究生，研究方向为计算机网络
作者单位：南京大学计算机软件新技术国家重点实验室，南京　210093　南京大学计算机科学与技术系，南京　210093
参考文献
1 Glitho RH,Hayes S.Telecommunications Management Network: Vision vs.Reality.IEEE Communications Magazine,1995-03:47-52
2 Sidor DJ.Managing Telecommunications Networks Using TMN Interface Standards.IEEE Communications Magazine,1995-03:54 3 ITU-T Recommendation M.3010.Principles for a Telecommunications Management Network,1986-07
收稿日期：1998-12-20
