计算机应用
COMPUTER APPLICATIONS
1999年 第19卷 第9期 Vol.19 No.9 1999



触发器的几种应用
李振华　李贵龙　刘涯
　　摘　要　列举了触发器的几种代表性应用：数据分散―集中式模型的设计，历史数据的导出，应用系统间的数据接口。如今，网元设备功能越来越强，完全能承担一些"力所能及"的管理工作，例如：可以对告警信息进行必要的过滤处理，级别较低的告警信息由网元设备自动处理，而级别较高的告警信息则交给网管中心的网络管理员处理。
　　关键词　触发器，数据分散―集中模型，历史数据导出，数据接口
1　引言
　　在大型数据库设计中，会经常用到触发器。因此，以平台为中心的管理模式限制了网络管理的可伸缩性。
　　在文献［1］中，列举了触发器的几种应用：审计;复杂的完整性约束;复杂的安全性授权;事件登录;列值导出;分布式数据库中表复制。
2　触发器的另外几种应用
2.1　数据分散――集中式模型设计
　　在实际开发过程中，经常遇到这样的数据维护要求：单位由多个部门组成，要求各部门只能维护本部门的数据，但另一方面，又需要将分散到各部门的数据集中起来进行汇总，得到本单位的汇总数据。
作者简介：袁　俊(1974～)，男，研究生，研究方向为计算机网络
作者单位：南京大学计算机软件新技术国家重点实验室，南京　210093　南京大学计算机科学与技术系，南京　210093
参考文献
1 Glitho RH,Hayes S.Telecommunications Management Network: Vision vs.Reality.IEEE Communications Magazine,1995-03:47-52
2 Sidor DJ.Managing Telecommunications Networks Using TMN Interface Standards.IEEE Communications Magazine,1995-03:54 3 ITU-T Recommendation M.3010.Principles for a Telecommunications Management Network,1986-07
收稿日期：1998-12-20
。从TMN的功能结构可以看出，TMN的管理功能集中于OSF， 而TMN的信息结构运用了OSI的管理原则，所以实现上采用了以中央平台为中心的管理，管理应用在中央平台上执行，向网元设备上的代理发送管理命令，接收、处理由代理返回的管理信息。然而，近年来电信网络规模扩大，管理任务和网元复杂性增加，中央平台所要分析、处理的数据量急剧增长，使得中央平台难以管理大规模的电信网络。

图1　触发器应用于数据分散――集中式模型
　　在这种模型中，要注意设计好部门表相关字段的完整性约束，使各部门表内的数据是唯一的，以防止不同部门表出现相同的数据记录，从而导致在汇总表中出现混乱。
2.2　历史数据导出
　　数据库中的表只记载最新的数据，而不记载历史数据。但在很多情况下，历史数据的记载与分析反而比现实数据更有意义（这也正是数据仓库与数据库的区别之一），比如学校中学号的变动，工厂定额的更改，公司产品和原材料价格的变化、股票的升跌等等，它们都需要记录历史数据。
　　如何使数据库也能记载历史数据呢？
1.2　TMN的物理结构
　　TMN的物理结构(图2)中引入了一组物理块及这些物理块间的接口。
　　建立这类触发器的步骤是：建立数据表后，再建立对应的历史表（一般而言，历史表在字段组成上是数据表的超集，即在原数据表字段上再增加有关时间的字段），然后在两者之间设立触发器（见图2）。这样，每当数据表有数据变动，触发器便将变动的数据记入历史数据表中，从而达到自动记录历史数据的目的。

图2　历史数据的导出模式
2.3　应用系统间的数据接口
　　一个完整的信息系统的建设一般不是一步到位的，往往是分期分批完成，而不同期次的系统往往又会有数据传递，然而由于需求发生变化或是其他原因，不同期次系统的数据库设计在表结构甚至字段上的设计都可能会互不一致（即使是在同一期的开发过程中，由于总体设计或数据字典方面的偏差或不足，或者需要集成多家系统，这种现象也会经常出现）。在不可能重建这些系统的情况下，它们之间的数据能无缝传递吗？同时在网管平台用Visual C++提供的Socket编程接口实现了Dispatcher，它的主要任务是根据网络管理员的要求，将可在交换机上执行的网络管理程序目标代码传送给Active Server？
　　在这种情况下，触发器可以是一种较好的解决方式：建立中间表，中间表的设计符合需方应用系统的设计格式，而它的数据又与供方应用系统的数据保持一致。对这两个问题，目前国际上的一些研究，如ANTS(Active Network Transport System)研究的是一般的主动网络传输机制、MBD(Management By Delegation)研究的是采用代理的管理模型等，这些研究的成果和经验都值得借鉴。WSF提供TMN与用户之间的交互能力。触发器能使数据库的设计变得简洁和高效。文中的3个例子，代表了触发器3个方面的典型应用。
作者简介：袁　俊(1974～)，男，研究生，研究方向为计算机网络
作者单位：南京大学计算机软件新技术国家重点实验室，南京　210093　南京大学计算机科学与技术系，南京　210093
参考文献
1 Glitho RH,Hayes S.Telecommunications Management Network: Vision vs.Reality.IEEE Communications Magazine,1995-03:47-52
2 Sidor DJ.Managing Telecommunications Networks Using TMN Interface Standards.IEEE Communications Magazine,1995-03:54 3 ITU-T Recommendation M.3010.Principles for a Telecommunications Management Network,1986-07
收稿日期：1998-12-20
。现从事计算机网络及数据库的教学与科研工作。
作者单位：中国地质大学网络中心　湖北.武汉（430074)
参考文献
［1］　沈佩娟，汤荷美,编著. 数据库管理及应用开发(第1版).北京：清华大学出版社，1995,6
收稿日期:1999-03-15
