计算机工程
Computer Engineering
1999年　第25卷　第9期　Vol.25 No.9  1999



基于域的分布式系统管理体系结构模型
田小鹏　陈　平　孙德文　白英彩
　　摘　要：实现高效、稳定的分布式网络系统管理的核心内容是系统管理体系结构的设计．提出发分布式系统／网络管理体系结构设计的原则，并在分析常用网络管理体系结构的基础上，引入了管理器、管理者的管理者、综合管理器、域等概念，提出了基于域的分层树型体系结构(DBHA)模型．
　　关键词：分布式系统；系统管理；网络管理；域
Domain Based Distributed System Management Architecture Model
Tian Xiaopeng Chen Ping Sun Dewen Bai Yingcai
(Dpet. of Computer Science and Engineering, SJTU. Shanghai 200030)
　　Abstract　The distributed system management architecture design plays the very important role for information technology resources management. We prose two rules of distrbuted system management architecture design first. Moreover, some prevalent approaches and architecture for management systems are provided. By using the concept of manager、manager of manager、integrated manager、and domain, a domain based hierarchical architecture is introduced.
　　Key words　Distributed system; System management; network management; Domain
　　网络系统质量的提高和数量的不断增长及其引起的多厂商分布式网络环境中部件与用户交互的复杂性、异构性、多样性需要智能化、自动化、效率化、综合化的高质量管理。具体的工作如下：
　　①对象管理Agent记录和维护本地出生用户Agent的特征信息(对象名，ID，驻留节点，驻留时的URL等 )，并赋予用户Agent一个含有出生地信息的标识号。
　　在实际分布式系统环境中，可以通过一定的规则构造和分化网络系统为多个子系统，并通过把管理任务划分给不同子系统的方式降低网络管理复杂度，实现高质量的管理。因此，域作为一种可灵活使用的组织资源方法被研究和使用。
　　综上所述，系统/网络管理系统体系结构的设计应基于两个构造原则：
　　准则1：采用分布式/分层式网络体系结构；
　　准则2：使用域作为组织单元。
1 常用网络管理系统体系结构模型
　　网络管理系统体系结构模型有许多。以下4种较为流行：集中式体系结构, 分布式体系结构, 分层式体系结构, 分布式和分层式体系结构的结合[1]。网管系统体系结构的主要差异在于使用管理者的数目和交互或独立的程度。
1.1 集中式体系结构
　　集中式体系结构(图1)是最常用的方式，它只有唯一的网络管理器负责整个网络的管理。目前的移动做得还很不够，效率并不高，对程序的要求却比较高。因此在系统中使用了另外一种方法－对象系列化和检查点机制结合完成转移。但是在简单的网络环境中，集中式控制简洁有效。

图1　集中式体系结构
　　集中式体系结构的一种变化类型是平台方法(platform approach)(图2)。 
1　RPC机制
　　RPC(远程过程调用) 是一种传统的构造分布应用的方法，可以说它是其它几种机制的基础。应用层由针对某个特定应用开发的各种Agent和场所构成，不同的应用有不同的组成。它也是自治对象移动到下一个场所后首先执行的方法。这两部分通过一个公共的用户程序接口API进行通信。这个体系结构将异构和协议复杂性放在管理平台这一级处理，极大地简化了异构、多厂家、多协议环境下综合应用程序的开发、维护和扩展。无论怎样，集中式体系结构这种方式限制了管理网络的范围与规模。而且，当应用程序很多时，管理平台就会成为一个严重的瓶颈。 RPC 的语义大部分与传统过程调用一样。一个管理者负责一个域，域的划分可以根据地理、组织结构或其它规则，因此这种方法非常适合多域网络。当某一个域(domain a)需要另一个域(domain b)的信息时，对等管理者(管理者a和管理 者b)之间进行通信。这种体系结构的最大优点是其规模的可扩充性(scaleability)。若被管网络的规模增加或性能需求提高，可以通过创建更多的域和增加相应的管理者数目来满足。

图3　分布式体系结构
1.3 分层式体系结构
　　分层体系结构(图4)应用一个管理器负责一个域的原则，进一步引入了"管理者的管理者"MOM思想。但是它与分布式体系结构不同的是：每一个域的管理器仅仅负责本域的管理，对其它域的情况一无所知；即域管理之间是不能通信的。MOM位于更高的层次级别，它所需求的数据信息由其管理或负责的域管理器提供。这种体系结构也具有网络规模的可扩充性，这可以通过创建更多的域、相应的管理者和多个MOM来实现。通过MOM的MOM概念引入，可建立一个多级分层次模型。这种体系结构方便了综合应用程序的开发，应用程序可以对多个域进行信息检索。
1.4 网络式体系结构
　　第四种体系结构将分布式体系结构和分层式体系结构的特点结合(图5)。用户不需要详细指明这些信息。和单纯分层和分布式体系结构不同的是：管理器的组织结构按照网络的方式组成。这种方法结合了两个体系结构的特点和优点，保留了网络规模的可扩展性，对于分散性、不规范的网络环境具有更好的功能和适应性。

图4　分层体系结构

图5　网络式结构
2　域
　　分布式系统管理对管理结构提出了更高层次的要求，这体现在：
　　(1)管理结构必须明确多个管理者之间的权限划分及界限；
　　(2)管理结构必须能反映出物理网络连接、应用程序分布、层次管理结构等特性；
　　(3)同一被管对象可能由若干个管理者管理，每个管理者实现特定的功能；
　　(4)管理结构要求能反映出管理的交叉或重叠(overlap)现象。因此当用户Agent移动到某地执行，动态加载它的父类时，可能该地没有该类，因此必须从该Agent上次执行的节点或诞生的节点处获得该类代码。域在很多文章中都涉及到，但都没有提出完整和确切的定义。下面根据文献[2][3]进一步提出域的定义。
2.1 域的定义
　　域的定义：域表示一个范畴或区域，也是一个特殊的被管对象。
　　这种方法，主程序的使用比较简单，缺点是系统的升级比较繁琐。作为一个对象，它保持着本域各被管对象的参考信息。
2.2 域的划分原则
　　域的划分方法很多，可根据企业网络环境的具体情况采用不同方法或多个方法。 
　　(2) 类库的动态加载
　　由于用户 Agent 的执行代码是解释执行的，类库是动态加载的，所以Agent的对象并不包含它继承的所有类代码。
表1　域的划分方法

域的划分方法描述
管理功能(Management Function)根据应用到被管资源的特定或一组管理功能实现域的划分．
管理策略(Management Policy)所有被管资源应用相同的管理策略，管理策略的设置将会简化．
组织结构(Organizational Structure)根据系统的组织结构实现域的分割．
物理位置(Geographical Location)根据系统各资源的具体地理位置实现域的划分．
所有权标准(Ownership Criterion)根据系统各资源的所有者进行域的划分，对于安全访问控制有利．
被管资源类型(Managed Resources Types)将属于同一厂商或符合同一标准的被管资源组成一个域．
被管资源功能(Managed Resource Function)将所有完成相同功能或服务的被管资源组成一个域，如网络系统中的所有打印机．

3 DBHA体系结构
3.1 DBHA体系结构模型引入的概念
　　系统体系结构模型采用分层树型体系结构方式。该模型引入了管理器、域、管理者的管理者、综合管理器概念。
　　(1)管理器：应用一个管理器负责一个域的原则，每一个域的管理器仅仅负责本域的管理，对其它域的情况无权干涉。即：域管理之间是不能相互通信的。
　　(2)域：定义管理器可以管理的范围。在系统中，域的划分根据网络地址进行划分。比如，以202.120.6.0网络为例，子网掩码是255.255.255.240，即分成16个子网，每个子网中有14台(除全0和全1地址)机器组成。所以可以将202.120.6.0网络分成16个域。具体的工作如下：
　　①对象管理Agent记录和维护本地出生用户Agent的特征信息(对象名，ID，驻留节点，驻留时的URL等 )，并赋予用户Agent一个含有出生地信息的标识号。
　　(4)综合管理器：综合管理器是一种特殊的MOM。它比管理器高一个层次，但与普通MOM的不同之处在于它可以直接管理域，当然只能管理一个域。
3.2 DBHA体系结构模型
　　DBHA体系结构支持3种结构方式：
　　(1)标准方式：MOM-manager-domain的方式。用户Agent将其在驻留地获得的URL报告给出生地对象管理Agent。
　　(2)混合方式：MMOM-manager/MOM-domain的方式。MMOM可以管理多个管理器和多个MOM, MOM又可以进一步管理下层的各管理器，每个管理器负责一个域的管理。
　　(3)综合方式：MMOM-manager/IM/MOM-domain的方式。MMOM可以管理多个管理器、多个综合管理器、多个MOM。MOM又可以进一步管理下层的各管理器、综合管理器或MOM。综合管理器负责某个域的同时，负责管理下层的管理器、综合管理器或MOM。每个管理器负责一个域的管理。
3.3 DBHA体系结构的优点和特色
　　(1)网络规模的可扩充性：若网络规模和复杂性增加，可通过创建更多的域、相应的管理者和多个MOM来实现管理。通过引入MOM的MOM概念，可建立一个多级分层次模型。
　　(2)适合大型高速网络：这种体系结构将管理任务分割，而且责任分工明确，避免了集中式/平台式体系结构不适合大量数据信息处理和高速网络管理的情况。
　　(3)根据网络地址原则划分域：对于TCP/IP互连网络环境，通过网络地址进行域的划分，能清晰网络互连的逻辑结构并与网络拓扑图的管理一一对应。
　　(4)提出综合管理器的概念：综合管理器的引入使网络的管理结构具有一定的灵活性。用户Agent将其在驻留地获得的URL报告给出生地对象管理Agent。这样可以保证对不同的域不同对待；让某性能好的机器作为综合管理器，可以充分发挥它的能力，减少管理器的个数，避免MOM-manager-domain的单调结构和"领导过多，机浮于事"的现象。
　　(5)这种体系结构方便综合应用程序的开发，使管理器上的应用程序可根据不同域的特点进行管理，而MOM又可统筹全局，不必去负责具体的数据收集和繁琐的数据计算。 Serializable 接口不需要实现任何特殊方法，但类中的每一个数据对象必须是对象系列化对象