计算机工程
Computer Engineering
1999年　第25卷　第9期　Vol.25 No.9  1999



WBTool：一个基于多层Client/Server结构的白板工具
徐保民　唐东升　石　磊
　　摘　要：通过对白板工具所提供功能的分析，提出一个多层结构模型，用于支持实时、异步和临时3种讲座方式；同时就该工具所采用的通信协议集、发言权控制以及动态组合语义光标技术等问题进行论述．
　　关键词：白板工具；控制机制；协同感；组合光标
WBTool: Whiteboard Tool Based on Multi-layer Client/Server Architecture
Xu Baomin
(CAd Lab. Institute of Computing Technology, Academi of Science of China Beijing 100080)
Tang Dongsheng
(Information Center of State Tax Bureau of Henan Province, Zhenzhou 450002)
Shi Lei
(Computer Department of Zhenzhou University, Zhenzhou 450052)
　　Abstract　The paper provides a multi-layer Client/Server architecture model by analzing functions supplied by WBTool. It can support real-time, asynchronous and temporary discussion modes, and communication proptocol sets, speaking control mechanism and dynamic integration semantics cursor are discussed also.
　　Key words　Whteboard tool; Control mechanism; Cooperative awareness; Dynamic integration semantics cursor 
　　随着计算机技术及网络技术的发展，计算机应用系统正从传统的支持个体工作的人机交互方式向支持群体工作的人机交互方式发展。特别自1984年MIT的Grief和DEC的Cashman正式提出CSCW(Computer Supported Cooperative Work)概念以来，CSCW技术得到了迅速发展。
表2　数据仓库与数据库各阶段的设计方法

设计阶段数据仓库数据库
概念模型信息包图数据流程图
逻辑模型星形图模型实体关联图
物理模型物理数据模型物理数据模型

　　下面分别介绍数据仓库三个模型设计阶段采用的各种技术。其中白板工具是CSCW的一个重要研究领域，它通过向协作者提供一虚拟共享空间，支持处于异地的群体成员在各自的计算机屏幕上来观看同一内容以及对同一问题进行讨论，也是实现群体协同工作的主要方式之一。
　　以白板工具－WBTool的设计为背景，首先论述了WBTool的通信协议和实现模型，然后深入探讨了该工具所采用的发言权控制机制和动态组合光标技术。
1 系统功能和实现模型
　　尽管听与说是人们最常用的交流手段，但文字、图形也是十分重要的交流媒介，因作为支持群体协同工作的通用白板工具WBTool，除提供基本的文字、图形处理功能外，应具有以下功能特性：
　　.支持多输入流的同步、异步操作。
　　.支持多交谈室同时工作，对于同一交谈室的交流信息其它交谈室不可见。信息包图集中在用户对信息包的需要，它定义主题内容和主要性能测试指标之间的关系，其目标就是满足用户需要。用来真实地模拟现实世界中人们的讨论方式。用户可以根据实际情况，灵活地在这3种工作方式中进行选择，从而增强系统的实用性。
　　(1)工作方式
　　要求与会者在同一时间内对同一问题进行实时讨论，并保存讨论结果，当讨论结束后，用户可以随时查看讨论结果以及对整个讨论过程进行跟踪和分析。
　　(2)临时工作方式
　　与同步工作方式基本一致，不同之处在于它不对讨论过程及结果进行保存。当讨论结束后，用户无法查看讨论过程中的各种信息。
　　(3)异步工作方式
　　不要求用户同时工作，用户产生的信息也不是在用户间实时传输。当一个用户向服务器发出信息时，服务器会将这些信息存储到数据库中，以便其他用户请求这些信息时，服务器能够从数据库中读取信息并送给用户。
　　典型Client/Server结构并不能充分体现上述3种工作方式，因此，结合WBTool工具的特点，对典型的Client/Server体系结构进行改进，构造出一个更适合WBTool工具的，由服务器、消息转发器和EDBMS数据库管理系统等组成的多层Client/Server结构模型(见图1)。


图1 扩展Client/Server结构模型
　　在WBTool中，服务器负责用户登录、整个系统的管理以及用户交谈信息的存储等工作。消息转发器主要负责同步和临时讨论方式下，白板工具所产生的控制信息及数据的转发。对于每一个交谈室，系统均能动态构造一个相应的消息转发器为其服务。指标是访问数据仓库的关键所在，是用户最关心的信息。超立方体（hypercube）用超出三维的表示来描述一个对象，显然具备多维特性，完全可以满足数据仓库的多维特性。依据白板工具的功能和实现模型，WBTool工具采用Client/Server的请求/应答和主动广播相结合的协议集模型。协议集中包括：登录、退出、控制信息传输及数据传输等协议。数据包格式的BNF描述为：
　　数据包：= 控制信息｜数据信息
　　控制信息：= 操作码｜信息发送者
　　数据信息：= 文本内容｜文本控制信息｜图形控制信息｜定位信息｜颜色信息
　　定位信息：= {坐标位置(X,Y)}
　　文本控制信息：=字体
　　图形控制信息：=宽度
　　由上可知，该协议集可扩充性强，用户可随时增加所需协议。
2.2 发言权控制机制
　　白板工具支持多人间的协同工作，因此冲突是不可避免的。当出现冲突时，为了使协同工作能够继续进行下去，系统必须提供显式或(和)隐式的解决冲突的机制。目前，WBTool工具所提供的发言权控制机制有：
・　　.自由竞争的民主式控制机制
　　各协作者的地位平等，对共享空间的操作控制由协作者自由争夺使用，谁获取控制权，谁就可以对共享空间进行操作。协作者凭借良好的愿望、常识和社会行为来避免冲突。
　　信息包图拥有三个重要对象：指标、维度和类别。WBTool工具对主席采用动态法确定，即发起讨论的人由系统缺省为该讨论室的主席，在讨论过程中缺省主席可放弃其主席地位而重新指定某成员为主席，该讨论室的成员由主席指定。主席通过维护一张参加讨论人员状态表对讨论人员的状态进行管理，并通过一个优先权队列对讨论人员的发言权进行分配。
　　由于超立方体在表现上缺乏直观性，尤其当维度超出三维后，数据的采集和表示都比较困难，因此我们可以采用一种称为信息包图的方法在平面上展开超立方体，即用二维表格反映多维特征。同时该工具通过提供一隐式的冲突检测和协调算法[1]来解决用户间出现的冲突。成功的信息包可以保证用户从信息包中获取需要的各个性能指标参数。在物理模型设计阶段，需要确定以下内容:
　　定义数据标准，规范化数据仓库中的各种数据;
　　定义实体和实体特征，完整定义实体所具有的一切属性;
　　定义规模，确定数据容量和更新频率。在WBTool工具中，动态组合语义光标由行为、识别、位置3部分感知信息组成。
　　(1)行为
　　由于WBTool工具提供基本图形绘制、文本输入及对象擦除等操作，为体现用户当前的操作行为，动态组合语义光标中提供操作行为域，并通过形状可变的光标技术加以表现，如手形光标表示用户进行擦除操作。
　　. 确定维度。WBTool工具由颜色标示法和用户名构造的字符光标组成，其中颜色和用户名是一对一的关系．
　　(3)位置
　　当用户在本地进行鼠标操作时，鼠标位置不仅能显示在本地共享空间上,同时也能显示在其他协作者的共享空间上。该信息通过行为和识别域隐含实现。
总之，通过动态组合语义光标技术，WBTool工具为协作者提供了比较完美的WYSIWIS效果。
3 结束语
　　介绍了一个支持群体协同工作的白板工具-WBTool。它采用多层Client/Server结构模型，支持实时、异步和临时3种讨论方式。同时对该工具采用的通信协议集，发言权控制机制和动态组合语义光标技术进行论述。
　　该工具目前已经在Windows 95/NT环境下，用Java语言开发完毕，并在并行工程桌面电子会议系统中得到了成功的应用。
表1　数据仓库与数据库中数据的比较

比较内容 操作数据仓库数据
存在时间生存期短，经常变化长期存在，相对静态
存取结果记录层的存取需求以聚集方式的集合存取，因此比RDB友好
存取方式反复的事务存取模式定期地报告式的特定查询
修改方式实时修改周期性地大批量修改装入
驱动方式事件驱动：过程产生数据数据驱动：数据支配过程
操作读写操作只读
规模几个GB可达100GB+

　　尽管数据仓库与传统数据库之间存在着如此大的差异，但我们设计数据仓库并不是完全另起炉灶，而是利用现有的传统操作数据，从中进行信息的集成，从而构造出满足不同需求的数据仓库