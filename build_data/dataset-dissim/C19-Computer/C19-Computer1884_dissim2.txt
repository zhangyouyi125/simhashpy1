微型机与应用
MICROCOMPUTER & ITS APPLICATIONS
2000　Vol.19　No.4　P.29-30



ＬＣ７４６２编码分析及单片机解码实现
丁福庆 李利军
摘 要： 对遥控编码发射集成块ＬＣ７４６２的编码及输出波形进行了分析，给出了用单片机对其解码的方法。
关键词： ＬＣ７４６２芯片 ＬＣ７４６２编码 单片机解码
1　LC7462简介
　　LC7462是红外遥控发送编码芯片，双列扁平20脚封装。本文分析了LC7462的发射波形进行了分析，并利用8031单片机对其进行了解码，它的典型应用如图1所示。

图1　LC7462的典型应用
　　由K10～K13共4条列线和K00～K07共8条行线组成了4×8矩阵也就是共32个键的按键电路。具有“无连接逻辑”的用户编程接口，能与8位或16位多路复用或非多路复用微控制器接口，扩展地址能力达24位。整个编码信号经三级管放大后由红外发射管发射出去。
2　LC7462的输出波形
　　LC7462是一个能发送0～31共32个编码的发送芯片。发送的信号如图2所示由二部分组成，第1个108ms是信号的关键，携带了编码信息。
1．3 I／O端口
　　PSD5XX系列具有40根I／O引脚，分为PA、PB、PC、PD、PE5个端口，其中端口A、B、E都能够构造成标准微控制器I／O口，或地址／数据多路复用控制器的锁存地址输出或特殊功能I／O口。需要注意的是，图2所示的波形是解调后的波形，实际的波形是1个约38kHz的方波载波被图2所示信号所调制。

图2 遥控信号的组成
　　指令的编码由第1个108ms的前67．5ms所携带，它的组成如图3所示。第1部分为1个9ms宽的头信号，停4．5ms后由4个8位二进制数组成，这个13．5ms部分是起同步作用的。第1个8位二进制数为定制码custom，第2个8位二进制数为定制码custom 的反码，第3个8位二进制数为遥控器的指令（即键值），第4个又为指令的反码。整个指令为67．5ms。
　　6．漏极开路输出模式此模式使用户能把端口C、D构造为漏极开路输出，CMOS模式输出是默认构造，只要将“1”写进漏极开路寄存器的相应位即可。1个二进制位的0和1的宽度不同，而1个8位的二进制数中含有1和0的个数是不固定的，所以1个8位的二进制数宽度并不固定。但2个互为反码的8位二进制数的总宽度应该是固定的。因为共有16个二进制位，1和0各有8个。此外，RESET、ALE信号可由软件编程控制其极性。1个具体的8位二进制数发送波形如图4所示。端口C、D是标准I／O口，也可构造成ZPLD输入引脚或非多路复用总线单片机的数据总线。

图4　1个二进制数的8个位
　　编码中设置了定制码是为了使用相同的芯片的遥控器在控制不同种类的设备时不出现互相干扰以及控制错误等现象。
3　单片机解码的实现
　　以8031单片机为例进行说明。红外信号被接收后，首先是放大、解调，然后再倒相、整形，使之成为TTL标准的电平。
　　5．替换功能输入模式
　　用户在模式下能定义端口E的引脚，以执行替换功能，主要是计数器／定时器的输入，构造方法如下：
　　（1）在PSDsoft软件中选择输入功能；
　　（2）PSD编译器为选定的功能指定引脚。
1．4 可编程逻辑PLD
　　PSD5XX系列的核心是能执行以下功能的ZPLD：
　　（1）译码ZPLDDPLD，执行对内部I／O、外围芯片、4个EPROM块、SRAM和端口A外围模式的地址空间译码；
　　（2）通用功能ZPLDGPLD，用来实现状态机和其它一般逻辑，具有多达61个输入，118个乘积项，连接到端口A、B、E的24根I／O引脚。另外再设置1个计数器，每到来1个脉冲，INT1就中断1次，每次中断就读取1次计数器的值，并将计数器的值清零，为下一次计数做好准备，同时脉冲序号变量＋1。这样设计出的电路不仅复杂、而且电路可靠性降低、产品开发周期延长，实际使用时，还存在调试困难、抗干扰能力差、不具有通用性等问题。
器件存储器空间存储器页面
EPROM块00000H～7FFFH页面0
EPROM块10000H～7FFFH页面1
EPROM块20000H～7FFFH页面2
SRAM8000H～8FFFH所有页面
I/O设备D000H～D0FFH所有页面

3．2 I／O端口的配置
　　PSD5XX的端口具有多种工作模式，某些基本功能为ZPLD和计数器／定时器提供输入／输出，或者用作标准I／O端口，每1根端口引线都可以单独构造。
　　编程时应注意的是同步头的获得，也就是9ms＋4．5ms＝13．5ms宽的同步时间。只有获得了这个同步头以后才能开始对各位脉冲进行计数，否则按干扰处理。
　　在读取计数值时，因为计数器有高字节TH0和低字节TL0之分，所以读数必有先后之分，比如先读高字节，则在读低字节时高字节可能因低字节的进位而发生了变化。为了克服这种情况的出现，在读完低字节后再读1次高字节，将前后2次的高字节读数进行比较，如果相等则此读数有效；否则重复上述过程，直到读数有效为止。
　　因篇幅关系，这里没有给出源程序，感兴趣的读者可同作者联系。此外，芯片内部含有16Kb的StandbySRAM，也可以构造成8位或16位数据宽度，存取时间为90ns，包括地址锁存与译码PLD时间