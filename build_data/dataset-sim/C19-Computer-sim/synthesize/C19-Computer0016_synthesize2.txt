钣金产品CAD/CAPP数据接口子系统的建立，使系统更充分利用AutoCAD平台的二次开发功能，实现了钣金产品设计制造的参数化、标准化、品牌化、自动化，缩短新产品生产周期，提高生产效率只从*.DXF中提取与工件廓形数据有关的实体段信息(、SNS、Litton)到程序中；进行分析计算找出图形信息中外轮廓上一点，依据此点找出外轮廓加工环；在剩余的图形信息中寻找其余的内轮廓加工环(CIRCLE作为一个独立的加工环)；判断环向，并将加工环所含图形信息依环向写入数据输出文件中
　　.备份存储的空间是否防窃、防磁干扰、防火计算机应用
COMPUTER APPLICATIONS
1999年 第19卷 第6期 Vol.19 No.6 1999



板材柔性制造系统之中的接口技术
陈慧宝　程远利　张振龙
　　摘　要　本文介绍了板材柔性制造系统中的信息接口技术。叙述了CAD/系统集成技术中的一些关键问题，并提出了有效的解决方法。
　　关键词　钣金,板材,CAD/,数据接口
　　我们为沈阳某科技公司板材柔性制造系统设计了一套钣金产品计算机辅助设计系统。。钣金CAD基于通用绘右图软件AutoCAD进行二次开发；CAD/CAPP数据接口模块通过对CAD子系统的图像进行分析处理后，传输给CAPP子系统完成CAD/CAPP的内部数据连接，对信息联机传递、实时处理。由于钣金加工特点(板材均匀性)，因此可以简单按二维图形处理。只要输入几个关键的参数，系统自动生成钣金零件的三维视图和展开图。展开图是一个二维图形，CAD/CAPP数据接口对展开图的*.DXF命令组文件进行处理，传递信息到CAPP子系统用于满足板件的冲裁下料。
　　读取余下的实体CIRCLE作为内环。
　　1） 展开图二维图形由直线、弧形、圆组成，所有几何学特征均在一个平面上。。不重合重复此进程，否则外轮廓环S0组环结束。
　　CAD系统的信息模型是几何学模型、线架模型、面架模型及体素造型，对于公差和技术要求是按标注信息进行处理。。
三、备份策略
　　定期备份数据库是最稳妥的防止磁盘故障(主要是系统发生故障)的方法，它能有效的恢复数据，这是一种比较兼价的保险形式，同时也是最简单的确保能恢复大部分信息的方法。
　　. 存在大量或非加工信息
　　钣金展开系统是在AutoCAD软件环路境下开发的，从CAD子系统传过来的*.DXF命令组文件包含了标准零件图的所有信息，其中包括尺寸线、辅助线等非加工信息；使得操作CAPP子系统时，容易产生加工环不清晰，生成错误的NC操作指令。
　　. 几何线段不重合
　　由于*.DXF文件中的几何点信息是CAD图形通过内部计算而获得的，许多图形元素的几何交点实际上是两个点。尽管两点间的误差很小，不影响加工精度，但是这样的图形数据不能用于CAPP子系统进行自动工艺编程。。如不能保证闭环，更不能保证组成环的各图形元素之间的拓扑关系。。。
　　.电源故障，指一般的UPS无法保护的异常电源故障。
2　解决方法
2.1　把问题消灭在CAD子系统内
　　在CAD子系统总体设计时考虑CAPP的要求。
2.2　独立的数据接口
　　该方法的思想是在CAD子系统中充分发挥AutoCAD的开发平台，暂不考虑CAPP子系统的要求。对于CAPP子系统，做一个数据接口软件，其任务是对零件展开图的*.DXF文件做进一步处理，内容包括：剔除非加工信息（包括不必要的工艺信息和技术说明）；修正消除几何不重合点，创建拓扑关系，找出加工环；按照事先约定指出加工环走向。
3　设计思想及算法实现
　　在钣金产品CAD子系统中，零件展开图先用AutoCAD的EXPLODE命令将图形打碎，再生成相应的*.DXF文件。。

图1　系统组成简图
1　钣金产品图像数据特
　　钣金产品CAD子系统是基于变量化思想而设计的。

图3　流程简图
3.1　系统的数据结构
　　本系统数据结构采用双向表结构。
　　.是否指定其他人实行备份，他们是否享有必要的登录号和口令。
　　建立

　class ARC:public CIRCLE,public LINE
　{ 
　int Direct;
　};
　　其中，类ARC是类CIRCLE、LINE的子类。
　　类CIRCLE、LINE中的成员：Center代表圆心；Radius表示；Start，End分别为直线或圆弧的起始点和终止点坐标；Direct是ARC中独有的成员，它标示圆弧的方向：沿顺时针方向等于+1，圆弧沿逆时针方向等于-1。
3.2　几何信息提取模块
　　图形实体经打碎后成为“LINE”、“ARC”、“CIRCLE”三种类型(经研究发现，对V13.0图形实体打碎到最后均为LINE、ARC、CIRCLE，如Fit拟合的Pline解碎后为Arc，Spline拟合的Pline解碎后为Line等)。因此程序的以ARC、LINE、CIRCLE为对象。程序从*.DXF文件的实体段(ENTITIES)中调用一个实体，判断其是LINE还是ARC或CIRCLE，分流后按其组码提取几何信息。
　　例如：对于直线，可用10和11组码提取其起点、终点坐标。
3.3　组环算法
　　每一个class中都有一个Distant()函数，这个函数用于寻找每一个实体上距原点距离最大点。
三、备份策略
　　定期备份数据库是最稳妥的防止磁盘故障(主要是系统发生故障)的方法，它能有效的恢复数据，这是一种比较兼价的保险形式，同时也是最简单的确保能恢复大部分信息的方法。
　　如果N1为圆，则此零件外加工环即此圆。
　　如果N1为直线或圆弧，则以实体N1为基准组环S0(外轮廓加工环)。以N1起始点为环S0的起点，以N1终止点为环的下一个实体的起始点。
　　其余实体(只考虑直线和圆弧)的起止点，寻找近似重合点(当点与点之差距小于某个很小的整数ε，认为是重合点，并作几何交点啮合)作为相邻两基本图形实体的交点。该点所在实体作为环的第二链，继续在余下的实体ARC和LINE中寻找环的下一链，并判断链中的终止点是否与环的起点近似重合。
　　2） 落料加工的所有工艺特征，如粗糙度、定位精度、直线度等均由NC机床保证。。直至所有实体ARC、LINE均组入各环中。

图2　钣金件设计方案
　　钣金产品的设计和加工有其自身的结构、材料和特点。
3.4　数据输出模块
　　在输出时判断环的走向。对于三个实体组成的环，直接两实体乘，运用右手定则判断环的走向；对于一般实体环寻找环内点，引直线进行叉乘计算判断环向，再按照约定格式输出数据到数据文件中，并将数据文件传送到CAPP子系统。
　　CAD/CAPP集成实际上是结构设计模块与加工工艺模块的结合。CAD/CAPP数据接口子系统将CAD模块输出的图形信息转换成CAPP可以接收识别的数据格式，实现了CAD和CAPP之间信息的提取、交换、共享和处理。该系统由CAD、数据接口、CAPP三个组成。
作者单位：上海大学电子工程学院　上海(201800)