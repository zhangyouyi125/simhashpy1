 
v = I*100/255　　(3) 
I 是地形表层点法线方向的函数， I 的计算将在下面介绍文中讨论了基于 HSV 组合视觉模型的晕渲建模和色彩分量计算方法，并给出了在 ARC/INF°环境下实现这两项过程的 AML 语言程序钱从付方的纸面支票上取出，并
对其进行编码，在实际的纸面支票到达收方之前把数据发给收方排序机工程
COMPUTER ENGINEERING
年 第25卷 第8期 Vol.25 No.8 1999



利用ARC/INFO制作全彩晕E560
黎弘，翟战强，唐树才
摘要：在对HSV彩色视觉模型进行分析的基础上，构造了两组由、及法线方向到HSV色彩空间分量的映射模型，并利用ARC/INFO的AML语言编程，在SGI工作站上实现了对数据的晕渲处为理。。实验表明，用本文的方法绘制的晕渲图比 ARC/INF°手册上介绍的方法建立的晕渲图具有颜色动态范围大、立体感强、色彩也更丰富的特点，可以更好地反映地形形态的变化。本文采用 HSV 彩色显示模型，建立地面点高程、坡度和表面法线方向到 HSV 色彩分量之间的映射关系，根据人眼的视觉特点，对地表方向和坡度采用线性映射，而对于高程采用了指数函数变换，这便于突出地表参数的动态范围，增强立体效果。 DEM 数据生成一般是在矢量化和离散高程的基础上进行内插生成的，这方面的文献很多，本文不作讨论；晕渲处理建模的任务是，建立地表特征与视觉空间色彩激励分量之间的映射关系，常用的视觉空间色彩模型有 RGB 模型和 HSV 组合模型。 
3 结论
　　ARC/INF°手册中给出了基于地形高程和坡度参数的等范围赋值映射方法，用该方法制作的图具有软表面 (Soft Surface) 的感觉。 
1 HSV彩色视觉模型 
　　在色彩空间中，彩色光的基本参量可以用明亮度 (Iten-sity) 、色度 (Hue) 和 (Saturation) 来度量。 
　　(2) 地面斜度 α 的计算 
　　坡度有两种表示方式，一种是百分比坡度 pα ，它是高度的增值与水平距离变化值之比；另一种是角度坡度 α ，即用坡面切线与水平面的夹角表示 ( 参见图 4) 。色调反映了颜色的类别，彩色物体的色调决定于物体在光照射下所反射的光谱成分。饱和度是指彩色光所呈现的深浅程度，对于同一色调的彩色光，其饱和度越高，说明它的颜色越远，饱和度越低颜色越淡。。基于 Tektronix 彩色标准的基本颜色系可用图 1 所示的锥体表示，对于世界中的任意颜色，可用上述 3 个基本参量来描述，而在视景仿真中则可用这 3 个参量来合成地面景物的颜色。。。２３个主要的金融机构，其中包括美国运通银行，已签约参与联机
银行业务。该软件公司因开发出一个叫Ｑｕｉｃｋｅｎ的家用
电脑财务管理系统而闻名。。
关键词：可视化；数字高程模型；晕渲右图
Making Terrain Shading Mad with ARC/INFO
Li Hong,Zhai Zhanqiang,Tang Shucai
(The Third Institute of the Second Artillery Army,Beijing 100085)
【Abstract】This easier presents a set of model for mapping DEM data t°HSV color space,experiment is programmed with AML supported by ARC/INF°software on the SGI workstation.The shaded image with the method described in the paper is colorful and shows wide dynamic range.
【Soft words】DEM;Visualization;Shading map
　　在地图制图中，经常利用地面对高程的晕渲处理来表现地表的高程、起伏状况及斜度变化等；在作战模拟与飞行视景仿真中，地形晕渲处理可应用于对战线地理环境的可视化。明亮度是光作用于人眼时引起的明亮，一般来说，彩色光所含热量越大则显得越亮，反之则暗。再也不用纸的支票本了，而是从一个类似便携式电脑里广泛使用的ＰＣ卡中提款。用 z = f(x,y) 表示地面地形的高程分布，则 pα 和 α 的计算可表示为： 

图4 坡度的表示
pα(x,y)= sqrt(fx'(x,y)2+f y'(x,y)2)　　(4)
α (x,y) = Arctan(pα(x,y))*180/ π　　(5)
　　DEM 格网数据为离散的地表点高程值，由 DEM 计算地表的坡度，可用如下差分形式计算： 
pα(i,j)= sqrt((dz/dx)2 +(dz/dy)2)　　(6) 
在点 (i,j) 处的 dz/dx 和 dz/dy 可用该点周围的 8 邻域离散点的高程值计算 ( 参见图 5) ： 

图5 点（i，j）的8领域坐

　　其中： x_时间量子_space 和 y_mesh_space 分别为 X 和 Y 方向的格网精度。则表面点 P 反射到观测位置的能量 I 可使用如下简化模型计算： 

图6 表示反射光强度的计算
I = 255[kd ( L middot; N) +ks ( S middot; V) ]　　(7) 
　　其中 kd 、ks 为反映表面反射特性和漫反射特性的常数，当给定光照角、观测方位角以及观测距离时，则 I 是表面点法向量 N 的单值函数。 ARC/INF°的 TIN 和 GRID 均提供表面阴影计算命令 ( 函数 ) ，可以利用 TIN 提供的命令计算出地形表面每一点的阴影值，也可利用 GRID 提供的函数对式 (7) 编程，实现每一表面点亮度的计算。。显然，对于一般
人来说，这些加密技术还是可靠的。利用上述 HSV 模型，我们在 SGI 工作站上制作了多幅地貌晕渲图，实验所用 DEM 数据是由 ARC/INF°的空间数据模型产生的。 
　　依据式 (1) 、 (2) 、 (3) 计算地表每个点 H 、 S 、 V 分量，将它们发送到相应的显示通道，即可组合成反应地表特征的彩色图形。本文给出的 AML 源程序在 SGI 上的 ARC/INF°版本 1.7.4 下调试通过，可以方便地移植到其它平台的 ARC/INF°环境下运行。