
作者简介：肖捷　工程师但该方法有以下不足：① 升级过程繁杂,机器切换会使服务暂时之中断,并造成旧有计算资源的浪费；② 越往高端的服务器发展,所花费的代价越大；③ 一旦该服务器或应用软件失效,会导致整个服务的中断计算机应用
COMPUTER APPLICATIONS
1999年 第19卷 第6期 Vol.19 No.6 1999



与系统结构设计
肖　捷
　　摘　要　本文通过对VPN系统的两种基本技术的分析，提出了防火墙系统总体设计的基本，并设计了一种基于过滤器技术、技术和身份验证技术相结合的实用防火墙系统。
　　关键词　包过滤技术，技术，身份验证
1　防火墙
　　随着 在世界范围内的普及，安全问题变得愈来愈重要。 为了防止侵入者盗窃、修改或系统上的数据，维护私用网络和防止对计算机资源的非授权使用，获得对Web比较安全的应用，防火墙系统是一种重要的应用模式。
2　防火墙技术分析
　　根据ISO/OSIIPsec，防火墙技术主要分为两大类：是建立在应用层上的基于包过滤技术的防火墙;另一类是建立在应用层上的基于代理技术的防火墙。
　包过滤技术防火墙
　　包过滤技术防火墙，也称网络层防火墙，作用于IP层，通常由过滤路由器来构建，其实现原理是：对每一个到达过滤路由器的IP包，过滤路由器从IP包头中获得有关信息，如：IP包头中协议类型、源IP地址、目的IP地址、源、目的网络地址及各种标志位等信息，根据过滤路由器中预先制订好的过滤规则进行检查，决定IP包的通过或阻塞，从而实现对IP包的过滤，其核心就是过滤规则的制订。如1。

图6　代理服务器逻辑结构
　　我们选用Netscape Proxy server3.5代理服务器软件，在安装好代理服务器后，再设计一个代理服务器的配置文件，代理服务器根据该配置文件的源IP地址、目的IP地址和身份验证控制内外网络的访问职权，利用监控、记录模块实现对所有数据流的监控和记录，以提供网管所需的各种数据。

右右图1　过滤路由器防火墙系统连接结构
2.2　代理技术防火墙
　　代理技术防火墙，也称应用层防火墙，作用于应用层。其核心是运行于防火墙主机上的进程，它代替网络用户完成特点的TCP/IP功能。。测试软件是美国ZD LABS的WebBench 1。连接结构如图2。能否开发一个包罗万象的代理服务器，将有利于新应用的挂接。这种防火墙技术的优点是它能完全控制通信双方的会话过程，具有用户级的身份验证、日志管理和帐号管理功能，了比过滤路由器更为严格的安全性，缺点是缺乏透明性，影响网络性能，必须针对每一项服务都建立对应的应用层网关，才能提供更多全面的安全保证，这势必严重限制新应用的接纳。这种防火墙技术的优点是简单方便，透明性好，速度快，对网络性能影响不大，缺点是正确建立和管理包过滤规则比较困难，同时还缺乏审计、跟踪及身份验证功能。采用这种过滤制度，使得路由器中的规则库仅包含3条规则，既方便维护和管理，又易于验证过滤规则的完备性和正确性。

图3　过滤路由器+代理服务器防火墙系统连接结构
3　防火墙系统总体设计基本思想
3.1　设计防火墙系统的拓扑结构
　　在确定防火墙系统的拓扑结构时，首先必须确定被保护网络的。。详细讨论了虚拟Internet服务器的体系结构、设计方法和实现技术,并给出了相应的性能测试结果。一、双宿主主机结构，通过在主机中插入两块网卡实现硬件连接，它是防火墙系统使用的最基本配置，这种防火墙主机的重要性是路由被，网络两段之间唯一的路径是通过应用层的服务程序来实现。该方法具有良好的伸缩性,也无需对客户机和服务器作任何修改,可适用于任何Internet站点。三、屏蔽子网网关结构，即由两台路由器和一台堡垒主机构成一个中间的过滤子网，由其实现外部网与内部网的分离，但内部网、外部网都可以访问中间的过滤子网，显然，这种结构的安全性较好。二、屏蔽主网关结构，即由过滤路由器和代理主机分别实现包过滤和代理服务两级安全防护，其中代理主机是这种结构防火墙系统的中心主机，通常称为主机。通常有三种主要的拓扑结构。假设每台服务器的权值为Wi(i=1,。
3.3　确定包过滤规则
　　包过滤规则是以处理IP包头信息为基础，在设计包过滤规则时，一般先组织好包过滤规则 ，然后再进行具体设置。
3.4　规划代理服务器
　　代理服务器(PROXY)是防火墙系统中的一个服务器进程，安装运行在防火墙主机上，为内部网络与外部网络充当中继，阻止内部网络与外部网络的直接连接。。对于网络管理员来说，选择一个成熟且便于管理和配置的代理服务器程序非常重要，图4给出了代理服务器的逻辑结构。

FTP代理TELNET代理WWW代理……
用户身份验证模块
监控、记录模块

图4 代理服务器的逻辑结构
4　防火墙系统设计实例
　　按照防火墙系统总体设计基本思想，本文给出了一个基于包过滤技术、代理技术以及身份验证技术相结合的实用防火墙系统，拓扑结构如图5。该防火墙系统由一个内部路由器、一个代理服务器和一个边界路由器构成一个中间的过滤子网，以实施安全防护。

图5　实用防火墙系统拓扑结构
4.1　包过滤规则的设计
　　对于过滤路由器中过滤规则的设计，我们采用的安全策略是：不允许IP源路由，起于内部网络的服务允许给过滤子网中的代理服务器，允许外部网络到代理服务器的流量，允许过滤子网中代理服务器到内部网络的流量。连接结构如图3。设计的过滤规则如下表。。本文提供了一种常用的代理服务数学模型，其逻辑结构如图6。

图2　代理服务器防火墙系统连接结构
　　综合上述两种防火墙技术的优缺点，在实际构建防火墙系统时，通常由过滤路由器和代理服务器组合在一起构成一个混合的多级防火墙系统，由过滤路由器提供第一级的安全防护，主要用于防止IP欺骗攻击，再由代理服务器提供更高级的安全防护制度。。
5　结论
　　网络的安全性涉及许多方面，本文主要从防火墙的设计、实现方面进行探讨，给出了一种实用的防火墙构建模型，希望能给读者有所帮助。。研究方向：计算机网络及数据库系统。
作者单位：广东省韶关大学　广东.韶关（512005）
参考文献
［1］　（美）Chris Hare Karanjit Siyan,着.Internet防火墙与网络安全.北京:机械工业出版社,1998
［2］　（美）David Wolfe,著. Microsoft Proxy Server开发指南.北京:电子工业出版社,1998
［3］　(美)William A.T., Mary A.P., Keith A.B,著.Internet 使用大全.北京:清华大学出版社,1995
收稿日期:1999-01-10(修改稿)
