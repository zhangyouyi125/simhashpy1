举例来说,如果一台路由器的路由表之之之中有如下3项:〈166计算机应用
COMPUTER APPLICATIONS
1999年 第19卷 第6期 Vol.19 No.6 1999



PowerShell5.0 Pontgibaud制作的关按键技术
石建勋　杜戈　孙景琪
　　摘　要　本文在介绍利用Action Builder制作PowerBuilder安装盘过程的，着重了制作安装盘中、注册、可重复使用等关键技术。
　　关键词　安装盘，ODBC，注册，可重复使用
1　引言
　　PowerBuilder是PowerSoft公司推出的数据库应用系统的工具。由于它基于客户/服务器体系结构，内置强大并易于使用的第四代编程语言（4GL），具有面向对象的插件开发方法以及可视化的开发环境，适用于各种不同的数据库管理系统，现已成为当今最流行的数据库前端开发工具之一。
5.3　读取工程文件
　　首先选中一个部件（component）,然后点击主菜单Action中Read Project Object选项，在弹出的子窗口中的应用（Application）中选取先前已生成好的应用程序的工程文件(.prj)，则构成此工程文件的exe、pbd、dll文件会填加到所选部件的Files属性中。。
2　安装盘的制作过程
　　PowerBuilder提供了专门制作安装盘的工具Install Builder.它的用户界面看起来比较复杂，选项也很繁多，但只要掌握安装盘的制作过程和必要方法，还是能够简便快捷的制作出应用程序安装盘的。


3　生成
　　制作安装盘的前提条件是:将应用程序编译成可执行文档（.exe）及PowerBuilder的动态链接库文档（.pbd）。这只需要在PowerBuilder应用画笔中创建工程文件（.prj）即可。其具体步骤在很多PowerBuilder的工具书中都有详细介绍，这里就不再赘述，但要强调一点：为了减少程序代码长度，在“代码生成选项”（Code generation options）中，选择“机器码”（Machine Code）。
4　生成配置文件（.cfg）
　　生成工程文件后，进入安装盘制作工具Install Builder的集成环境中，为要作的安装盘建立一个配置信息文件(.cfg)。
4.1　安装盘界面设置
　　点击主窗口工具栏中New按钮，建立一新的CFG文件。这一步骤包含的内容较多，涉及安装盘界面设置、初始化文件设置、程序注册等重要操作，是制作安装盘的关键所在。在弹出的弟窗口中,设置应用程序运行时的窗口标题、安装程序的图标、安装程序运行时的背景图案、文字及背景的颜色、要安装到的目标操作系统类型（16位或32位）等项目。也可以缺省不填这些项目或者在主菜单中Options选项中补填。
4.2　及属性设置
　　在主窗口的工作区中填加应用程序的主要组件（component）以及相应的子部件（subcomponent）（点击工具栏中 Comp 和Add Sub按钮进行操作）。一个部件包含了某一类型文件，如：应用程序文件、自定义INI文件、帮助文件、数据库文件、系统隐含文件等等。一个部件也可以细分为几个子部件。在各部件下的Files属性（标签页的第一项）中，利用工具栏中Select Files按钮，填加本部件所需的文件。每个部件以及相关子部件共用一个安装目标路径（Managed Destination ）,即此部件下的文件会按指定的路径安装到目标系统中。
　　其中有几个缺省路径，含义分别是：
　　@(base)―数据库文件所在路径
　　@(windows)――windows的路径
　　@(system)――windows\system的路径
　　@(componentname)――已定义过的部件所指的路径。
5　生成压缩文件及制作磁盘
　　从安装盘制作工具Install Builder的主窗口菜单上找到Actions选项，其下共有操作子选项，接下来按照这五个子选项依次操作。。
孙景琪　教授。安装盘制作工具Install Builder为此提供了非常简便快捷的方法：点击工具栏中InI Files按钮，从中选中你使用ODBC作为接口得数据源，则有关此数据源的ODBC配置信息将自动拷贝到部件的INI Setting属性中。
4.4　程序及数据库注册
　　作为一个标准的windows应用程序，需要将本应用程序的一些信息通告windows操作系统，以便系统管理和操作。这就涉及到windows注册（registry）问题。尤其对于数据库应用程序，注册程序和数据库关系到能否正确连接应用程序与数据库。因此，注册问题是关系到安装盘制作成败的关键技术之一。应用程序的注册信息可以手工配置，但大多数编程者对注册的项目、格式不是很熟悉，而且其过程也很繁琐。
2 宽带IP路由器设计中的主要问题
　　目前的宽带IP路由器主要采用第1节中提到的第3种和第4种体系结构。。选取HKEY-―CURRENT―USER\ODBC\ODBC.INI中此类型数据库进行数据库驱动注册。若使用的是通过ODBC连接的数据库，除注册此类型数据库驱动之外，还需注册ODBC数据源（ODBC Data Sources）的驱动信息。。。如果数据库使用的是通过ODBC(开放数据库接口)连接的，则还需要在此配置ODBC信息（包括：数据源类型、ODBC数据源驱动程序、数据库名、启动程序等等）。
　　若想在安装程序时，将某一部件的路径加到系统启动批处理文件Autoexec.bat中去，选中Add to Path选项；若想将本部件下的文件隐含，使用户不可见，则选中Hide from User选项；若想在安装盘运行时，安装不同的部件显示不同的背景画面（PowerBuilder的安装过程就是如此），则在相应部件下的BillBoards属性中（标签页的最后一项）加入希望显示的位图（.PNG）;若部件需要使用超过8位的长路径名，则在部件的Additional Options属性中设置。在高速宽带IP路由器领域中,需要进一步研究的问题有:
　　(1) 如何支持流标识。。。
　　定义可重复使用部件的过程包括文件选择、初始化文件以及程序驱动配置等，而此过程已在Install Builder当前目录下的instbldr.ini文件中设置完毕。当点击Actions中Define Reusable Components选项时，Install Builder会自动按照instbldr.ini中的设置，将缺省的可重复使用的各部件及相关文件显示到新打开的定义可重复使用部件的窗口界面中。在此窗口下，可根据程序需要增减部件及相关文件。其操作类似于定义部件及子部件时的操作。有经验的编程人员还可直接对instbldr.ini配置文件进行编辑，是相同的。那么,我们如果把所有的队列都放到输入一端,又如何呢。
　　文献［21］提出了基于plugin的路由器操作系统体系结构,在该体系结构中,上层协议软件可以作为plugin动态加载到操作系统内核中执行,以获得高性能和高可扩展性。当虚拟输出队列中有多个分组时,得不到交换机会的队列头部分组就处于输入阻塞状态。当根据自己的应用程序精简可重复使用部件后，点击本窗口工具栏中compress按钮，将所包含的文件进行压缩。当压缩成功后，系统回到原来的主窗口界面。。目前常用的程序汉化技术有两种：一种是首先安装并运行一个汉化平台，提供动态的汉化环境，再运行需汉化的应用程序，此时可动态汉化英文界面。选择好拷贝份数及驱动器号（A:或B:）,确定后，Install Builder将磁盘映象拷贝到磁盘中。此外，可以在Create Uninstall Icon选项旁打勾，即可自动生成反华安装程序（或叫卸载程序）。
　　我们从实际应用需要出发，结合制作安装盘的亲身体会,讲述PowerBuilder安装盘的制作方法与关键技术,使大家对PowerBuilder在制作安装盘方面的强大功能有进一步的认识，以推广Install Builder安装盘制作工具和PowerBuilder开发工具的应用。
5.4　生成磁盘映象
　　这一步将生成整个安装盘的压缩文件，并临时存放在本地硬盘中。此类压缩文件称为磁盘映象。点击Action中Create Diskette Images选项。在弹出的子窗口中为磁盘映象选择一个路径。窗口中罗列出已压缩过的可重复使用部件，可根据需要，选取其中有用的部件。安装盘的容量大小也可方便选择。。最后按Create键开始生成安装盘的磁盘映象。掩码的选择既可以使用迭代方式,也可以使用层次方式,还可以使用地址的前几位指向一个前缀长度列表。中国电子学会教育委员会委员。点击主菜单Action中Define Program Group选项，在弹出的子窗口中，可根据提示逐一填写：程序组名称、程序组中各应用的名称及相应路径和执行文件等。至此，我们成功的利用Install Builder工具包制作出了PowerBuilder应用程序的安装盘。
6　安装盘英文界面的汉化
　　Install Builder是制作英文界面安装盘的工具包。对广大中国用户来说，英文界面不够友好，也不直观。如能在已搞好的英文界面安装盘的基础上，将安装盘转换成中文界面，会更方便中国用户的使用。这就涉及到安装盘的汉化。下面就为自己的应用程序定义程序组。如四通利方、东方快车等软件；另一种汉化软件能从需汉化的应用程序中提取出英文词句并用汉字代替，汉化过程是永久的，汉化完毕再运行程序应用时，只要在中文windows平台上就可显示出中文界面。
7　结束语
　　随着PowerBuilder的强大功能不断被人们所认识，越来越多的软件开发人员使用PowerBuilder来完成各种数据库前台的开发工作。我们希望本文对于广大开发人员在制作PowerBuilder程序安装盘方面能有所启发和帮助，以更好的完成开发工作。
作者简介：石建勋　硕士研究生。参与某大型信息管理系统的数据库策划与开发工作。
杜戈　硕士研究生。参与某大型信息管理系统的数据库设计与开发工作。0/8,5〉。点取Action中Create Diskette选项，子窗口中会显示出拷贝完整的一套安装盘所需的磁盘数(Number of disks in set)。
作者单位：北京工业大学电子工程学系　北京（100022）
收稿日期:1998-12-29(修改稿)
