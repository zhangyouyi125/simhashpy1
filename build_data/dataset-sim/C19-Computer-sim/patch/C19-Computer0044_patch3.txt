计算机工程
COMPUTER ENGINEERING
1999年  第25卷 第7期 Vol.25 No.5 1999



利用JDBC实现基于Internet的网上答疑系统
印　王行言　王蕾
摘要　介绍了一个利用JDBC实现的基于“客户机-Web服务器-数据库服务器”三层体系结构的因特网上答疑系统。系统的功能设计方便、有效，在实现上选用了新兴网络编程语言JAVA及其数据库存连接技术JDBC，使系统可在不同的软硬件平台上顺畅运行；管理和使用也非常方便、灵活，只需因特网上的通用浏览器软件即可，具有一定的推广价值。在试题的非图形信息数据库中。
　　传统的答疑一般采取类似于医院里专家门诊看病的形式，由任课教师定期在固定地点"坐堂"，接待前来答疑的学生并解决他们的"疑难杂症"。这种方式存在着不均衡、不充分、不灵活和效率低等缺点。对工程制图试题库而言。计算机网络技术的成熟和发展，为解决这个问题，提供了一个新的思路。
2　网络答疑模式及其平台环境
　　网络答疑，就是利用计算机网络设施和相关软件来帮助教师和学生间进行超越时空的网上交流，将答疑的场所从固定的教室转移到无所不在的网络，将答疑的时间从有限的固定时段变换成自由随意的时刻，从而实现更加方便、高效的答疑活动。
　　此外，定期的把某些数据，某些表或全部数据备份到光盘，软盘中，放于保险的安全处，也不失为一种好方法。
　　.使用静态备份还是动态备份，(动态备份也即允许数据库运行时进行备份)。

图1　校园网络教学环境
　　传统的WWW网络应用，以单纯地浏览保存在服务器上的静态信息为主；随着需求的提高和变化，在静态内容的基础上加入动态的、交互的功能，已经成为目前网络应用的一大发展趋势。为适应这一趋势，网络应用的体系结构也已经从原有的"客户机-服务器"两级模式逐步转变成"客户机-服务器-数据库"的三级模式，或者更进一步的"客户机-Web服务器-应用服务器-数据库"四级模式结构。但点阵图形所占存储空间比矢量图大得多，上千道试题的图形如果采用点阵格式必将占居庞大的存储空间，使运行速度降低；再者点阵图形无法修改，题库只能设计成封闭型，给题库的维护和使用带不不便。

图2 网络辅助教学系统的应用结构
　　图2中所示的是我们开发的网络辅助教学系统的应用体系结构，网络答疑系统是这个辅助教学系统中的一个子系统。同理可计算图幅为二分之一页试题的整页数，并进行排版。其中试题章节、试题特征(每一章节试题根据特征分成若干类)、试题难易程度、优先权(根据教学要求和试题特点确定选择的先后顺序)是查询所需的关键字段。
3.1　学生使用功能
　　提问：当学生连接到特定的网络地址并输入课程编号时，将启动服务器上负责处理提问的CGI程序，这个程序将接受学生提出的问题，包括问题题目、问题内容，以及可能的附加文件，并将这些信息传回与服务器相连的后台数据库保存起来。
　　查看FAQ列表：在网络答疑系统中，为了提高效率，我们引入了"常用问题解答列表"(FAQ--Frequently asked questions)，FAQ中列出了一些常见的共有问题及其解答，学生在提出新的问题之前，可以先查看一下FAQ，如果发现自己的问题已经有了答案，就不必再提问了，这样大大提高了答疑系统的使用效率，避免了教师的重复劳动。
　　学生的提问和老师的回答都可以附带各种类型的附加文件，如计算机课程中的源程序文件、可执行文件、包含了公式和图表的WORD文件等，查看时只需点击所显示的附加文件名就可以把它从服务器端下载到本地保存或直接打开查看。
　　题库选择目前最流行的可视化编程语言Visual Basic 6.o进行编程，使用OLE控件，可以同步将与Access数据库连接Auto CAD图形试题在VB程序中显示。
　　修改问题：若教师认为某个问题可以保留，但是学生提问的表述不是很确切，可以修改这个问题的内容，使之更加清楚、明确。
　　给出答案和附加文件：对于可以保留的问题，教师应给出问题的解答，必要时还可以附加一个文件来进一步明确问题的答案。
　　设置问题为FAQ：对于有代表性的问题，教师可以把它列入FAQ列表在网上发布。因此Microsoft SQL Server在许多单位得以应用，然而其数据库系统产生各种故障的可能性始终存在，更要求我们合理备份数据库中的数据。
　　.使用什么介质，(磁带还是磁盘)。由于我们的系统涉及了较多的数据库操作，就必然要使用到JAVA连接数据库的JDBC技术。余下的图幅为四分之一页、二分之一页的试题有七种排版模式，根据具体情况选择相应模式排版，不足一页按一页计。所有试卷模型放在同一文件中，同一类型的模型放在一起。1998年被称为是JAVA在服务器端大量应用的一年，这与JDBC技术的广泛使用是分不开的。
　　.使用静态备份还是动态备份，(动态备份也即允许数据库运行时进行备份)。

图3 JDBC基本结构
　　可见JDBC主要包括JDBC API，JDBC Driver API和各种JDBC驱动程序，它是JAVA程序通过因特网访问数据库的接口。使用JDBC实现应用程序对数据库的访问主要有如下的好处：
　　(1)平台独立：同一个具数据库功能的应用程序可以运行在不同的软硬件平台上，
　　(2)多数据库连接：同一个应用程序可以与不同平台上的不同数据库相连接。
　　在网络答疑系统中有大量需要通过因特网来访问数据库的操作，为了提高系统的通用性和可推广性，我们选用了上述的JDBC技术来实现系统的核心部分。
　　.仅使用全备份还是共同使用全备份和增量备份。
　　扩展网页功能的方法有很多，如动态HTML、Script脚本语言、JAVA Applet、CGI、专用API等等。
　　为了排版打印，首先在录入图形试题时要按图形大小确定其在一张试卷中所占的图幅大小，为方便排版，本题库按试题的复杂程度和试题本身的需要确定了三种图幅大小：四分之一页、二分之一页、一页。
　　以上是服务器镜象备份，也称为双机热备份，另外还有硬盘镜象备份，(最好有二个相同的硬盘)，因出于成本或其他原因考虑，尤其是双机热备份(单独专门使用一个与服务器配置一样的计算机作为备份服务器)采用者较少，因此我们提出了异机备份的策略，这也是最好最经济的备份方式，特别是当服务器崩溃或Microsoft SQL Sever系统崩溃时，因为此时除了双热备份可以启用备份服务器直接使用外，通过其他的各种备份策略(不包括异机备份策略)必须重装服务器操作系统(Microsoft Windows NT)或重装Microsoft SQL Sever，采用异机备份策略，则不必担心，这时候只需待装好Microsoft SQL Sever时，从异机传送数据恢复即可，具体做法是：
　　在局域网内的任何一台工作站计算机上安装Microsoft Windows NT及Microsoft SQL Server，并在该机上建立一个与服务器中的数据库同名的数据库，利用Microsoft SQL Server系统本身提供的异机传送工具(在Microsof SQL Enterprise Manager中的Tools菜单下的Database/Object Transfer)通过设置定时(可以是每周、每月、每日或每时)由计算机自动的把服务器中数据库的数据传送到该工作站机的数据库中，这样一旦服务器(操作系统)崩溃或Microsoft SQL Server系统崩溃时，只要重装服务器操作系统(Microsoft Windows NT)或重装Microsoft SQL Server仍然可以采用异机传送工具来通过该工作站机把数据传回至服务器的Microsoft SQL Server数据库中，以确保数据的安全恢复，上海宏士达公司就是使用这一方法才在恶劣环境下也保证数据不丢失。整个系统的模块结构可以用图4表示。

图4 网络答疑系统实现结构示意图
　　这样的设计主要是出于如下的考虑：
　　(1)CGI是一种比较成熟和广泛使用的网上编程模式。网络答疑系统主要以数据库修改、查找和结果返回为主，没有太高的实时性要求，可以采用CGI模式。
　　(2)JAVA是跨平台的编程语言，用它编写的CGI程序可以工作在不同的服务器上。
　　(3)Java Script是嵌在静态HTML中的脚本语言，它方便易用，可以实现诸如返回上一页等简单操作，适合于在客户端使用，可提高应用的易用性、交互性，使界面更加友好。
5　小结
　　本文阐述了一个利用JDBC技术实现的基于Internet的网络答疑系统的设计、功能与实现。相对于传统的教室答疑模式，这种网上答疑具有以下的特点和优越性：
　　(1)方便灵活：网上答疑最大的优点是它跨越了时空的界限，解放了以往答疑活动对教师和学生双方的束缚。只需要一台连入校园网、装有通用浏览器的微机，答疑活动可以在任何时间进行；
　　(2)通用高效：由于采用了网上公布FAQ列表的方式，大大节约了教师的时间，学生也可以通过查看别人的问题来提高自己对课程的全面认识。
　　.恶意破坏，在一个系统中也不排除一些恶意破坏者。
　　当然，这个网络答疑系统还存在着一定的欠缺和不足，需要作进一步的改进，如增加系统功能：通过发E-mail的方式，在公布FAQ列表的同时增加对个别同学个别问题的辅导；在查看问题列表时增加根据检索词的查找等等。
　　最快的然而是最昂贵的保护是准备一个备份服务器随时替代主服务器，备份服务器必须能支持Microsoft SQL Server运行，并能完整备份所有数据库，系统和用户帐户，因为事务处理日志和数据库的转储由主服务器创建，所以他们必须迅速的装载到备份服务器，如果主服务器需要中止工作一段时间，只需投入备份服务器代替主服务器即可，备份服务器将接管事务处理日志，就好象什么也没有发生。目前本系统已经投入使用，并受到了广大师生的欢迎，我们将在应用中不断完善，使它能发挥更大的作用。
作者简介：印 女，27岁，讲师，主要研究方向为面向对象的程序设计和Internet上的数据库开发应用
作者单位：清华大学计算机信息管理中心北京100084
参考文献
1　Thomas M,Patel P,Hudson A,et al.熊伟华译.Java for Internet编程技术.北京：电子工业出版社, 1997-11
收稿日期：1998-08-03
