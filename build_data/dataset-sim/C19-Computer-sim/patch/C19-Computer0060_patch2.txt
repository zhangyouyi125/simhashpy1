计算机应用
Computer Applications
1999年 第19卷　第8期 Vol.19　No.8 1999



基于Petri网的超媒体模型HPN*
张　苓
　　摘　要　本文提出一个基于Petri网的超媒体形式化模型HPN。它采用层次组织，各层由一个扩展Petri网、若干对象以及Petri网与对象之间的映射表示，通过Petri网结构和执行语义说明超媒体的链接机制、浏览和媒体表现，具有刻画超媒体主要性质的能力。文中给出了HPN模型的形式化定义并举例说明其用途。
　　引理2[2]　设q≥rc＞0,令α=q-rc,Acα=Ac+αIn,则,当且仅当对V=VT≥0,存在唯一的PL≥0满足
　　　　　　　　　　　　　　　　　　　　　　(12)
当(Ac ,V1/2)可观时，PL＞0。超媒体形式化模型是对超媒体系统的抽象，从本质上刻画超媒体，得到独立于应用的、统一的超媒体抽象机制，为系统的设计、分析和比较提供基础。
　　基于Petri网理论［1］的模型在超媒体系统的描述方面具有广泛的前景。原因在于Petri网能方便、自然地表示为二部有向图，适合于说明超媒体的链接机制；同时它是一种具有并行执行语义的自动机，可以表达超媒体系统中的动态执行语义，解决并发浏览、存取控制和版本问题。而且Petri网具有说明基于严格同步关系的实时进程交互的能力，满足描述多媒体表现的需要［2］。
　　　　　陈善本，男，41岁，教授，博士生导师。在基于Petri网的超文本和多媒体建模方面，Trellis［3］是典型的超文本形式化模型，OCPN［2］很好地刻画了多媒体的表现时序，两者在某种程度上存在着性能上的互补，可以结合起来统一刻画超媒体。超媒体系统具有较大的规模和众多的相关因素，在一个Petri网中表达往往使网络变得十分庞大，超媒体文档结构及各成员的关系含混复杂，给浏览语义的说明以及系统的分析和验证带来相当的难度。
　　　　　刘华强，男，36岁，博士后。
2　HPN模型
2.1　HPN模型的形式化定义
　　HPN模型分为三层：顶层的链接层，中间的复合层和底层的原子层。复合层中的每一个Petri子网都对应于链接层Petri网中的库所，复合层Petri网中的每一个库所则与底层的Petri子网相关联。HPN模型形式化定义为：
定义1.　HPN = < LPN，CPN，BPN >。其中，
CPN = < CPN1，CPN2，…，CPNn> 
是LPN的子网的集合。
BPNi = < BPNi1，BPNi2，…，BPNim> 
是CPNi的子网的集合，i ∈n。
　　链接层定义超媒体文档的链接结构。其中，库所表现为通过链相连的节点或复合节点，变迁表现为节点或复合节点之间的语义联系。超媒体的动态行为由标识刻画。链接层Petri网（LPN）的形式化定义为：
定义2.　LPN=<PL,TL,FL,ML0,N,CN,I,L,W,ALl>
其中，
(1) PL：库所的有限集，PL={PL1，PL2，PL3 }；
　　PL1：抽象库所集，抽象库所对应复合层中的CPN网，类型为空；


　　图1
PL2：导航控制库所集，包含历史、索引两种类型的库所，分别与历史、索引节点相对应；
PL3：存取控制库所集，，p0用于存取控制或版本管理［3］。
(2) TL：变迁的有限集，TL={TL1，TL2，TL3，TL4，TL5}；
(3) FL：库所与变迁之间的流关系集合，FL={FL1，FL2，FL3，FL4，FL5}；
：普通流关系；
，
：同一存取库所间以及与其余库所的关系；
，
：导航控制库所与其余库所的关系；
(4) ML0：PL→N+为LPN的初始标识；
标识表示超媒体浏览时的状态，不同的状态转换代表不同的浏览路径。标识超媒体的浏览模型由Petri网的执行语义提供。
　　　　　陈善本，男，41岁，教授，博士生导师。函数APLl建立库所与节点对象和复合节点对象的映射；ATLl建立链对象和输入对象与变迁的映射；WLl将每一个抽象库所映射到一个逻辑窗口。


图2　语音系统构造

图3　状态空间表示

图4　语音信号A和预测信号B(部分)
　　当语音系统运行到稳定状态后，给定一个基音激励，系统就会从某一个状态沿一条固定的轨迹运行，轨迹在时间轴上的投影就是语音信号。
　　本文分析了语音非线性动力学系统的非线性特性，应用RPE算法对该系统进行了建模研究，估计出了语音稳态吸引子的分维。其中，
(1) PC、TC、FC：分别表示库所、变迁和流关系的有限集。
(2) MC0：PC→N+为CPN的初始标识。
(3) MB = {MB1，MB2，…，MBk }( k≥0 )为复合块对象集合;
(4) L = { L1， L2，…，Lm } ( m≥0 ) 为链接对象的集合；
(5) I = { I1，I2，…，Ip } ( p≥0 ) 为输入对象的集合；
(6) R是窗口内区域的集合；
(7) ACl是CPN的逻辑联系,ACl=<APCl,ATCl,RCl>这里，

函数APCl建立库所与多块对象或CPN子网的联系；ATCl建立链对象和输入对象与变迁的映射；RCl建立库所与窗口内区域的映射。
　　原子层定义各成员内部媒体间的时序关系，库所类型与所包含媒体的类型一致，每一个库所与一个实数相联（演播时间），变迁表示同步点。原子层Petri网（BPN）形式化定义如下：
定义4.　BPNi = <PB，TB，FB，MB0，B，S，T，La，ABl >。其中，
(1) PB：库所的有限集，PB = { PB1，PB2}，这里，
PB1：媒体库所集，库所类型与其中媒体类型一致；
PB2：同步库所，类型为空，不包含媒体内容，仅用于同步；
(2) TB：变迁的有限集；
(3) FB：库所与变迁之间的流关系集合；
(4) MB0：PB → N+为BPN网的初始标识，当库所中有令牌时，表示该库所有资源，该库所中的内容被装载。
(5) B={B1，B2，…，Bn }(n≥0)为块对象的集合；
(6) S={S1，S2，…，Sm }(m≥0)为同步对象的集合；
(7) T是库所到实数（时间延迟）的映射。
(8) La是窗口内层的集合；
(9) ABl是BPN的逻辑联系，ABl=<APBl,TBl,LaBl>，这里，

函数APBl建立库所与块对象和同步对象的联系；TBl将库所映射到实数，表示库所令牌在库所中的滞留时间；LaBl将库所映射到窗口某区域的层次。
2.2　变迁点火
　　变迁的点火由点火规则控制。在定义各层次Petri网的点火规则之前，我们引入激活集和开始/结束变迁两个概念。
定义5.　设集合SP1，SP2，…，SPn，若i∈n：SPi*T且SPi∩SPj=I(i≠j)，则称SP1，SP2，…，Spn是变迁T的激活集。降低消耗、少做试验并达到预期目的是人们梦寐以求的愿望。
定义6.　若*T=I，则称变迁T为开始变迁，记作Tstart；若T*=I，则称变迁T为结束变迁,记作Tend。
　　下面具体给出HPN模型中各层Petri网的点火规则：
　　. 原子层Petri网的点火规则
　　若BPNi被激活，则开始变迁Tstart立即点火，生成与所联库所数目相等的令牌。
　　对其余变迁Ti，当输入库所含有未锁定的令牌时，变迁立刻点火。点火后，Ti将其前集中所有令牌移走，所有输出库所获得令牌。
　　接到令牌后，库所Pi在规定时间内处于激活状态，相应的媒体内容被演播，这期间令牌被加锁，直至表现结束，令牌被解锁。
　　若Tend点火，则收回子网中所有令牌。
　　. 复合层Petri 网的点火规则
　　若CPNi被激活，则开始变迁Tstart立即点火，生成与所联库所数目相等的令牌。假设tk时刻的语音信号由下列方程给出
　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　　(10)
其中，x∈Rn,u∈R，时间序列y∈R，音周参数θk∈Rm。
　　点火后，变迁Ti将其前集中所有令牌移走，收回它们对应子网中的所有令牌，所有输出库所获得令牌。获得令牌之后，库所Pi被激活，所对应的BPN子网被激活。
　　若Tend点火，则收回子网中所有令牌。
　　. 链接层Petri 网的点火规则
　　对于变迁Ti，当某一输入库所包含令牌时，若发生输入事件，并且输入事件与变迁中链对象的条件相匹配，则点火执行。
　　点火时，变迁Ti将其前集中令牌移出，所有输出库所获得令牌。
　　获得令牌之后，库所Pi被激活，所对应的CPN子网被激活。
3　HPN模型对超媒体性质的刻画
3.1　静态结构
　　超媒体系统有三种静态结构：语义结构(Semantic Structure)、逻辑结构(Logical Structure)和时序结构 (Temporal Structure)［4］。
　　语义结构定义超媒体成员之间的语义联系（链接）。又对于给定结构的反馈控制器还能提供其它的设计自由度,这可被用来与LQL设计相结合以实现一定稳定裕度下的鲁棒性优化设计。在HPN模型中，显式链通过复合层和链接层的变迁说明，变迁点火意味着链接成立。许多模型忽视了对执行索引、历史查询等操作的隐式链的描述，HPN模型对此做出改进。令

则，且其满足Lyapunov方程
　　　　　　　　　　　　　　　　　　　　　　　　　　　(10)
将代入式(10)，则可得
　　　　　　　(11)
又，进一步得,当考虑闭环极点约束区域为圆域C(q,r)时，从前述可得，与式(8)及式(9)相结合，则定理得证。


图2　HPN对历史链的描述
　　超媒体系统的逻辑结构体现在节点和复合节点的构造。在HPN模型中，节点和复合节点的构造利用了Petri网层次建模的特性，将Petri子网用抽象库所――复合库所表示。
　　考虑具有弱阻尼特性的卫星姿态控制\[7\]，系统可用如下状态方程描述

其中，惯量J1=1,J2=0.1,k,d为弹簧力矩常数和粘滞阻尼系数：0.09≤k≤0.4，0.09，取名义对象参数为k0=0.09,d0=0.003794。复合库所与对应子网之间不仅结构相等，而且时序一致。
　　超媒体的时序结构说明媒体的表现时间以及媒体之间的同步。由于BPN的定义与OCPN模型类似，通过建立系统中对象与OCPN中库所的对应，OCPN模型能够方便地转化为BPN。这样BPN可以采用OCPN的结构化方法构造复杂的同步关系。并且给定任意媒体对象和时间关系，都有唯一的BPN表示与它相对应。也就是说根据HPN模型构造的超媒体的表现和同步不会有冲突和死锁产生。
3.2　动态特征
　　HPN模型不仅能够表达超媒体文档的静态结构，而且还能够通过Petri网的执行语义刻画超媒体的动态行为：浏览和表现。控制理论与应用,1995,12(1): 81～85
　3　Takens　F。初始标识M0表示浏览的初始状态，开始浏览时，初始标识中具有令牌的库所的内容被显示。最后举例说明该方法的有效性。当库所获得令牌时，对应的CPN子网被激活，相联的内容映射到显示设备；当令牌移出库所时，其内容从显示设备移出。1997
　7　Franklin G F,Powell J D,Abbas E N. Feedback Control of Dynamic Systems,Addison-Wesley,1986,447～473
1997-11-06收稿
。令牌的流动由变迁控制，如果在状态M时没有被激活的变迁，则浏览终止。
　　复合层中子网CPN的初始状态由开始变迁确定。库所中有令牌表示相应的内容能够被显示。当库所获得令牌时，相应BPN网被激活，多媒体成员在屏幕上表现；当令牌移出库所，成员表现结束。令牌的移动由变迁控制，表示当前表现内容的变化。当结束变迁点火之后该节点的表现终止（但未从显示设备中移走）。
　　原子层中的库所有令牌表示该库所中有资源，媒体内容能够被装载并显示在屏幕，令牌的流动刻画表现的过程。当结束变迁点火之后相联的成员表现结束。
　　总之，LPN网中的标识表示浏览中哪些节点（复合节点）是可见的；CPN子网中的标识表示节点的哪些成员是正在表现的；BPN子网中的标识表示成员中当前的表现媒体。点火CPN网中的变迁将改变表现的内容，点火LPN网中的变迁将改变浏览的内容。因为设计中加权阵常要通过反复试探来确定，增加了设计的难度，所以如何保证设计的稳定裕度并据此给出较为明确的加权阵选取依据是鲁棒最优控制理论中的一个重要问题。
4　超媒体应用的HPN模型的例子
　　考虑下面有关超媒体教学应用的描述。首先一行文字邀请用户启动超媒体演播。如果用户激活了与此相联的按钮，那么计算机屏幕上显示有关电脑介绍的媒体信息。信息包括一段文字，一幅图像和一段音频解说。有二条链与该多媒体信息相关联：一条称作“重复”，允许用户重新浏览多媒体信息，它能够在多媒体信息显示完后的任意时刻触发；第二条称作“视频”，屏幕上演播相关的视频信息，必须在文字等信息表现完之后触发。另外，如果用户触发屏幕中的两个热区，当前屏幕上的内容将隐去，分别导致有关显示器的介绍和主机的介绍。
　　采用HPN模型刻画，这段非形式化的说明描述成三元组H =（L，C，B），L是链接层的LPN网，C是复合层的CPN网，B是原子层的BPN网。其图形表示如图3。链接层具有下述浏览语义：最初，由库所card0表示的文字说明呈现于用户面前，当T10点火，库所card1获得令牌。这时如果有触发事件，且满足变迁T11或T12的点火条件，则令牌流动，显示变化。问题无解时可适当修改V。


图1　神经网络结构示意图
　　当实际系统进入稳定状态即达到稳态吸引子后，由于人们的知识仅限于测量时间序列，不能得到系统的真实吸引子，而只能利用Takens状态空间重构理论\[3\]来得到拓扑同构的、完全反映真实吸引子几何特征的重构吸引子。若变迁T21点火，结束当前演播，库所VIDEO获得令牌，与它相联的视频信息被显示。视频信息显示完毕之后，结束变迁点火，链接层中的库所card1处于非激活状态。x1i，b1i(i=1,2,…,n1)是隐藏层中第i个神经元的输出值和阈值，wkij是联结第k-1层中第i个神经元和第k层中第j个神经元的权值，网络的(n0+n2+1)n1个参数构成参数向量θ。
　　复合层中的库所ITS与同步层中的BPN子网相关联。ITS有三个组成库所：IMAGE，TEXT和SOUND，它们根据同步关系合成为BPN子网。当库所ITS被激活后，BPN中的开始变迁立即点火，库所TEXT获得令牌，相联的文字被显示于屏幕上，在此期间，令牌处于加锁状态。演播完毕后，库所中的令牌被解锁，变迁T31点火。与它相连的两个库所获得令牌，相应的媒体信息被显示。演播结束后，结束变迁点火，库所ITS处于非激活态，收回BPN子网中的所有令牌。
5　结论
　　HPN超媒体模型主要有以下特点：能够统一而形式地描述超媒体系统的语义结构、逻辑结构和时序结构，具有刻画超媒体主要性质的能力；以对象为信息处理和表现的单位；支持复合节点，支持一对一、一对多的链接，不仅能够刻画显式链，而且能够描述隐式链；超媒体结构和内容相分离；采用将Petri网分解成不同层次的方法刻画超媒体，不仅便于超媒体的理解和组织，而且使某些分析工作能够在局部解决，降低了Petri网的分析难度；模型中考虑了用户交互；能够有效地解决超媒体中的存取控制和裁剪版本问题；能够通过Petri网的分析机制发现超媒体中的潜在问题；激活集概念的引入增加模型的灵活性。
　　在HPN形式化模型基础上我们开发了一个超媒体演播系统原型，它是在Windows环境下采用BC++ 4.5语言及OWL工具实现，是超媒体应用的开发引擎，能够满足当前超媒体应用开发的主要要求。
* 本文研究得到国家863高科技项目基金资助。控制理论与应用,1995,12(1): 81～85
　3　Takens　F。主要研究领域为分布并行处理、超媒体。A Comprision of the Backpropagation and Recursive Prediction Error Algorithms for Training Neural Networks