计算机应用
COMPUTER APPLICATIONS
1999年 第19卷 第6期 Vol.19 No.6 1999



一种基于智能Agent的协同工作模型
朱晓芸　何钦铭　王申康
　　摘　要　计算机支持的协同工作（CSCW）需要研究出适应各种协同工作方式的灵活、开放、可扩充的模型结构。本文以分布式人工智能研究中的智能Agent为系统基本单元，提出一种基于智能Agent的协同工作模型，给出了它的具体实现。
　　传统的对象只“驻留”在一个程序之内，在程序编译时也不会分裂成多个实体。CSCW的模型或体系结构的研究始终是该领域的核心问题。我们将尝试把CSCW的概念、方法引入软件系统集成的集成开发环境中。正如Gunnar Teege［1］所说的：CSCW的涉及面很广，很难设计出一种涵盖所有协同工作方式的集成支持系统，因而作为集成化CSCW的支持技术，必须具备很好的可扩充性（Extendibility），能够比较容易地支持新的协同工作方式。试运行结果表明，特征的提取和识别技术的应用是成功的。我们称这些独立的对象模块为组件。个体能力的完善及高度智能化才是群体进行有效的协同工作的保证。因而，在CSCW的系统模型中，有必要统一和完善个体的组织机构，提高个体的自组织和自适应能力，使个体的行为智能化。结合分布式人工智能研究的新成果，我们采用了智能Agent为基本的个体组织，来构造集成化的CSCW系统模型。
2　基于智能Agent的CSCW模型
　　基于智能Agent的CSCW模型，以智能Agent为基本的组织单位，通过多个智能Agent的协同工作来完成共同的任务。 
　　(4) 对于每个目标区域 X ，根据其链码表示由 (1) ～ (4) 式求取其特征值，得到特征向量 T=(A,C,R,E) ；若：X 满足 S>S0 或 C<C0 (S0 、C0分别为癌细胞面积和圆度极限值)，则该区域标记为非癌细胞区域，算法结束，否则： 
　　(5) 对每个目标区域 X, 分别计算T与聚类中心 M1 、M2、M3 和 M' 的距离 D1、D2、D3、D'，若： D'<min{D1,D2,D3}，则该区域标记为非癌细胞区域，否则标记为可疑的癌细胞区域。这样的对象框架保证了分布对象间的高度透明的互操作性。 
　　(6) 色度学识别模块 对可疑区域 , 利用色度学技术对其相关的色度特征进行分析判断 , 标示出有癌细胞的区域。如何在已经成为事实的组件标准上建立一个实用的软件系统集成开发流程，在这一方面的作者试图提出一些方法［2］。通常情况下，一个智能Agent应有以下一些特征［4］：
　　(1) 智能Agent由知识状态和知识处理方法两部分组成；
　　(2) 智能Agent的知识状态被分割为若干一致的知识单元；
　　(3) 知识单元是智能Agent自身可以改变的部分，知识处理方法是其自身不可改变的部分；
　　(4) 智能Agent以通信的方式与外界环境建立联系。
　　以分布式人工智能中智能Agent的研究为基础，结合CSCW领域的研究特征，我们认为CSCW环境中的智能Agent的组织结构还应具有如下的特征：
　　(1) 智能 Agent的知识单元包含两部分的内容：有关协同工作方式的知识和有关其自身能力的知识；
　　(2) 与知识单元相应的知识处理方法也应体现两种情况：确定协同工作方式的协议推理和反映自身智能行为的认知推理；
　　(3) 支持CSCW环境下的多种媒体信息的表现能力，或称为多媒体信息的表现接口。组件的粒度可大可小；组件具有良好的接口，同经典对象一样，组件只能通过其接口来访问；组件的实现与其接口是分离的，组件可以使用对象、过程式代码或封装现有的代码实现；组件是系统无关的，可以作为对象跨越地址空间、网络、语言、操作系统和工具来调用；组件还可支持封装、继承和多态等对象特性。但是人类社会的组织结构及工作方式证明：对等的网状结构并不是有效的管理及协同工作方式。因此，在设计基于智能Agent的CSCW环境中，Agent们根据任务的不同从而采用不同的协同工作方式，在不同的协同工作方式下，Agent们形成不同的工作群体。群体间也以某种协同方式进行工作，此时群体可以看作为一种虚拟的Agent，它具备智能Agent的全部功能，因而在具体实现时可以在群体中依据任务的性质及协同方式选定一个Agent的作为这个群体的代表，参与群体间的协同工作。如此，整个CSCW环境中智能Agent的逻辑组织呈现多级的层次结构。如图1所示：

图1　多智能Agent构成的CSCW环境的组织结构
　　在这样的CSCW环境中，一个大的任务，依据协同方式不同被分解成多个小的任务，这些小的任务按照具体情况，既可以由底层的智能Agent来实现，也可以由多个Agent构成的Agent群体来完成。这种将网状拓扑结构映射成树状层次结构的管理方式，也正是人类社会组织管理的成果。
3　智能Agent的内部实现
3.1　智能Agent的体系结构
　　我们设计的智能Agent的总体结构如图2所示：

图2　智能Agent的总体结构及层次性
　　智能Agent具有统一的结构特征，依据内部功能的不同可以分成四个层次：通讯层、协同控制层、自定义层与表现层。其中通讯层由通信管理器组成，协同控制层由协议推理机与协同知识库组成，自定义层由认知推理机与能力知识库组成，而表现层通过Agent的多媒体信息表现接口来实现。Agent的内部状态集合是它的内部黑板组织，用于在Agent的各层次之间传递信息。 
1 系统概况 
1.1 系统硬件配置
　　系统的硬件配置如图 1 所示，主要有显微镜、摄影机、图象采集卡和计算机系统等。通过中间件（Middleware）包含的标准通讯协议，由各种不同的语言编写和由不同编译器编译的对象可以无缝地进行通信以构成一个完整而健壮的系统。
3.2　通信管理机
　　通信管理器是整个智能Agent与外部环境进行信息交互的接口，其组织结构如图3。其中：

图3　通信管理器的组织结构
　　. 接收器　接收来自外部环境中其它Agent的信息（通知、请求等），进行初步的通信语法检查后，排队到入通信队列。 
2 形态学识别与判断 
　　一个完整的识别过程由模式采集、特征提取 / 选择和分类判决组成，如图 2 所示。
　　. 群体成员表　是智能Agent活动环境的成员清单，它规定了Agent的通信活动范围。在相同面积的条件下，细胞区域边界光滑且为圆形，则周长最短，其圆度为 C=1 。具体结构如下：

Agent―TypeAgent―NameAgent―Address

　　其中：
　　Agent―Type　标明环境中不同Agent的种类，如：管理者，一般职员等，可用于标识CSCW环境中该Agent所在的群体。
　　Agent―Name　在整个CSCW环境中识别该Agent的唯一标志。
　　Agent―Address　Agent的地址，表示Agent在CSCW环境中所处的位置。如：在构成CSCW的网络系统中，可采用IP地址或名字服务地址来表示Agent的地址。在本系统中，我们采用图象处理、模式识别以及人工智能等技术对肺癌细胞进行了全面、多层次的基于特征量的描述，从而较好地克服了这一难题。 
作者单位：南京大学软件新技术国家重点实验室，南京 210093；
　　　　　中国人民解放军八一医院，南京 210002
参考文献
1 徐建华 . 图象处理与分析 . 北京：科学出版社 ,1992 
2 夏德深 , 傅德胜 . 现代图象处理技术与应用 . 南京：东南大学出版社 , 1997 
3 Zhou P,Pycock D.Robust Statistical Models for Cell Image Interpretation.Image and Vision Computing,1997(15) ： 307 
。为适应CSCW模型中大量的多媒体数据通信的要求，以及媒体数据在表现与时空同步上的特性，我们采用先进先出与信元响应优先级相结合的处理方法来处理队列中的每个通信单元，这些通信单元必须满足Agent间的通信协议约定 C 通信语法。通信语法定义了Agent间通信的三种方式：
INFORM <agent> <time> <fact> <priority>
　　通知某个Agent在某时time的某个事实fact，响应优先级为priority。
REQUEST <agent> <time> <action> <priority>
　　请求某个Agent在某时time执行某个动作action，响应优先级为priority。
INVOKE <agent> <time> <action> <priority>
　　取消某个Agent在某时time执行某个动作action，响应优先级为priority。
　　优先级priority的取值范围以及每级值的含义，可以根据具体的应用进行约定。我们在调度处理时认为取值越大优先级越高。
3.3　推理控制机
　　推理控制机有两部分，分别在协同控制层和自定义层中实现，是智能Agent进行协同工作和智能化行为的控制中心，采用特定的推理控制算法控制Agent的层次内部活动。系统所使用的涂片均采用 HE 染色法进行染色处理。
　　.通信解释器　解释、分析通信管理机收到的外界信息，将结果传给推理控制中心执行。根据这些参数以及人机交互输入的参数，再由肺癌病理专家系统和神经网络识别系统进行最终的判断和分类，可使整个系统识别癌细胞的正确率达到 95% 以上。 
1.2 系统处理流程 
　　系统的处理流程如以下 (1)-(7) 顺序，并对各模块的功能作简要叙述。
3.4　Agent的内部状态集合
　　内部状态集合是类似于黑板结构，是智能Agent的进行内部层次间信息传递的中间机构。其结构：

Status―TypeStatus―NameStatus―ValueTimestamp

　　其中：
　　Status―Type　Agent状态种类，用以区分Agent状态的不同侧面。
　　Status―Name　状态名称，唯一表示Agent的一个状态。设分辨单元边长为 1, 那么链的每一码段的长度是 1( 当 i= 偶数 ) 或( 当 i= 奇数 ) 。
　　Timestamp　状态时标，记录状态的设定时间。
　　通过定义不同类型的状态，可以表示Agent的不同状态特征，如：信念、选择、承诺等等。


图3　应用开发人员结构演变
　　目前，在软件工程的各个方面正发生巨大的变化。
3.5　Agent知识库
　　Agent的知识库既是指导Agent与其它群体成员进行协同工作的核心，也是Agent智能活动行为的依据，是其向外界承诺的基础。我们采用产生式规则作为知识的基本表示形式，提供对元级知识―方法的调用手段。它定义了对象之间通过ORB透明地发送请求和接收响应的机制，保证了在分布异构环境下对象之间的互操作性［2］［3］［4］。如何在已经成为事实的组件标准上建立一个实用的软件系统集成开发流程，在这一方面的作者试图提出一些方法［2］。
　　Status　是Agent的状态的逻辑组合，以AND和OR连接。
　　与传统的定制式应用软件开发相比，软件系统集成的人员结构亦将发生新的变化。
　　元知识调用语法：
　　CALL <time> <method>
　　状态集合的刷新语法：
　　REFLASH <time> <status-type>
<status-name> <status-value>
3.6　Agent的定义语法
　　通过前面的描述，我们为一个智能Agent定义下列部件：
　　(1) Agent的类型，名称；类型可用于确定Agent在群体中的地位与角色。
　　(2) Agent所在环境的群体成员；一个Agent获得其所在群体成员的方法有两种：在生成时先加入已有的成员，其后加入的成员通过广播的方式通知其它Agent。另一种方法是所有新加入的Agent必须向群体管理者(某个Agent)注册，群体中的Agent定期从管理者处得到最新的群体成员名单。一个Agent可以同时加入多个群体。但是，软件系统集成的要求更高。细胞区域的形状越偏离圆形，则 C 值越小。以上两种组件标准的提出，为软件系统的集成提供了必要的条件。关于Agent组织结构和能力知识的进一步完善与丰富也是我们今后工作的重点。
4　软件系统集成
　　根据应用需求，将若干软件系统集成在一起协同工作。尤其，CSCW环境是多媒体化的信息环境，基于多媒体信息的智能Agent的知识表达及推理机制是实现CSCW环境多媒体化的关键。
注：本文受到国家自然科学基金的资助(NO.69673031)。系统所使用的涂片均采用 HE 染色法进行染色处理。
何钦铭　副教授。
王申康　博士生导师，教授。
作者单位：浙江大学计算机科学与工程学系　浙江.杭州（310027）
参考文献
［1］　Gunnar Teege. Object-Oriented Activity Support: A Model for Integrated CSCW Systems, CSCW: The Journal of Collaborative Computing，1996；5:93-124
［2］　Shoham Y. Agent-oriented Programming. Artificial Intelligence,1993；60:51-92
［3］　Thoma B, Shoham Y, Schwarta A, Kraus S. Preliminary thoughts on an agent description language. International Journal of Intelligent System, 1991； 6:497-508
［4］　王怀民,陈火旺,高洪奎. 面向智能主体的程序设计. 计算机学报,1994；17(5):367-375
［5］　ISO 7498 Part4. Management framework. 1989
［6］　杨　枨，朱晓芸，俞瑞钊.基于智能Agent的网络管理，通信学报，1998；(1)
收稿日期:1998-12-28
