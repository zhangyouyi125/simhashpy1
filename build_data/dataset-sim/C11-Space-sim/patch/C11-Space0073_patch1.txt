航空计测技术
Aviation　Metrology　&　Measurement　Technology
1999年 第19卷 第3期 Vol.19 No.3 1999



基于边界扫描的板级BIT技术研究现状及发展趋势
温熙森啊×豕诰　黎琼炜　易晓山
　　摘　要　简要介绍了边界扫描技术，并介绍了基于边界扫描的电路板BIT技术的研究现状，然后分析了目前此技术存在的关键问题和发展趋势。
　　关键词　边界扫描　板级BIT　混合技术电路板
Research Status and Trend of Board-Level BIT Technique Based on Boundary Scan
Wen Xisen　Liu Guanjun　Li Qiongwei　Yi Xiaoshan
　　Abstract　In this paper,the boundary scan technique and the researching status of circuit board technique based on the boundary scan are presented.The key problem existing in this technique and developing trend are analyzed.
　　Key words　Boundary scan,Board-level BIT,Mixed technique circuit board
　　引言
　　BIT(Built-in Test：机内测试)是系统或设备本身为故障监测、隔离或诊断提供的自动测试能力。BIT技术从70年代提出到现在，随着武器系统复杂性的提高，已成为改善武器系统特别是航空电子系统测试性和诊断能力的一种重要途径和技术[1～2]；但是，随着VLSI、SMD(Surface Mounted Devices)、MCM(Multi-Chip Modules)、MPCB(Multi-Layer Printed Circuit Boards)的出现及发展，器件安装密度骤增而间距锐减(达到12 mil,1 mil＝25.4μm)，器件结构和功能复杂性大为增加(gate／pin＞1000／1)。常规的电路板BIT技术如余度技术、环绕技术和BIBLO(内部逻辑块监测)技术等难以实现或实现代价太大，无法解决上述现代电子技术发展带来的信息获取通道、不可接触测试、监测精度、诊断定位的精确性与一致性等问题[3]，从而导致BIT诊断能力差，虚警率较高，无法适应现代电子系统的BIT要求。
　　基于式(1)给出的测量数据集合D={y(ti):i=1,2,…,N},拟合模型(5)可以改写为线性回归模型的形式:
　　　　　　　　　　　　　　　　　　(6)
式中，1)　
　　　2)　β=(a0,a1,…,a1,b1,…bm,c1,…,cn)τ,ε(t)=εs(t)+ε0(t)
　　构造线性拟合模型参数向量β及随机误差根方差σ的M-型稳健估计方程:
　　　　　　　　　　　　　　　　　　　　(7)
其中，1)　
　　　2)　　　(门限c1和c2为适当选取的非负常数)
　　显然,当选取门限c1=+∞时,ρ(ω)=0.5ω2和φ(ω)=ω均为无界函数,式(7)为最小二乘估计方程;当适当选取门限c1和c2为有限非负常数时,ρ(ω)和φ(ω)均为有界函数,此时式(7)确定的参数估计(,)为稳健-抗扰性估计,具有良好的抗野值能力。
　　碳纤维复合材料在俄罗斯飞机上的应用过程与西方基本相似，首先在安-24、安-22、雅克40和伊尔-86等飞机上用于一些次要结构件以考验其性能，得到的数据表明碳纤维复合材料有良好的可靠性及减重效果。
　　另外，从工程背景看，边界扫描技术在1990年被IEEE采纳并形成了IEEE1149.1工业标准，得到了世界大多数集成电路制造商和测试商的支持，如Inte180486以上、Motorola68040、Xilinx的XC3000以上系列FPGA等芯片都具有边界扫描结构。据Schlumberger公司Wigley预言，今后五年内，多于50％的半导体器件将包含边界扫描结构。
3.2　野值点位置的确定
　　计算跟踪测量数据集合D中各数据点的规范化拟合残差:
　　　　　　　　　　　　　(13)
绘制拟合残差集合散点图,并记录所有使的时间点及数据个数s。近几十年来,国际统计界大量的研究结果表明,无论是基于最小二乘理论的模型参数最优估计、最优线性滤波算法(包括多项式滤波与递推Kalman滤波等)还是频谱分析中著名的极大熵谱估计,对采样数据中包含的野值点反应都极为敏感［1,2,5,7,8］。
1　基于边界扫描的板级BIT的基本形式
　　基于边界扫描的板级BIT的基本形式如图1所示，其基本组成主要有板上测试机、 IEEE1149.1测试总线和设计在IC内的边界扫描结构。其中，测试总线由TDI(测试数据输入)、TDO(测试数据输出)、TMS(测试模式选择)、TCK(测试时钟)、TRST(测试复位，待选)五条线构成，IC边界扫描结构包括芯片管脚和内部逻辑之间的BSC和TAP(测试存取口)控制器等。
　　1976年，巴拉科沃纤维联合股份公司开始了碳纤维复合材料的批生产。

图1　基于边界扫描的板级BIT基本形式图
2　基于边界扫描的板级BIT技术研究现状
　　边界扫描技术一出现，基于边界扫描的板级BIT技术研究,就围绕图1所示的基本形式迅速开展起来，其研究方向主要有：
2.1 测试内容方面，实现了板上器件的离线功能测试和器件间的互连测试
　　边界扫描技术因其固有的结构特点，克服了现代器件的不可接触测试等问题，可以实现现代器件的离线功能测试和互连测试。这是边界扫描技术的基本功能，已进行了广泛和深入的研究。
　　(2)孤立型野值　它的基本特点是,某一采样时刻ti处的测量数据是否为野值与ti-1及ti+1时刻数据的质量无必然联系。如National Central University的Chauchin Su等人分析了三态门和双向门的互连特征，根据电路物理特性进行互连测试，提高了故障检测率和隔离率[4]。起飞重量超过美国C-5A的安-124远程运输机是成功应用复合材料的另一例子，全机用了5500kg复合材料，1500m2机体表面采用了复合材料，单此一项可减重1800kg。葡萄牙波尔图大学的Jose M.Ferreira[5]、AT&T贝尔实验室的Najmi Jarwala[6]以及我国北京自动测试技术研究所[7]先后设计了板级BIST(机内自测试)结构，通过实验或仿真从原理上探索了基于边界扫描技术的板级BIT实现的可行性，得到了较满意的结果。另外，TI(Texas Instruments)研究生产了适合板级BIT的嵌入式测试控制器SN74LVT8980，它具有体积小、低功耗、易编程、可靠性高等特点，采用它实现的板级BIT，尤其满足武器和航空电子系统BIT的高可靠性、灵巧化和嵌入式要求[8]。
2.3 测试结构方面，设计了多扫描链结构
　　图1中，各边界扫描器件的TDI、TDO首尾相连,形成扫描链，实现测试数据的输入与输出。
　　(2)加性异常数据(Additive Outliers,AO)模型:在某些采样时刻ti0,由于测量环境突然发生的强影响因素影响,以及记录与操作的失误,使得测量数据严重偏离大部分数据所呈现的趋势,用模型描述为:
　　　　　　ε0(t)=λδ(i,i0)　　　　　　　　　　　　　　(4)
式中,λ为测量数据异常幅度,δ(i,i0)为Kronecker delta函数。利用扫描链连接器可以将单条长链分割成多条短链，从而缩短扫描链长度，提高BIT测试速度和故障定位能力。
2.4 测试向量方面，吸收测试生成的一般研究成果，形成了边界扫描测试的向量格式标准
　　基于边界扫描的板级BIT作为测试领域的一部分，不仅在向量生成方面吸收了测试生成的一般研究成果，而且结合边界扫描的串行特点，形成了标准的向量格式SVF(Serial Vector Format)和EVF(Embedded Vector Format)，从而有利于测试向量的生成和存储[9]。
2.5 测试过程方面，研究了高效的测试数据扫入扫出方法
　　基于边界扫描的板级BIT中，由于BIT资源简单以及边界扫描测试的串行特点，测试速度慢是一个显著的问题。Allison H.Evans基于异码输入方式研究了一种数据扫描的启发式算法，可以有效地缩短测试数据的扫入扫出时间[10]。
2.6 系统扩展方面，研究了板级BIT和系统级BIT的连接方案
　　板级BIT是系统极BIT的有机组成部分，接受系统级BIT的测试向量和控制命令，且向其报告测试结果。TI和National Semiconductor公司设计了边界扫描环境下板级和系统级的连接方案和接口产品，以适应大型系统的BIT要求[9][11]。
2.7 应用方面，在军方和航空部门得到了成功应用
　　1991～1993年，SCOPE公司应用边界扫描技术,对美空军HAIDE(敌机识别装置)进行了系统级和板级BIT设计，实现了98％的故障检测率和85％的故障隔离率[12]。
　　碳纤维复合材料在俄罗斯飞机上的应用过程与西方基本相似，首先在安-24、安-22、雅克40和伊尔-86等飞机上用于一些次要结构件以考验其性能，得到的数据表明碳纤维复合材料有良好的可靠性及减重效果。
3　基于边界扫描的板级BIT技术的可能发展趋势
　　基于边界扫描的板级BIT技术研究虽然取得了较大的进展，现阶段仍围绕一些关键问题向前发展，这主要有：
3.1 混合技术电路板的测试问题
　　目前，虽然边界扫描器件越来越多，非边界扫描器件仍大量存在；而且在复杂电路设计中，VLSI和ASIC(专用集成电路)虽然能够完成电路的许多功能，但并不是所有的逻辑功能都可以集成，相当多的功能仍需要采用分离器件或通用集成电路实现，而它们很少支持边界扫描;所以，由边界扫描器件和非边界扫描器件组装的混合技术电路板仍将在今后相当长时间内广泛存在，它们的测试问题成为板级BIT技术需要研究的关键问题。
　　解决此问题的基本思想是通过电路板上存在的边界扫描器件实现非边界扫描器件的测试，实现此思想需要进行如下两个方面的关键技术研究：
　　1)在综合考虑设计复杂性、实现代价和测试完备性等因素的情形下，基于边界扫描的电路板可测性设计技术研究。即研究如何合理选用或添加边界扫描器件以最好地完成电路板测试，同时使得实现成本最低。此技术具有很高的实际应用价值，值得开展深入的研究。
　　2)扫描链优化配置技术研究。美国南加州大学的Melvin A.Breuer在美国国防高级研究计划局DARPA的资助下对部分扫描领域中扫描链优化配置技术进行了研究，取得了较为满意的结果[13]。明尼苏达大学的T.Jung借鉴此技术对混合技术电路板测试进行了简单的研究[14]，证明扫描链优化配置技术对于提高测试效率具有很大的作用，有必要在此基础上开展进一步的研究。
3.2 测试向量生成的优化问题
　　生成序列长度短、故障覆盖率高、诊断准确的测试向量,一直是测试领域孜孜以求的目标和研究的问题。在板级BIT中，由于BIT资源较简单、测试时间受限以及边界扫描测试的串行特点，这个问题显得更加突出。据报道，卡-50可以抗12.7mm机枪及23mm航炮的射击。如果测试生成算法能充分利用电路板结构信息，生成的测试向量集将更为优化，这是测试向量生成的重要发展趋势[9]。
3.3 板级连续BIT(在线BIT)的实现问题
　　连续BIT是连续监控系统工作状态的一种BIT形式，它要求在系统工作时进行并行测试，是并行技术在BIT中的体现，同时也是BIT的较高要求和重要发展趋势之一。其他如安-72、安-225、图-160、雅克-42固定机翼干线飞机；苏-29和苏-31体育飞机；米-28、卡-32直升机以及Д-36、Д-18、ПС-90涡轮发动机都用了大量复合材料。
4　结论与展望
　　过去十几年来，基于边界扫描的板级BIT技术已经开展了广泛的研究，并且取得了较大的理论和实践成果，但仍存在一些关键问题，特别是混合技术电路板的测试问题,需要开展深入的研究。这些问题的解决，不仅具有重要的理论意义，而且具有重要的工程应用价值。当统计量LR(s)＞1-Cα时,可以100×(1-α)%的概率认为集合D中可疑点{y(ti1),…,y(tis)}是真正的故障数据