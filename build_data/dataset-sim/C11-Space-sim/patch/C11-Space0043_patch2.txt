航空计测技术
AVIATION METROLOGY & MEASUREMENT TECHNOLOGY
1999年 第1期 No.1 1999



一种新型的分布式数据采集器（一）
朱军　刘剑国　彭泽兵　陈荔莹　李滨
　　摘　要　介绍了一种新型的分布式智能数据采集系统――ALPHA900系列数据采集器。


图7　无隔板时混气密度变化图


图8　无隔板时氢气密度变化图
6　结　论
　　液体火箭发动机的有隔板和无隔板的两相冷态解数值模拟是模拟热态解的基础,也是为下一步对高频不稳定燃烧进行数值试验的基础。它集中了90年代采集器的优点，如可变字长、可编程智能前端、带温度补偿的连接器、可脱机工作等，并为突出各自功能形成系列。该采集器已成功地投入了工业生产，并且应用于工业过程监测、条件监测或加工监测。该系统使用价格低廉的RS485网络，各种型号模块提供了精确的温度、压力、应变及数字事件和频率等数据的测量及控制，并有相当突出的性能价格比。
　　关键词　数据采集　测量　自动控制　模块　分布式数据采集器　网络　监测
A New Distributive Data Acquistition System (1)

Zhu Jun,Liu Jianguo,Peng Zebing,Chen Liying,Li Bin
　　Abstract　This article introduces a new intelligent data acquisition system called ALPHA900 series,which manufactured by 304th institute of China Aviation Industry Corporation and ADAS company of UK.It sums up the advantages of the data acquisition systems in 90's,such as variable byte length,programmable intelligent front,connections with temperature compensation and so on.Every module in this series has its special function.It has been put into production successfully and used for process monitoring,condition monitoring or machine monitoring.Connected by low cost RS485 network,the ALPHA 900 modules supply accurate measurement and control for temperature,pressure and strain along with data events and frequency.It also has attractive ratio of performance and price.
　　Key words　Data acquisition,Measurement,Automatic control,Module,Distributive data acquisition system,Network,Industrial monitoring

1　工业现场自动化测试及控制中问题的提出
　　随着世界经济的发展和科技的进步，一个国家自动化程度的高低，已经成为衡量其经济发展水平的重要标志，而且在许多方面已经将它提高到决定性的高度。这其中工业自动化测试和控制的水平又是反应自动化程度的关键。
　　为促进工业自动化测试和控制水平的提高和适应日趋激烈的市场竞争，各国的工业测试和控制产品厂家纷纷推出了自己的杰作。以目前市场上出现的各类产品来看，各种产品均各自有着自己的侧重面。以总线系统为例，在工业领域应用的有：STD、STE、ISA、EISA、PCI、VME、MULTIBUS、PC/104、OPTOMUX、LONWORKS、CAN、MODBUS等等。这就对试验状态提出了要求。这些总线的构成主要考虑了工业测试和控制过程，系统组成可能出现的因素有：
　　①计算机处理器的处理能力；②总线的定义与构成方式；③处理器和I/O之间的访问方式和速度；④软件的兼容性和编程的灵便程度以及工具软件的支持能力；⑤应用的方便性和标准性；⑥系统通讯能力，联网能力；⑦系统的扩展能力，远程分布控制能力；⑧I/O能力及I/O分布情况；⑨可维护性；性能价格比；抵御外界恶劣环境能力；安装方式及物理结构。
　　从工业控制的结构方式而言，一般又分为集中控制、分散控制以及当前大量使用的集散分布式控制系统（DCS）。


图1　无隔板时网格划分网


图2　有隔板时网格划分图
4　边界条件的确定
　　无隔板和有隔板的人入口边界条件、出口边界条件以及上下表面的边界条件均相同。由稳态正弦测得其一阶弯曲,预测的标准振型如图2示。的确，这些公司的DCS是相当出色的，它们为许多结构复杂、设备门类繁多、数据交换吞吐较大、软硬件结构复杂的大规模系统做出了许多贡献。为此,考虑采用修正的快速离散算法如下:由式中看出,计算受限制而不能进行类似FFT运算的关键在于存在乘、加混合运算,而加法是考虑到积分关于时域的对称性所得？事实证明，答案是肯定的。让我们先来看一下为什么要采用分布式控制。


图3　有隔板时流量变化图


图4　发动机内部有隔板时压力分布图
图5为有隔板时燃烧室速度图,在喷注面附近,由于液氧的不断蒸发,燃烧室内的气流为加质流动,所以在燃烧室头部速度略有降低,而在喷管处,混气速度迅速增加,到出口处达到超音速。随着这种要求和复杂性的增加，各种协同测量仪器、产品和各种相关设备也必然会相应的增加。往往各个局部现场彼此之间又有一定的距离(有时各个I/O点之间相距非常遥远)，进而主计算机的功率和过程控制自动化软件也必然会相应增加;所以整个系统的硬件和软件的维护也就成为一件非常困难和复杂的工作。按本文(12)式推导作该主频两侧的非线性检测如图4所示,看出FRF的实测数据与变换数据间已产生了明显的差异,从而验证了由主模态振型分析得出的结果。这就是现在被称之为带有智能的分布式控制系统。
　　这种现代的分布式控制系统的模式可广泛适用于多种工业自动化的场合。包括过程控制、工厂自动化、半导体制、石油淬取和精炼、能源管理、冶金工业、电厂控制、食品工业、 给水与废水处理、管泵监测、造纸工业、化工产品制造、医药产品制造、石化过程控制、建材制造、纺织自动化、质量检测和控制、大型印刷业、远程遥测、玻璃及陶瓷制造、生物工程、港口运输工程、计算机集成制造、公路监测系统等。由此可以看出，这种分布式控制和测量系统适合工业自动化的绝大部分场合，特别是在我们国家以中小型项目为主体的工业发展状况，提供带有智能的分布式测量和控制，而造价又相对低廉的控制系统,将成为今后一个时期工业控制的主流。
2　ALPHA900系列智能分布式数据采集器简介
　　ALPHA900系列数据采集器综合了目前国内外各种同类产品的优点，是一种可用于工业过程监测、条件监测或加工监测及控制的经济型的并带有一定可编程的数据采集前端。为此,考虑采用修正的快速离散算法如下:由式中看出,计算受限制而不能进行类似FFT运算的关键在于存在乘、加混合运算,而加法是考虑到积分关于时域的对称性所得。其基本性能：
　　电压测量分辨率1 μV；电流测量分辨率1　μA；温度测量分辨率0.6 °C；电阻测量分辨率1 mΩ；事件测量分辨率1　ms；频率测量分辨率0.1　Hz。
　　其特点是：
　　1）高性能――在低价位的基础上使用先进技术以获取高性能。而截断效应是采样内的频段特性不完全包含在采样数据中,由于实采长度有限而造成了“泄露”。模块使用高质量的旋压式联接端子，热电偶模块具有特殊设计的隔热联接器，用于提高测量精确度；
　　3）编程简单――每个模块部都有错误校验及命令协议。
　　图8为无隔板时氢气密度的三维图,氢气的流量保持不变,在燃烧室圆柱段速度变化化,氢气的密度在三维图上近似为一平面,在喷管处,密度的变化规律和氧气、混气的变化规律相同。驱动软件及子程序可对各种不同类型的测量进行更高性能的编程；
　　4）软件校准――可对系统进行本地或远程校准。模块上的EEPROM可存储所有的校准与设置参数；
　　5）性能完备――系统允许同步进行测量、工程转换、报警控制及通讯，以获取最好的操作性能；
　　6）坚固的注塑壳体――模块尺寸紧凑，包括20个测量通道及4个附加I/O通道。图3为有隔板时的氢气、蒸发出来的氧气以及混合气体的流量图,对于无化学反应的情况,氢气的流量在理论上应是保持不变,从实际的计算结果可以看出,氢气的入口流量为4kg/s,出口流量也基本上是4kg/s,误差很小;氧气的入口流量为零,这是由于在燃烧室入口处喷入的是液氧,随着液滴在燃烧室内不断地蒸发,氧气的流量也逐渐增加;气相在入口处为纯氢气,在液氧完全蒸发完毕后,气相的成分是氢气和氧气的混合物。可以方便地和其它设备一起安装在仪器柜内。模块可以重叠实装并带有标准导轨联接器；
　　7）RS485多分支网络――网络以标准波特率工作。每个模块具有两个RS232接口，用于现场本机编程。ISA485串行接口可直接为5个以内模块供电；
　　8）数字模块――数字模块可提供信号计时功能控制、计数及事件的频率周期测量功能。每个通道都具有LED显示、可编程滤波和模块间同步功能；
　　9）快速通讯――系统支持以76.8 k波特率在1.2 km范围内控制99个模块或1980个通道。描述喷雾模型时考虑了简单的蒸发定律,研究了燃烧室内有隔板和无隔板气相加质流各个流场参数值的变化规律。电源输入与信号端及通讯端完全隔离；
　　11）本机报警――所有模块具有输入信号本机报警功能，由预先设置的报警门限进行触发。报警参数可以在不中断操作的情况下进行修改。
　　ALPHA900系列产品严格依照当前工业标准制造。CE设计满足EC98/336EEC标准、92/32/EECEMC标准以及73/23/EEC低电压标准。校准满足IP55/NEMA4标准。ALPHA900系列产品功能见表1。
表1

型号910911912913930931933980981982
通道数20201020201018
测量类型模拟模拟模拟模拟数字数字数字通讯通讯通讯
直流电压****
热电偶*
直流电流　*　*
电阻　　*
应变　　*
RTD　　*
RS485通讯*********
RS232通讯*******　*
ETHERNET
通讯　　　　　　　　　*
计数　　　　***
数字输入　　　　**
数字输出　　　　　*
计时　　　　　　*
周期　　　　　　*
频率　　　　　　*
辅助报警I/O***　***
电源　　　　　　　*
高隔离
(1000 V)　　　*


3　各模块性能简介
　　ALPHA900数据采集器共有91X、93X、98X三大系列十种型号。其中91X系列用于模拟量的测量，93X系列用于数字量的测量或控制，98X系列用于系统控制和网络通讯。
3.1　91X系列模拟模块
　　91X系列包括910热电偶模块、911电压和电流模块、912 RTD、电阻和电压输入模块、以及913具有隔离功能的电压和电流模块。其特点是：
　　①模拟量的测量；②多通道；③辅助报警I/O；④可编程设置测量类型；⑤报警电平和设置功能。
　　多项功能（测量、工程换算、报警处理和通讯）并存于同一模块。
　　910热电偶模块可进行20个通道14～17位可变字长分辨率和1 μV灵敏度的电压和热电偶测量。
　　本文即针对该方法在工程实用中仍面临的难点,推导了与采样频率无关的变换表达式且计算精度更高,在此基础上通过逆、正两次变换得到其快速算法,指出实部和虚部两种变换表达式的精度比较,对于实测信号考虑了剩余模态和截断效应的影响。910模块适用于大部分工业通用热电偶，可监测热电偶的工作状态、报告开路及损耗情况。
　　911电压和电流模块可进行20个通道14～17位可变字长分辨率和1 μV灵敏度的电压和电流测量。该模块配有通用的隔离螺栓联接器，可用于测量标准4～20 mA电流测量，并带有相应的内部分流器。描述喷雾模型时考虑了简单的蒸发定律,研究了燃烧室内有隔板和无隔板气相加质流各个流场参数值的变化规律。
　　912 RTD、电阻和电压输入模块可进行10个通道14～17位可变字长分辨率和1 μV灵敏度的RTD、电阻和电压测量。
2　基本变换公式推导
　　考虑实测传递函数的离散时间序列h(n)由于阻尼比较小而可以正确地简化考虑为实数序列。电阻模式可用于热敏电阻或其它电阻传感器的测量。图中喉部附近出现的流量脉动是由于物理参数在喉部变化比较剧裂以及网格比较疏松的缘故。
　　可对91X系列模块编程，在一个完整的主循环（50或60 Hz）中对被测信号积分，使模块能抑制叠加在mV信号上的干扰。在测量中连续监测干扰，如果干扰超出了测量模式所允许的动态范围（自动量程下该范围要大些），将会产生错误报告。此外，91X系列模块可连续进行测量，或根据主机所发出的命令进行测量，并能按管理软件要求的格式返回。
　　91X系列具有报警功能。91X系列模拟模块有三个数字输出和一个数字输入,它们可一起驱动一个本机报警指示器。两个报警输出可由高于（第一个报警输出）或低于（第二个报警输出）报警限的任一通道设置。可对每一个通道编程设置报警上限和下限以及死区阈值，以确保信号转换到报警状态。有隔板的计算域较为复杂,由于在计算域内有三块隔板,所以在划分网格时需要在燃烧室头部布置隔板的位置,如图2所示,将三块隔板均匀地排列在燃烧室头部,每一块隔板的厚度为一个横向网格间距,上、下两块隔板面为同一块隔板的两个侧面。第三个输出是一个隔离继电器，可用于驱动声音报警。该报警输出可通过使数字输出的触点闭合来表示“收到”和取消。当出现新的报警或通道状态错误时，输出可再次打开。（注意：两个报警输出和表示“收到”的输入未与RS485通讯口隔离）。
3.2　93X系列数字模块
　　93X系列包括930数字输入模块、931数字输入/输出模块和933事件捕获模块。其特点是：
　　对于930、931模块，有：
　　①数字状态输入（931有10个通道用于输出）；②计数；③低频测量；④每个模块多通道；⑤辅助报警I/O；⑥完全隔离输入（931有继电器输出）；⑦低速功能可进行编程过滤；⑧每个通道有指示灯。
　　933模块的功能有：
　　①状态、计数、频率、周期和现场计时功能；②每个模块18通道；③4个通道支持20 kHz计数和频率测量；④4个通道支持周期测量；⑤所有输入通道状态改变的计时测量,分辨率为1 ms；⑥与网络中其它933模块同步测量；⑦本机存储数据。通过型号应用证明了它的实用性。实际上,由于采样长度的限制多少都将产生剩余模态和截断效应的影响,对此在变换比较以前必须消除。
　　931模块有10个隔离数字输入通道，用于状态监测、计数及频率测量，并有10个继电器输出通道。每一个输出通道间相互隔离，能直接驱动开关装置或其它交流或直流负载。模块还为本机报警或监控提供了额外的输出。
　　933事件捕获模块用于精确记录检测到的事件。该模块提供18个全隔离输入通道用于事件测量。可用于事件时序的监测，例如工业现场的跳闸和控制反应等，以便研究原因及影响。933的主要功能是以实时时间为基准，记录输入端的变化。所记录的事件进入缓存区并由主机读取，不会丢失后续事件。每个933都有一个独立的缓存区，能随时接受访问。输入信号是有条件的。因此对于复杂的FRF数据,首先要求阶次耦合的数据应包含在同一采样段之中。主机与933的通讯是通过RS485网络，用于设置该模块的指令只有很少几个。


图3　有隔板时流量变化图


图4　发动机内部有隔板时压力分布图
图5为有隔板时燃烧室速度图,在喷注面附近,由于液氧的不断蒸发,燃烧室内的气流为加质流动,所以在燃烧室头部速度略有降低,而在喷管处,混气速度迅速增加,到出口处达到超音速。输入状态的变化也可同时被计数，并不影响事件记录功能。输入通道的当前状态或计数值可根据需要返回主机。全部通道也可进行不超过400 Hz的频率测量。4个通道测量时最大频率可达到2000 Hz。周期及间隔的测量可以用4个通道进行，以提高低频信号的分辨率。与现场的联接采用隔离螺栓联接器。
　　数字模块同样具有报警功能。数字模块有三个辅助数字输出和一个数字输入。它们可一起驱功一个本机报警指示器。
　　对于930、931模块，设置通道（930为1～10，931为1～5）中任一通道可产生第一个报警输出，设置通道（930为11～20，931为6～10）中任一个通道可产生第二个报警输出。可对每一个状态通道，编程设置报警状态（0或1）。计数输入只能指定一个高电平报警。两种报警输出的数字电平适用于采用隔离输入的外部小功率继电器。
　　对于933模块，可对每一个状态或事件通道编程设置报警状态（0或1）。测量频率、周期和间隔时，可设置报警上限和下限以及死区阀值，以确保信号转换到报警状态。本文通过计算比较了燃烧室内有隔板和无隔板的流场参数值,验证了隔板体的数值处理方法对计算冷态两相流的有效性。两种报警输出的数字电平适用于采用隔离输入的外部小功率继电器。数字模块三个输出是一个隔离继电器，可用于驱动声音报警。该报警输出可通过使数字输出的触点闭合来表示“收到”和取消。当出现新的报警或通道状态错误时，输出可一次打开。（注意：前两个报警输出和表示“收到”的输入未与RS485通讯口隔离。）
3.3　98X系列主机适配器及接口
　　98X系列包括980带隔离电源（与PC电源隔离）的ISA总线RS485接口、981RS232―485适配器、982无线电网适配器，该系列主要用于数据采集器的网络通讯和控制。
　　980ISA总线RS485接口可直接向五个模块供电，支持标准波特率76.8 kB或更高的波特率，具有标准COM口；981RS232―RS485适配器具有内部方向控制功能，982无线电网适配器拥有IP地址，这两个模块均用DIN导轨安装。
　　这些适配器使模块的接口能与标准PC相连，通过RS485接口进行通讯和监测。对于要求使用标准串行口的场合，981主机适配器允许通讯口对RS485网络操作。标准软件语言能以软件支持的波特率与输入输出模块通讯。对用户而言，RS485收发设备的操作是自动并且透明的。980RS485主机接口能使计算机在较高波特率下工作，纠错与缓存性好，驱动软件和子程序与产品一起提供，以获得更佳性能。
　　作为替代品，982无线电网络适配器能直接与无线电网络服务器通讯，该模块运行自己从服务器调用的相应软件，在其IP地址上按TCP/IP协定传送数据。
50岁　男　高级工程师　读者服务卡索引号： 116
作者单位：长城计量测试技术研究所，北京市，100095
(未完待续)
1999-01-22收稿
